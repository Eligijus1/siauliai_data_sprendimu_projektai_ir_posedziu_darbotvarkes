(self.webpackChunkPantera=self.webpackChunkPantera||[]).push([[321],{6739:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var i=s(3645),a=s.n(i)()((function(e){return e[1]}));a.push([e.id,".xsort--drag{position:fixed;z-index:1050;pointer-events:none;max-height:100px;overflow:hidden}.xsort-placeholder,.xsort-placeholder-td{border-radius:.25rem;border:1px dashed #777;width:100%}",""]);const n=a},1682:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});class i extends HTMLDivElement{constructor(){super()}connectedCallback(){setTimeout((()=>this._init()))}_init(){console.log("custom component:",this)}}},5686:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});class i extends HTMLInputElement{constructor(){super(),this._validation={message:null,default:null,error:!1,validity:!1,info:null},this._keydown=[];const e=this;this._keydown&&this._keydown.length>0&&this.addEventListener("keydown",(e=>{!0!==e.ctrlKey&&(this._keydown.includes(e.which)||e.preventDefault())})),this.onkeypress=function(t){setTimeout((()=>{e._validate()}),2)}}connectedCallback(){const e=this;Object.defineProperty(this._validation,"info",{set:function(t){e._info(t)}}),setTimeout((()=>{this._init(),e._clear_input()}))}_info(e){const t=this.closest(".pantera-control").querySelector("div.valid-feedback");t&&(0!==e.length?(t.innerText=e,t.classList.remove("d-none")):t.classList.add("d-none"))}_validate(){this._validation.message=null,this._validation.validity=!1;let e=this.checkValidity();return!1===e?(this._validation.validity=!0,this._error(!1),!1):!0===e&&this.hasAttribute("maxlength")&&this.value.length>this.maxLength?(this._validation.message="Maksimalus lauko ilgis "+this.maxLength.toString(),this._error(!1),!1):(e=this._valid(),!1===e?(this._error(!1),!1):(this._error(!0),e))}_error(e){const t=this.closest(".pantera-control"),s=t.querySelector("div.is-invalid");let i;if(!1===e)return this._validation.error=!0,!0===this._validation.validity?(i=this.validationMessage,!0===this.validity.valueMissing&&(i="Šis laukas yra privalomas")):i=this._validation.message||this._validation.default,s.classList.remove("d-none"),s.textContent=i,void t.classList.add("is-invalid");!0===this._validation.error&&(s.textContent=null,s.classList.remove("d-none"),this._validation.error=!1),t.classList.remove("is-invalid")}_clear_input(){const e=this.closest("div.pantera-control").querySelector("a.control-clear");e&&e.addEventListener("click",(()=>{this.value=""}))}}const a=i},365:(e,t,s)=>{"use strict";s.d(t,{C:()=>o});var i=s(8019),a=s(6435),n=s(3136);var r=s(929),l=s(2431);const o={json:new class{load(e,t,s,a=!0){new i._(e,t,{json:!0},(e=>{s(e)}))}del(e,t,s,r,l){a.q.question.show(e,(e=>{!1!==e&&(n.R.start(),s?new i._(t.url,t.data,{json:!0},(e=>{s(e),n.R.stop()})):new i._(t.url,t.data,{json:!0},null))}))}},post:i._,get:r.A,upload:l.b};window.xcrud=o},929:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var i=s(6435),a=s(3136),n=s(2850),r=s(5156);class l{constructor(e,t,s,n){s.xloadingbar=void 0===s.xloadingbar||s.xloadingbar,this.params=s,this.params.xloadingbar&&a.R.start();let r=this;this.callback=n,this.url=e,null!==t&&"object"==typeof t&&t instanceof FormData!=!0&&(t=this.param(t)),t&&(e=void 0!==e.split("?")[1]?`${e}&${t}`:`${e}?${t}`,this.url=e);let l=new XMLHttpRequest;l.onreadystatechange=()=>{if(4==l.readyState){if(!(l.status>=200&&l.status<299)){if(302===l.status){let e=l.getResponseHeader("location");return void console.log(e)}return void i.q.error.show({text:`Nepavyko kreiptis į ${e}, atsakymas: ${l.status}`,developerOnly:!0})}r.response(l)}},l.open("GET",e,!0),l.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.send()}response(e){let t,s=e.responseText,n=e.getResponseHeader("X-Content")||"error",l=e.getResponseHeader("X-Error")||null,o=e.getResponseHeader("Content-Type"),d=e.getResponseHeader("X-Module"),c=!1;if("json"!==n&&-1===o.indexOf("json")||(t=JSON.parse(s),c=!0,!1===t.success&&(n="error")),"error"===n||"xlog"===n)return!0===c?i.q.error.json(t):i.q.error.show({text:s,type:l}),void this.enable_submit(this.params.submitBtn);if("json"===n){if(this.params.reload){if(!0===this.params.reload.table){const e=Array.from(document.querySelectorAll("div.xtable"));for(let t=0,s=e.length;t<s;++t)e[t].pantera&&e[t].pantera.reload()}if(!1===this.params.reload.content)return t.contentLoad="",t.url=!1,this.params.xloadingbar&&a.R.stop(),void i.q.notify.json(t)}if(this.callback&&(this.callback(t),!1!==this.params.important))return void(this.params.xloadingbar&&a.R.stop());this.params.url&&!t.url&&(t.url=this.params.url.replace("$pk",t.pk)),i.q.notify.json(t),this.enable_submit(this.params.submitBtn)}else if("modal"===n)this.params.xloadingbar&&a.R.stop(),this.callback?(i.q.modal.create(s),this.callback(s,n)):i.q.modal.create(s),this.enable_submit(this.params.submitBtn);else{if("file"===n)return i.q.error.show({text:"Grįžo failas",developerOnly:!0,type:l}),void(this.params.xloadingbar&&a.R.stop());if("ts"===n){a.R.stop(),t=JSON.parse(s);let e=document.getElementById("context-menu");return e&&e.classList.remove("show"),void document.querySelector(t.s)[t.m]()}if("redirect"===n)return void(window.location.href=s);if(this.callback&&!1!==this.params.important)return this.callback(s),this.params.xloadingbar&&a.R.stop(),void("module"===n&&r._.updateNavigation(d));"module"===n?(this.handleModule(s,d),this.enable_submit(this.params.submitBtn)):(i.q.error.show({text:"Neatpažintas response tipas",type:l}),this.enable_submit(this.params.submitBtn))}}param(e){return Object.keys(e).map((t=>`${t}=${encodeURIComponent(e[t])}`)).join("&")}enable_submit(e){!e||!0!==e.disabled&&!0!==e.loading||(e.disabled=!1,e.loading=!1)}handleModule(e,t){let s=document.querySelector("#content")||document.body;if(!s)return void i.q.error.show({text:"Renderina modulį - Nerastas CONTENT DIV",developerOnly:!0});const l=new n.t;window.history.pushState({url:this.url},"test",this.url),l.replace(s,e),r._.updateNavigation(t),this.params.xloadingbar&&a.R.stop(),i.q.modal.closeAll()}}},8019:(e,t,s)=>{"use strict";s.d(t,{_:()=>r});var i=s(6435),a=s(3136),n=s(2850);class r{constructor(e,t,s,n){(s=s||{}).xloadingbar=!(!s||void 0!==s.xloadingbar)||s.xloadingbar,this.params=s,"boolean"==typeof this.params.xloadingbar?this.params.xloadingbar&&a.R.start():a.R.start(this.params.xloadingbar);let r=this;this.callback=n,this.url=e,null!==t&&"object"==typeof t&&t instanceof FormData!=!0&&(t=this.param(t));let l=new XMLHttpRequest;l.onreadystatechange=()=>{if(l.readyState==XMLHttpRequest.DONE){if(!(l.status>=200&&l.status<299))return 302===l.status?void 0:void i.q.error.show({text:`Nepavyko kreiptis į ${e}, atsakymas: ${l.status}`,developerOnly:!0});r.response(l)}},l.open("POST",e,!0),l.setRequestHeader("X-Requested-With","XMLHttpRequest"),t instanceof FormData!=!0&&l.setRequestHeader("Content-type","application/x-www-form-urlencoded"),!0===s.json&&l.setRequestHeader("Accept","application/json, text/javascript, */*; q=0.01"),l.send(t)}response(e){let t,s=e.responseText,n=e.getResponseHeader("X-Content")||"error",r=e.getResponseHeader("X-Error")||null,l=e.getResponseHeader("Content-Type"),o=!1;if("json"!==n&&-1===l.indexOf("json")||(t=JSON.parse(s),o=!0,!1===t.success&&(n="error")),"error"===n||"xlog"===n)return!0===o?(i.q.error.json(t),this.callback&&this.callback(t)):i.q.error.show({text:s,type:r}),void this.enable_submit(this.params.submitBtn);if("json"===n){let e=void 0===t.modalClose?this.params.modalClose:t.modalClose;if(this.params.reload){if("true"===this.params.reload.table){const e=Array.from(document.querySelectorAll("div.table-model"));for(let t=0,s=e.length;t<s;++t)e[t].pantera&&e[t].pantera.reload()}else if(this.params.reload.table&&""!==this.params.reload.table){let e=document.querySelector(`div.table-model#${this.params.reload.table}`);e&&e.pantera.reload()}if(!1===this.params.reload.content||void 0!==this.params.reload.table)return t.contentLoad="",t.url=!1,this.params.xloadingbar&&a.R.stop(),void i.q.notify.json(t,{modalClose:e})}if(this.callback&&!t.callbackFalse)return this.callback(t),void(this.params.xloadingbar&&a.R.stop());void 0===t.url&&"false"===this.params.url&&(t.url=!1,this.params.url=!1),this.params.url&&!t.url&&(t.url=this.params.url.replace("$pk",t.pk)),i.q.notify.json(t,{modalClose:e}),this.enable_submit(this.params.submitBtn)}else{if("modal"===n)return this.params.xloadingbar&&a.R.stop(),this.callback?i.q.modal.create(s,this.callback):i.q.modal.create(s),void this.enable_submit(this.params.submitBtn);if("file"===n)return i.q.error.show({text:"Grįžo failas",developerOnly:!0,type:r}),void(this.params.xloadingbar&&a.R.stop());if("redirect"===n)return void(window.location.href=s);if(this.callback)return this.callback(s),void(this.params.xloadingbar&&a.R.stop());"module"===n?this.handleModule(s):(i.q.error.show({text:"Neatpažintas response tipas",type:r}),this.enable_submit(this.params.submitBtn))}}param(e){return Object.keys(e).forEach((t=>{null!==e[t]&&void 0!==e[t]||delete e[t]})),Object.keys(e).map((t=>`${t}=${encodeURIComponent(e[t])}`)).join("&")}enable_submit(e){e&&!0===e.disabled&&(e.disabled=!1)}handleModule(e){let t=document.querySelector("#content")||document.body;if(!t)return void i.q.error.show({text:"Renderina modulį - Nerastas CONTENT DIV",developerOnly:!0});const s=new n.t;window.history.pushState({url:this.url},"test",this.url),s.replace(t,e),this.params.xloadingbar&&a.R.stop(),i.q.modal.closeAll()}}},2431:(e,t,s)=>{"use strict";s.d(t,{b:()=>r});var i=s(6435),a=s(9894),n=s(3211);class r{constructor(e,t,s,n){this.error=!1;let r=new XMLHttpRequest;r.upload.addEventListener("progress",(e=>{if(!e.lengthComputable)return;let t=Math.round(e.loaded/e.total*100);100!==t&&n({type:"progress",progress:t})})),r.addEventListener("load",(e=>{let t=r.responseText,s=r.getResponseHeader("X-Content");if("json"===s){let e=JSON.parse(t);return!1===e.success?(this.error=!0,i.q.notify.error(a.D.ajax,e.msg),void n(e)):(e.type="complete",void n(e))}if("error"===s)return console.error("upload.errror"),void this.errorMsg(e);console.error("upload.load")})),r.addEventListener("abort",(()=>{console.dir("upload.abort")})),r.addEventListener("error",(e=>{console.dir("upload.error"),this.errorMsg(e)})),r.open("POST",e,!0),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("Accept","application/json, text/javascript, */*; q=0.01");let l=new FormData;l.append("file",t),Object.keys(s).forEach((e=>{l.append(e,s[e])})),r.send(l)}errorMsg(e){const t=!n.f.production;let s,a=e.currentTarget;s=!0===t?`Serverio klaida: ${a.status}`:"Serverio klaida, perkraukite svetainę",i.q.notify.show({title:"Failas neįkeltas",message:s,type:"warning"})}}},6435:(e,t,s)=>{"use strict";s.d(t,{q:()=>g});var i=s(5630),a=s.n(i),n=(s(3734),s(365)),r=s(6611);var l=s(9894),o=s(4387),d=s(821),c=s(5204),h=s(5173),u=s(6455),m=s.n(u);var p=s(3211),v=s(3136);const g={modal:new class{constructor(){this.count=0}show({url:e,title:t,style:s,backdrop:i,data:a,callback:r,width:l,onClose:o,one:d}){this.onClose=o||this.onClose;let c=Object.assign(Object.assign({},a),{title:t,style:s,backdrop:i,modal:!0,width:l,one:d});new n.C.post(e,c,{json:!1},r)}close(){this.active&&this.active.trigger("dismiss.bs.modal")}closeAll(){if(!this.count)return;let e=this.count;for(let t=0;t<e;t++)this.close()}remove(){if(this.active)if(this.active.remove(),this.count--,0===this.count)document.body.classList.remove("modal-open"),this.backdrop&&this.backdrop.remove();else{document.body.classList.add("modal-open"),this.active=a()("div.modal:last");let e=parseInt(getComputedStyle(this.backdrop).zIndex);this.backdrop.style.zIndex=(e-5*this.count-1).toString(),this.active.focus()}}create(e,t){this.callback=t;let s=this,i=document.querySelector("div.xmodal-drawer"),n=e.indexOf("xmodal-drawer");-1!==n&&i&&s.remove();let l=document.createRange().createContextualFragment(e);document.body.append(l);let o=document.querySelector("div.modal:last-child"),d=a()(o);d?(++s.count,d.on("show.bs.modal",(function(e){(0,r.S)(),s.callback&&s.callback(e)})),d.on("show.bs.modal",(function(){if(1===s.count||!s.backdrop)return;let e=Array.prototype.slice.call(document.querySelectorAll("div.modal")),t=e[s.count-1],i=e[s.count-2],a=parseInt(getComputedStyle(i).zIndex);t.style.zIndex=(a+10).toString(),s.backdrop.style.zIndex=(a+5).toString()})),d.on("dismiss.bs.modal",(function(e){s.onClose&&s.onClose(e),s.onClose=null,s.remove(),s.callback&&s.callback(e)})),d.on("hidden.bs.modal",(function(e){s.onClose&&s.onClose(e),s.onClose=null,s.remove(),s.callback&&s.callback(e)})),d.modal({backdrop:!(s.count>1||-1!==n)}),1===s.count&&(this.backdrop=document.querySelector("div.modal-backdrop")),this.active=d):--s.count}},notify:new l.y,question:new o.A,toast:new d.X,tooltip:new c.J,lightbox:h.z,swal:new class{show(e){m().fire(e)}},error:new class{show({text:e,title:t,developerOnly:s=!1,type:i}){!0===s||"xException"==i||"mainException"==i||"sException"==i?!0!==s||!1!==p.rH.developer||t||(t="Klaida"):!0===p.rH.developer&&"uException"!=i?m().fire({grow:"fullscreen",confirmButtonColor:"#d33",confirmButtonText:"Supratau",html:e}):m().fire({heightAuto:!1,icon:"error",html:e,showConfirmButton:!1,showCancelButton:!1}),v.R.stop()}json(e){let t,s="Klaida",i=null,a=e.url,n=e.validation;if(n){let e=document.querySelector("input[name="+n.field+"]");if(e)return e._validation.message=n.message,void e._error(!1);v.R.stop()}a&&(i=()=>{window.location.href=a}),"object"==typeof e.msg?(s=e.msg.title,t=e.msg.message):t=e.msg;let r={icon:"error",confirmButtonColor:"#d33",confirmButtonText:"Supratau",html:t,title:s,heightAuto:!1};i?m().fire(r).then((e=>i(e))):m().fire(r),v.R.stop()}}};window.xdialog=g},5173:(e,t,s)=>{"use strict";s.d(t,{z:()=>n});var i=s(6435),a=s(3211);class n{constructor(e,t,s,n,r,l,o){if(this.params={refKey:e,refVal:t,typeId:n},!e)return;if(t<1)return;let d={view_gallery:!0};l&&(d.input=l.getAttribute("name")),r&&("string"==typeof r?d._param=r:d.photos=JSON.stringify(r)),i.q.modal.show({url:`${a.xw.zone}/upload/gallery/${e}/${t}/${s}`,title:"Gallery",one:o,data:d})}}},9894:(e,t,s)=>{"use strict";s.d(t,{D:()=>i,y:()=>d});var i,a=s(6455),n=s.n(a),r=s(3136),l=s(6435),o=s(2114);!function(e){e[e.js=0]="js",e[e.sql=1]="sql",e[e.ajax=2]="ajax",e[e.notfound=3]="notfound"}(i||(i={}));class d{constructor(){this.toast=!0}show({title:e,message:t,type:s,params:i},a){if("success"===s&&!e&&!0===this.toast)return void l.q.toast.show({message:t,type:s,position:"top-right"},a);let r=Object.assign(Object.assign(Object.assign({},{icon:"success",confirmButtonColor:"#d33",confirmButtonText:"Supratau",heightAuto:!1}),{title:e,html:t,icon:s}),i);"info"!=r.icon&&"success"!=r.icon||(r.confirmButtonColor="#3085d6"),a?n().fire(r).then((e=>a(e))):n().fire(r)}hide(){}error(e,t){r.R.stop();let s="object"==typeof t&&t.url?t.url:"",i={title:"Įvyko klaida",type:"error",message:null},a=null;"string"==typeof t?i.message=t:(Object.assign(i,t),i.message=t.msg),s&&(a=()=>{window.location.href=s}),this.show(i,a)}json(e,t={}){let s,i,a="success",n=!1===e.msg,d=e.notify_params||{},c=!1!==e.callback;"object"==typeof e.msg&&(s=e.msg.title,i=e.msg.message,a=e.msg.type||a);let h=e.url,u=e.blank||!1,m="string"==typeof e.toast||void 0===i,p=!1!==e.contentLoad,v=()=>void 0!==h&&"boolean"==typeof h&&!1===h?(r.R.stop(),void this.modalClose(t.modalClose)):h&&!0===u?(window.open(h,"_blank"),r.R.stop(),void this.modalClose(t.modalClose)):void(!1!==p?(o.X.content.load(h||window.location.href),r.R.stop(),this.modalClose(t.modalClose)):window.location.href=h||window.location.href);if(!0!==n)return!0===m?(!1===p?l.q.toast.save({message:" "+(e.toast||"Išsaugota"),position:"top-right",type:"success",timer:e.timer}):l.q.toast.show({message:" "+(e.toast||"Išsaugota"),position:"top-right",type:"success",timer:e.timer}),void v()):"info"===a||!1===e.toast?(r.R.stop(),this.toast=!1,!1===c&&(v=null),this.show({title:s,message:i,type:a,params:d},v),void(this.toast=!0)):void this.show({title:s,message:i,type:a,params:d});v()}modalClose(e){!1!==e&&(!0===e||void 0===e?l.q.modal.close():"object"==typeof e&&e.all&&l.q.modal.closeAll())}}},4387:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var i,a=s(6455),n=s.n(a);!function(e){e[e.js=0]="js",e[e.sql=1]="sql",e[e.ajax=2]="ajax"}(i||(i={}));class r{constructor(){}show({title:e,text:t,html:s,icon:i,confirmButtonText:a,cancelButtonText:r,confirmButtonColor:l,cancelButtonColor:o,showConfirmButton:d},c){let h={icon:i||"question",title:"false"==e?"":e||"Ar tikrai norite?",text:t,html:s,showCancelButton:!0,showConfirmButton:d="string"!=typeof d,confirmButtonColor:l||"#d33",cancelButtonColor:o||"#3085d6",confirmButtonText:a||"Taip",cancelButtonText:r||"Ne",heightAuto:!1};n().fire(h).then((e=>{c(!!e.value)}))}}},821:(e,t,s)=>{"use strict";s.d(t,{X:()=>r});var i=s(6455),a=s.n(i),n=s(3999);class r{show({message:e,type:t="success",position:s="top-right",timer:i=1500},n){let r={icon:"success",toast:!0,position:"top-right",showConfirmButton:!1,timer:i||1500},l=Object.assign(Object.assign({},r),{text:e,icon:t,position:s});n?a().fire(l).then((()=>{n()})):a().fire(l)}save({message:e,type:t="success",position:s="top-right",timer:i=1500}){let a={message:e,type:t,position:s,timer:i};n.W.setobj("toast",a)}}},5204:(e,t,s)=>{"use strict";s.d(t,{J:()=>l});var i=s(7211),a=s(3130),n=s(8019);class r{constructor(e,t){this.hoveredOnTooltip=!1,this.renderTooltip=(0,a.Z)((()=>{if(this.content=this.options.content||this.element.dataset.tooltip||this.element.dataset.title,this.content)if(this.urlRegex.test(this.content)){const{content:e}=this;if(r.requests.includes(e))return;r.requests.push(e),new n._(e,{},{xloadingbar:!1},(t=>{"string"==typeof t&&(this.content=t,this.element.dataset.tooltip=t,this.renderTooltipDom(),r.requests=r.requests.filter((t=>t!==e)),setTimeout((()=>{[...document.querySelectorAll(`[data-tooltip="${e}"]`)].forEach((e=>e.dataset.tooltip=t))})))}))}else this.renderTooltipDom()}),this.delay),this.onMouseMove=e=>{let t=e.target;this.hoveredOnTooltip=Object.is(this.element,t.closest(".tooltipstered"))||Object.is(this.tooltipEl,t.closest(".tooltip")),setTimeout((()=>this.removeFn()),this.delay+300)},this.urlRegex=new RegExp(/^\/\S*\/\S*$/);let s={content:this.content,immediate:!1,showOn:"hover",hoverable:!1};this.options=Object.assign(Object.assign({},s),t),this.element=e,this.element.classList.add("tooltipstered"),this.delay=parseInt(e.dataset.delay)||300;const{immediate:i,showOn:l}=this.options;i?this.renderTooltip():e.addEventListener("click"==l?"click":"mouseover",this.renderTooltip)}renderTooltipDom(){[].slice.call(document.querySelectorAll("body > .tooltip")).map((e=>e.destroy())),this.tooltipEl&&this.tooltipEl.remove();const e=this.options.className||[];this.tooltipEl=function({content:e,className:t=[],closeBtn:s}){if(!e)return;let i=document.createElement("div");return i.innerHTML=`\n\t\t<div class="${["tooltip",...t].map((e=>e)).join(" ")}">\n\t\t\t<div class="tooltip-content">\n\t\t\t\t${e}\n\t\t\t\t${s?'<a href="javascript:;" class="tooltip-close"><i class="fas fa-times"></i></a>':""}\n\t\t\t</div>\n\t\t\t<span data-popper-arrow></span>\n\t\t</div>\n\t`,i.firstElementChild}({content:this.content,className:e}),this.tooltipEl.destroy=this.removeFn.bind(this),this.options.hoverable&&this.tooltipEl.classList.add("hoverable"),document.body.append(this.tooltipEl),this.popper=(0,i.fi)(this.element,this.tooltipEl,{placement:"top",modifiers:[{name:"offset",options:{offset:[0,10]}}]}),document.addEventListener("mousemove",this.onMouseMove)}removeFn(){this.hoveredOnTooltip||(this.tooltipEl.remove(),this.popper&&this.popper.destroy(),document.removeEventListener("mousemove",this.onMouseMove),this.hoveredOnTooltip=!1)}}r.requests=[];class l{init(e,t){new r(e,t)}show(e,t){new r(e,Object.assign({immediate:!0},t))}}},1458:(e,t,s)=>{"use strict";s.r(t),s.d(t,{element_media_image_cropper:()=>o});var i=s(1682),a=s(3129),n=s.n(a),r=s(3130),l=s(365);s(1575);class o extends i.Z{_init(){this.form=this.closest("form"),this.gallery=this.form.closest("div.gallery-modal"),this.image=this.querySelector("img.cropper-image"),this.aspectRatio=parseFloat(this.dataset.aspectRatio),this.boxDataInput=this.querySelector('input[name="cropperBoxData"]'),this.boxData=JSON.parse(this.boxDataInput.value||"{}"),this.canvasDataInput=this.querySelector('input[name="cropperCanvasData"]'),this.canvasData=JSON.parse(this.canvasDataInput.value||"{}"),this.cropDataInput=this.querySelector('input[name="cropperData"]'),this.cropData=JSON.parse(this.cropDataInput.value||"{}"),this.dimentionsText=document.querySelector(".gallery-modal-crop-dimensions"),this.documentId=parseInt(this.parentElement.dataset.pk);const e=this.form.querySelector("a.crop-save"),t=this.form.querySelector("a.crop-cancel");e.addEventListener("click",(()=>{this.setCrop(this.documentId)})),t.addEventListener("click",(()=>{this.gallery.closeModal({key:"Escape"})})),this.initCropper()}setCrop(e,t,s){var i;let a=this.form.querySelector('input[name="cropperCanvasData"]'),n=this.form.querySelector('input[name="cropperBoxData"]'),r=this.form.querySelector('input[name="cropperData"]'),o=this.form.querySelector('input[name="ratio"]'),d={canvas:a.value,box:n.value,crop:r.value,ratio:o.value},c=null===(i=this.gallery)||void 0===i?void 0:i.controllerUrl;c||(c=this.dataset.controllerUrl),new l.C.post(`${c}/set_crop/${e}`,d,{json:!0},(e=>{if(this.gallery){if(t)this.gallery.closeModal({key:"Escape"}),console.log(e);else if(this.gallery.isCrop=!1,this.gallery.classList.remove("gallery-modal-crop"),this.gallery.goToDoc(e.documentId),this.dataset.input){document.querySelector("input[name="+this.dataset.input+"]").closest("div.modal-cont").querySelector("img").src=e.croppedPath,this.gallery.closeModal({key:"Escape"})}s&&s(e)}}))}initCropper(){this.cropper=new(n())(this.image,{crop:(0,r.Z)(this.updateInputs.bind(this),300),viewMode:2,background:!1,aspectRatio:this.aspectRatio,ready:()=>{this.cropData&&this.cropper.setData(this.cropData),this.canvasData&&this.cropper.setCanvasData(this.canvasData),this.boxData&&this.cropper.setCropBoxData(this.boxData)}})}updateInputs(){let e=this.cropper.getCropBoxData(),t=this.cropper.getCanvasData(),s=this.cropper.getData();this.boxDataInput.value=JSON.stringify(e),this.canvasDataInput.value=JSON.stringify(t),this.cropDataInput.value=JSON.stringify(s),this.dimentionsText&&(this.dimentionsText.innerText=`${Math.floor(s.width)} X ${Math.floor(s.height)} PX`)}}customElements.define("element-media-image-cropper",o,{extends:"div"})},3211:(e,t,s)=>{"use strict";s.d(t,{f:()=>i,rH:()=>a,xw:()=>n,EA:()=>r,sV:()=>l});const i=window.params,a=window.role,n=window.web,r=(window.module,window.user||{}),l=!!window.useSocket},2114:(e,t,s)=>{"use strict";s.d(t,{X:()=>d});var i=s(2850);var a=s(4729),n=s(5686),r=s(1682);var l=s(7175);class o{constructor(e){this.highlightClass="cell-highlight",this.trs=e,e.forEach((e=>{const t=e.querySelectorAll("td");e.addEventListener("mousedown",(e=>{if(1!=e.which)return;e.target.classList.toggle(this.highlightClass);if(2===this.items().length)return void this.range();this.tds=t;const s=this.mouseenter.bind(this);t.forEach((e=>{e.addEventListener("mouseenter",s)})),document.addEventListener("mouseup",(()=>{t.forEach((e=>{e.removeEventListener("mouseenter",s)}))}),{once:!0})}))}))}mouseenter(e){e.target.classList.toggle(this.highlightClass)}items(){return this.trs[0].parentElement.querySelectorAll("td.cell-highlight")}range(){let e=this.trs[0].parentElement.querySelectorAll("td.cell-highlight"),t=e[0],s=e[1];t.parentElement.querySelectorAll("td").forEach((e=>{e.cellIndex>=t.cellIndex&&e.cellIndex<=s.cellIndex&&e.classList.add(this.highlightClass)}))}clear(){this.trs[0].parentElement.querySelectorAll("td.cell-highlight").forEach((e=>{e.classList.remove(this.highlightClass)}))}}const d={content:new i.t,clipboard:new class{copy(e){let t=document.createElement("textarea");t.setAttribute("style","visibility:hidden;position:fixed;left:-100%"),t.value=e,document.body.appendChild(t),t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(t)}},url:new a.q,form:new class{validate(e){const t=e.elements,s=t.length;let i=!0;for(let e=0;e<s;e++){const s=t[e];if(!(s instanceof HTMLButtonElement||s instanceof r.Z||s.hasAttribute("disabled")))if(s instanceof n.Z){if(!1===s.required&&!s.value)continue;!1===s._validate()&&(i=!1)}else if(s.hasAttribute("name")&&"function"==typeof s._validate){!1===s._validate()&&(i=!1)}else if(s.hasAttribute("name")&&(s instanceof HTMLInputElement||s instanceof HTMLSelectElement||s instanceof HTMLTextAreaElement)){let e=s.checkValidity(),t=s.closest(".pantera-control"),a=t?t.querySelector("label.is-invalid"):null,n=null;!1===e&&(i=!1,n=s.validationMessage,s.validity.valueMissing&&(n="Šis laukas yra privalomas"),t.classList.add("is-invalid")),a&&(n?(a.classList.remove("d-none"),a.textContent=n):(a.classList.add("d-none"),a.textContent=null))}else;}if(!1===i){let t=e.querySelector(".is-invalid");t.classList.add("is-invalid-first"),t.addEventListener("mouseover",(()=>{t.classList.remove("is-invalid-first")}),{once:!0}),this.scrollTo(t)}return i}serialize(e){let t={};const s=e.elements;let i={};for(let e=0,a=s.length;e<a;e++){const a=s[e],n=a.getAttribute("name");if(!n||a.hasAttribute("disabled"))continue;const r=a.closest("fieldset");r&&r.hasAttribute("disabled")||(a instanceof HTMLInputElement!=!1||a instanceof HTMLSelectElement!=!1||a instanceof HTMLTextAreaElement!=!1?a instanceof HTMLInputElement&&"radio"===a.type&&!1===a.checked||(n.endsWith("[]")?(n in i||(i[n]=0),t[n.replace(new RegExp(/\[\]$/),`[${i[n]++}]`)]=a.value):t[n]=a.value):a.hasAttribute("value")&&(t[n]=a.value))}return t}serializeString(e){const t=this.serialize(e);return Object.keys(t).join("&")}serializeLabels(e){let t={};const s=e.elements;let i={};for(let e=0,a=s.length;e<a;e++){const a=s[e],n=a.getAttribute("name");if(!n||a.hasAttribute("disabled"))continue;const r=a.closest("fieldset");if(r&&r.hasAttribute("disabled"))continue;const l=a.closest(".form-group").querySelector("label");a instanceof HTMLInputElement!=!1||a instanceof HTMLSelectElement!=!1||a instanceof HTMLTextAreaElement!=!1?a instanceof HTMLInputElement&&"radio"===a.type&&!1===a.checked||(n.endsWith("[]")?(n in i||(i[n]=0),t[n.replace(new RegExp(/\[\]$/),`[${i[n]++}]`)]=a.value):t[n]={name:n,value:a.value,label:l.textContent.trim()}):a.hasAttribute("value")&&(t[n]={name:n,value:a.value,label:l.textContent.trim()})}return t}scrollTo(e){const t=e.closest("div.modal");let s;t?s=t:(s=document.getElementById("content-wrap"),s||(s=document.getElementsByTagName("HTML")[0]));let i=e.getBoundingClientRect(),a=s.scrollTop+i.top-35-4*e.clientHeight;$(s).animate({scrollTop:a},1e3),setTimeout((()=>{$(e).fadeOut(200).fadeIn(200)}),1)}},inactivity:new l.K,table:class{constructor(e){let t=document.querySelector(e);this.table=t,this.thead=t.tHead,this.tbody=t.tBodies.item(0),this.tfoot=t.tFoot}selection(){let e=this.tbody.querySelectorAll("tr");return new o(e)}color(e,t=0){let s=this.thead.rows.item(t),i=[...this.tbody.querySelectorAll("tr"),...this.tfoot.querySelectorAll("tr")],a=[...this.tbody.querySelectorAll("td"),...this.tfoot.querySelectorAll("td")];s.querySelectorAll("th");a.forEach((e=>{e.addEventListener("click",(()=>{0!==e.cellIndex?this.highlightCol(i,this.getCellIndex(e)):this.highlightRow(e.closest("tr"))}))}))}highlightCol(e,t){const s="cell-highlight";e.forEach((e=>{let i=t;const a=e.querySelectorAll("td");1!==a.length&&a.forEach((t=>{1!=t.colSpan&&(i-=t.colSpan-1),i===t.cellIndex&&(t.classList.contains(s)&&!e.classList.contains(s)?t.classList.remove(s):t.classList.add(s))}))}))}highlightRow(e){const t="cell-highlight",s=e.querySelectorAll("td");e.classList.toggle(t),s.forEach((e=>{e.classList.toggle(t)}))}getCellIndex(e){let t=e.parentElement.querySelectorAll("td");const s=e.cellIndex;let i=s;return t.forEach((e=>{e.colSpan>1&&e.cellIndex<s&&(i+=e.colSpan-1)})),i}sort(){const e=(e,t,s)=>{let i=e.children[t].innerText||e.children[t].textContent;return i||(!0===s?999:-999)};this.table.querySelectorAll("th[data-index]").forEach((t=>t.addEventListener("click",(()=>{const s=t.closest("table").querySelector("tbody");var i,a;Array.from(s.querySelectorAll("tr")).sort((i=t.dataset.index,a=this.asc=!this.asc,(t,s)=>{return n=e(a?t:s,i,a),r=e(a?s:t,i,a),""===n||""===r||isNaN(n)||isNaN(r)?n.toString().localeCompare(r):n-r;var n,r})).forEach((e=>s.appendChild(e)))}))))}},script:new class{constructor(){return this.scripts={},this}register(e,t){void 0===this.scripts[e]&&(this.scripts[e]=t)}call(e,...t){new(0,this.scripts[e])(t)}destroy(){this.scripts={}}}};window.xhelper=d},2850:(e,t,s)=>{"use strict";s.d(t,{t:()=>o});var i=s(365),a=s(6611),n=s(3136),r=s(6435),l=s(3211);class o{load(e,{target:t,callback:s,updateurl:r,webload:o,post:d}={updateurl:!0,webload:!1}){if("web"===l.f.url&&!1===o)return void(window.location.href=e);t=t||document.querySelector("#content")||document.body;let c=e||window.location.href.replace(window.location.origin,""),h=(e,i)=>{"modal"!==i&&(!0===r&&(window.history.pushState({},"",c),l.xw.lineage=c),this.replace(t,e),s&&s(),(0,a.S)(),n.R.stop())};void 0!==d&&Object.keys(d).length>0?new i.C.post(c,d,{json:!1},h):new i.C.get(c,null,{json:!1},h)}title(e){}reload(e=!1){!0!==e?new i.C.get(window.location.pathname,null,{json:!1},(e=>{let t=document.querySelector("#content")||document.body;this.replace(t,e),n.R.stop(),r.q.modal.close()})):window.location.reload()}update(e,{targetId:t,callback:s,updateurl:l,state:o,collapseOnUpdate:d}={updateurl:!0}){let c=[];"string"==typeof t?c.push(t):c=t;const h=c.map((e=>{const t=document.getElementById(e);if(t)return t}));new i.C.get(e,null,{json:!1},(t=>{!0===l&&window.history.pushState({},"",e);let i=document.createRange().createContextualFragment(t);h.map((e=>{try{let t;if(d){t=`${e.getBoundingClientRect().height}px`}const s=i.getElementById(e.id);d&&(s.style.height=t,s.classList.add("collapsing")),e.outerHTML=s.outerHTML}catch(e){console.warn("tikriausiai nerastas elementas pagal id",e)}})),d&&setTimeout((()=>{c.map((e=>{const t=document.getElementById(e);t.style.height=`${[...t.children].reduce(((e,t)=>e+t.offsetHeight),0)}px`,setTimeout((()=>t.classList.remove("collapsing")),200)}))}),100),s?s():r.q.modal.close(),(0,a.S)(),n.R.stop()}))}replace(e,t){let s=document.createRange().createContextualFragment(t);e.innerHTML="",e.append(s),(0,a.S)()}}},9009:(e,t,s)=>{"use strict";s.d(t,{j:()=>n,z:()=>r});var i=s(3681),a=s.n(i);class n{constructor(e){if(e)"string"==typeof e?this.value=e:(this.y=e.year,this.m=e.month,this.d=new Date(this.y,this.m-1,0).getDate());else{const e=new Date;this.y=e.getFullYear(),this.m=e.getMonth(),this.d=e.getDate()}}set month(e){0===e?(this.y--,this.m=12,this.d=31):13===e?(this.y++,this.m=1,this.d=31):(this.m=e,this.d=new Date(this.y,this.m,0).getDate())}get month(){return this.m}set year(e){this.y=e}get year(){return this.y}get day(){return this.d}get prev(){let e=this.m-1;return 0===e?{year:this.y-1,month:12,days:31}:{year:this.y,month:e,days:new Date(this.y,e,0).getDate()}}get current(){return{year:this.y,month:this.m,days:new Date(this.y,this.m,0).getDate()}}get next(){let e=this.m+1;return 13===e?{year:this.y+1,month:1,days:31}:{year:this.y,month:e,days:new Date(this.y,e,0).getDate()}}get firstday(){const e=new Date(this.y,this.m-1,1).getDay();return 0===e?7:e}get dayFirst(){const e=this.m.toString();return this.y.toString()+"-"+(1==e.length?"0"+e:e)+"-01"}get dayLast(){const e=this.m.toString();return this.y.toString()+"-"+(1==e.length?"0"+e:e)+"-"+this.d.toString()}get weekday(){return this.w}set weekday(e){this.w=8===e?1:0===e?7:e}get calendar(){let e=[],t=this.current,s=this.prev,i=this.next,a=this.firstday-1,n=42-t.days-a;for(;a>0;)e.unshift({y:s.year,m:s.month,d:s.days,v:s.year.toString()+"-"+(1==s.month.toString().length?"0"+s.month:s.month)+"-"+(1==s.days.toString().length?"0"+s.days:s.days),w:a,a:!1}),s.days--,a--;this.weekday=this.firstday;let r=1;for(;r<=t.days;)e.push({y:t.year,m:t.month,d:r,v:t.year.toString()+"-"+(1==t.month.toString().length?"0"+t.month:t.month)+"-"+(1==r.toString().length?"0"+r:r),w:this.weekday,a:!0}),r++,this.weekday++;for(r=1;r<=n;)e.push({y:i.year,m:i.month,d:r,v:i.year.toString()+"-"+(1==i.month.toString().length?"0"+i.month:i.month)+"-"+(1==r.toString().length?"0"+r:r),w:this.weekday,a:!1}),r++,this.weekday++;return e}get yearMonth(){return this.year.toString()+"-"+(this.month<10?"0":"")+this.month.toString()}set value(e){const t=new Date;let s=e.split("-");this.year=parseInt(s[0])||t.getFullYear(),this.month=parseInt(s[1])||t.getMonth()}}class r{constructor(e,t){if(this.dateStart=a()(e),this.dateEnd=a()(t),this.dateEnd.isBefore(this.dateStart))throw"Nevalidus datu range";this.months=this.getMonthsInRange()}set start(e){this.dateStart=a()(e)}get start(){return this.dateStart.format("YYYY-MM-DD")}set end(e){this.dateEnd=a()(e)}get end(){return this.dateEnd.format("YYYY-MM-DD")}getMonthsInRange(){let e=[],t=this.dateStart.clone();for(;t.isBefore(this.dateEnd)||t.isSame(this.dateEnd);)e.push(t.format("YYYY-MM-01")),t.add(1,"month");return e}createCalendar(){let e=[];return this.months.forEach((t=>{let s=a()(t);e.push(new n({year:s.year(),month:s.month()+1}))})),e}}},5156:(e,t,s)=>{"use strict";s.d(t,{_:()=>n});var i=s(2114),a=s(3211);const n={formatThousands:e=>e?e.toString().replace(/(^|[^\w.])(\d{4,})/g,(function(e,t,s){return`${t}${s.replace(/\d(?=(?:\d\d\d)+(?!\d))/g,"$& ")}`})):null,download:(e,t)=>{let s=$('<form target="_blank" method="POST" />').attr({action:e}).appendTo(document.body);for(let e in t)Object.prototype.hasOwnProperty.call(t,e)&&$('<input type="hidden" />').attr({name:e,value:t[e]}).appendTo(s);s.trigger("submit"),s.remove()},updateNavigation:e=>{if(!e)return;const[t,s]=e.split("-");if(!t||!s)return;const n=document.querySelector("div.sidebar");document.querySelector("div.top").querySelectorAll("a.nav-link").forEach((e=>{e.classList.toggle("active",e.getAttribute("href")==t)}));const r=()=>{let e=!1;return n.querySelectorAll("a.nav-link").forEach((t=>{let i=t.getAttribute("href")==s;i&&(e=!0),t.classList.toggle("active",i)})),e};r()||i.X.content.load(`${a.xw.zone}/helper/sidebar_nav?group=${t}`,{target:n.querySelector(".sidebar-pills-wrap"),updateurl:!1,callback:()=>{r()}})}}},7175:(e,t,s)=>{"use strict";s.d(t,{K:()=>o});var i=s(6455),a=s.n(i),n=s(3681),r=s.n(n),l=s(3211);class o{constructor(){this.localStorageKey=null,this.logoutTime=null,this.timerHandle=null,this.logoutUrl=null,this.localStorage=null,this.lastResetTimeStamp=null,this.checkEvery=1e3,this.localStorageKey="local_storage_inactivity_"+l.xw.zone,this.localStorage=localStorage}start(e){this.logoutTime=r().duration(e.logoutTime).asMilliseconds(),this.logoutUrl=l.xw.zone+"/login/logout?zone="+l.xw.zone,document.addEventListener("click",this,!1),document.addEventListener("keypress",this,!1),window.addEventListener("load",this,!1),window.addEventListener("storage",(function(e){if("inactivity_Swalmessage"==e.key){1==JSON.parse(e.newValue)?a().clickConfirm():a().clickCancel()}})),this._start()}_start(){this.setLastResetTimeStamp((new Date).getTime()),this.timerHandle=window.setInterval((()=>{this.checkTime()}),this.checkEvery)}stop(){window.clearInterval(this.timerHandle)}checkTime(){let e=(new Date).getTime()-this.getLastResetTimeStamp();this.resetTimer(),e>=this.logoutTime&&this.timeout()}setLastResetTimeStamp(e){this.localStorage.setItem(this.localStorageKey,e.toString())}getLastResetTimeStamp(){let e,t;return t=this.localStorage.getItem(this.localStorageKey),e=parseInt(t,10),e}resetTimer(){this.stop(),this.timerHandle=window.setInterval((()=>{this.checkTime()}),this.checkEvery)}cleanup(){document.removeEventListener("click",this,!1),document.removeEventListener("keypress",this,!1),window.removeEventListener("load",this,!1),this.stop(),this.localStorage.removeItem(this.localStorageKey)}handleEvent(){let e=(new Date).getTime();this.setLastResetTimeStamp(e)}timeout(){let e,t=this,s={icon:"question",title:"Sesijos laikas pasibaigė",html:'Ar norite pratęsti?<br><strong id="swal-timer">1:00</strong>',heightAuto:!1,showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Taip",cancelButtonText:"Ne",timer:6e4,allowOutsideClick:!1,onBeforeOpen:()=>{e=setInterval((()=>{a().getContent().querySelector("#swal-timer").textContent=(a().getTimerLeft()/1e3).toFixed(0)}),1e3)},onClose:()=>{clearInterval(e)}};t.stop(),a().fire(s).then((e=>{!0===e.value?(t.resetTimer(),this.localStorage.setItem("inactivity_Swalmessage","1"),this.localStorage.removeItem("inactivity_Swalmessage")):(t.cleanup(),this.localStorage.setItem("inactivity_Swalmessage","0"),this.localStorage.removeItem("inactivity_Swalmessage"),window.location.href=t.logoutUrl)}))}}},4729:(e,t,s)=>{"use strict";s.d(t,{q:()=>n});var i=s(7563),a=s(2114);class n{constructor(){this.params=new r(this)}open(e){window.location.href=e}set(e){window.history.replaceState({url:document.location.href},document.title,document.location.href),window.history.pushState({url:e},document.title,e)}get(){return console.dir(window.location),window.location}formatQueryString(e,t=!0){let s=new URLSearchParams(location.search);if(!1===t){let t=location.search.substr(1)||void 0;void 0===t&&(t="");let i={};t.split("&").forEach((function(e){let t=e.split("="),s=t[0],a=decodeURIComponent(t[1]);try{i[s]=JSON.parse(a)}catch(e){i[s]=a}})),Object.keys(i).forEach((t=>{t in e||s.delete(t)}))}for(var i of s.entries())e[i[0]]||s.delete(i[0]);return Object.keys(e).forEach((t=>{s.set(t,e[t])})),s.toString()}urlParams(e,t){const s=this.formatQueryString(e,t);window.history.replaceState({},"",`${location.pathname}?${s}`)}update(e,t,s=!1){let n=-1!==e.indexOf("[]");!0===n&&(e=e.replace("[]",""));let r=location.search.substr(1)||"",l=i.parse(r,{arrayFormat:"bracket"});if(Array.isArray(l[e])){let s=l[e].indexOf(t);-1!==s?l[e].splice(s,1):l[e].push(t)}else!0===n?(l[e]=[],l[e].push(t)):l[e]&&!s?delete l[e]:l[e]=t;let o=i.stringify(l,{arrayFormat:"bracket"}),d=decodeURIComponent(`${location.pathname}?${o}`);window.history.replaceState({},"",d),a.X.content.load(d)}}class r{constructor(e){this.url=e}}},7348:(e,t,s)=>{"use strict";s.r(t),s.d(t,{custom:()=>m.P,plugins:()=>g,run:()=>v,utils:()=>h,xhelper:()=>u.X});var i=s(6611),a=s(3999);const n="xTimer_jobs";class r{constructor(e){this.localStorage_key=n,this.job=e,null==this.job.elapsed_time&&this.init(),setInterval((()=>{this.recalculate.bind(this)}),1e3)}init(){this.job.isPaused=!1,this.job.started_time=new Date,this.job.paused_time=0,this.job.elapsed_time=0}toNode(){let e=document.createElement("div"),t=new Date(0);t.setSeconds(this.job.elapsed_time);let s=t.toISOString().substr(14,5),i=`\n            <div class="row ${r.classDeclarations.main}">\n                <div class="col-lg ${r.classDeclarations.header.class}">\n                    <div ${r.classDeclarations.header.title}>\n                        <h2>${this.job.title}</h2>\n                    </div>\n                    <div ${r.classDeclarations.header.subtitle}>\n                        <h4>${this.job.subtitle}</h4>\n                    </div>\n                </div>\n                <div class="col-lg ${r.classDeclarations.actions.class}">\n                    <div class="${r.classDeclarations.actions.play.class}">\n                        <a href="javascript:;" class="${r.classDeclarations.actions.play.btn}">\n                            <i class="${r.classDeclarations.actions.play.icon}"></i>\n                        </a>\n                    </div>\n                    <div class="${r.classDeclarations.actions.pause.class}">\n                        <a href="javascript:;" class="${r.classDeclarations.actions.pause.btn}">\n                            <i class="${r.classDeclarations.actions.pause.icon}"></i>\n                        </a>\n                    </div>\n                    <div class="${r.classDeclarations.actions.save.class}">\n                        <a href="javascript:;" class="${r.classDeclarations.actions.save.btn}">\n                            <i class="${r.classDeclarations.actions.save.icon}"></i>\n                        </a>\n                    </div>\n                    <div class="${r.classDeclarations.actions.delete.class}">\n                        <a href="javascript:;" class="${r.classDeclarations.actions.delete.btn}">\n                            <i class="${r.classDeclarations.actions.delete.icon}"></i>\n                        </a>\n                    </div>\n                </div>\n                <div class="col-lg ${r.classDeclarations.clock}">\n                    <div>\n                        ${s}\n                    </div>\n                </div>\n            </div>\n        `;return e.classList.add(r.classDeclarations.wrapper),e.innerHTML=i,this.job.job_div=e,e}serialize(e){return this.job.job_id=e.length+1,JSON.parse(JSON.stringify(this.job))}recalculate(){let e=a.W.getobj(this.localStorage_key),t=this;this.job.isPaused?this.job.paused_time++:this.job.elapsed_time++,e.forEach((e=>{e.job_id==t.job.job_id&&(e.paused_time=t.job.paused_time,e.elapsed_time=t.job.elapsed_time)})),a.W.setobj(this.localStorage_key,e);let s=new Date(0);s.setSeconds(this.job.elapsed_time);let i=s.toISOString().substr(14,5);$(this.job.job_div).find("div.xtimer-jobs-job-clock").text(i)}attach_event_listeners(){let e=this;$(this.job.job_div).find("a.btn.btn-outline-danger.btn-sm").on("click",(function(){e.handler_delete(),$(e.job.job_div).remove()})),$(this.job.job_div).find("a.btn.btn-outline-success.btn-sm").on("click",this.handler_save.bind(this)),$(this.job.job_div).find("a.btn.btn-outline-warning.btn-sm").on("click",this.handler_pause.bind(this)),$(this.job.job_div).find("a.btn.btn-outline-primary.btn-sm").on("click",this.handler_play.bind(this))}handler_play(){this.job.isPaused&&(this.job.isPaused=!1)}handler_pause(){this.job.isPaused||(this.job.isPaused=!0)}handler_save(){}handler_delete(){let e=a.W.getobj(this.localStorage_key),t=this;e.forEach(((s,i)=>{s.job_id==t.job.job_id&&e.splice(i,1)})),0==e.length&&$("div.xtimer-header.card-header").hide(),a.W.setobj(this.localStorage_key,e)}}r.classDeclarations={wrapper:"xtimer-jobs-job-wrapper",main:"xtimer-jobs-job",header:{class:"xtimer-jobs-job-header",title:"xtimer-jobs-job-title",subtitle:"xtimer-jobs-job-subtitle"},actions:{class:"xtimer-jobs-job-actions",action:"xtimer-jobs-job-actions-action",play:{class:"xtimer-jobs-job-actions-action-play",btn:"btn btn-outline-primary btn-sm",icon:"fas fa-play"},pause:{class:"xtimer-jobs-job-actions-action-pause",btn:"btn btn-outline-warning btn-sm",icon:"fas fa-pause"},save:{class:"xtimer-jobs-job-actions-action-save",btn:"btn btn-outline-success btn-sm",icon:"fas fa-share-square"},delete:{class:"xtimer-jobs-job-actions-action-delete",btn:"btn btn-outline-danger btn-sm",icon:"fas fa-window-close"}},clock:"xtimer-jobs-job-clock"};class l{constructor(e){this.localStorage_key=n,this.xTimer=e,this.jobs=this.get_jobs(),0==this.jobs.length?$(this.xTimer.structure.header).hide():$(this.xTimer.structure.header).show(),this.render_jobs()}new_job(e){0==this.jobs.length&&$(this.xTimer.structure.header).show();let t=new r(e),s=t.toNode();this.xTimer.structure.container.appendChild(s),this.jobs.push(t.serialize(this.jobs)),t.attach_event_listeners(),this.save_jobs()}render_jobs(){$(".xtimer-jobs-job-wrapper").remove();let e=this;this.jobs.forEach((t=>{let s=new r(t),i=s.toNode();e.xTimer.structure.container.appendChild(i),s.attach_event_listeners()}))}rerender_jobs(){}get_jobs(){let e=a.W.getobj(this.localStorage_key);return void 0===e||void 0===e.length?[]:e}save_jobs(){a.W.setobj(this.localStorage_key,this.jobs)}listen_localStorage(){document.addEventListener("storage",(()=>{console.log("labas")}))}}class o{constructor(){let e=this.detect_xtimer();return null!==e?this.structure=e:this.render(),this.jobs=new l(this),this}detect_xtimer(){let e=document.querySelector(`div.xtimer.${o.classDeclarations.main}`);if(null===e)return null;let t=e.querySelector(`div.${o.classDeclarations.header}`),s=e.querySelector(`div.${o.classDeclarations.container}`);return void 0===t&&console.warn(`xtimer: Nerandu div.${o.classDeclarations.header}`),void 0===s&&console.warn(`xtimer: Nerandu div.${o.classDeclarations.container}`),{main:e,header:t,container:s}}render(){let e=document.createElement("div"),t=`\n            <div class="xtimer ${o.classDeclarations.main} card">\n                <div class="${o.classDeclarations.header} card-header">\n                    <i class="${o.classDeclarations.header_icon}"></i>\n                </div>\n                <div class="${o.classDeclarations.container}"></div>\n            </div>\n        `;e.classList.add("position-fixed"),e.style.bottom="2rem",e.style.right="2rem",e.style.zIndex="1050",e.innerHTML=t,document.body.appendChild(e),this.structure=this.detect_xtimer()}}o.classDeclarations={main:"xtimer-main ",header:"xtimer-header",header_icon:"fas fa-clock fa-3x",container:"xtimer-timers-container"};class d{constructor(e,t){this.container=e,this.dom=null,this.shown=!1,this.root=!0,this.parent=null,this.submenus=[],this.items=t}onclick(e){let t=e.target;!this.dom||t==this.dom||t.parentElement==this.dom||t.classList.contains("item")||t.parentElement.classList.contains("item")||this.hideAll()}oncontextmenu(e){e.preventDefault(),this.hideAll(),this.show(e.clientX,e.clientY)}oncontextmenu_keydown(e){e.preventDefault(),this.hideAll(),this.show(e.clientX,e.clientY)}onblur(){this.hideAll()}getMenuDom(){const e=document.createElement("div");e.classList.add("context");for(const t of this.items)e.appendChild(this.itemToDomEl(t));return e}itemToDomEl(e){const t=document.createElement("div");if(null===e)return t.classList.add("separator"),t;if(e.color){const s=e.color.toString().toUpperCase();/^#?([0-9A-F]{3}){1,2}$/i.test(s)&&(t.style.cssText=`color: ${e.color}`)}t.classList.add("item");const s=document.createElement("span");s.classList.add("label"),s.innerText=e.text?e.text.toString():"",t.appendChild(s),e.disabled?t.classList.add("disabled"):t.classList.add("enabled");const i=document.createElement("span");if(i.classList.add("text-right"),i.innerText=e.text_right?e.text_right.toString():"",t.appendChild(i),e.subitems&&Array.isArray(e.subitems)&&e.subitems.length>0){const s=new d(this.container,e.subitems);s.root=!1,s.parent=this;const i=()=>{if(1==e.disabled)return;this.hideSubMenus();const i=this.dom.offsetLeft+this.dom.clientWidth+t.offsetLeft,a=this.dom.offsetTop+t.offsetTop;s.shown?s.hide():s.show(i,a)};this.submenus.push(s),t.classList.add("has-subitems"),t.addEventListener("click",i),t.addEventListener("mousemove",i)}else if(e.submenu&&e.submenu instanceof d){const s=e.submenu;s.root=!1,s.parent=this;const i=()=>{if(1==e.disabled)return;this.hideSubMenus();const i=this.dom.offsetLeft+this.dom.clientWidth+t.offsetLeft,a=this.dom.offsetTop+t.offsetTop;s.shown?s.hide():s.show(i,a)};this.submenus.push(s),t.classList.add("has-subitems"),t.addEventListener("click",i),t.addEventListener("mousemove",i)}else t.addEventListener("click",(()=>{if(this.hideSubMenus(),!t.classList.contains("disabled"))if(e.onclick&&"function"==typeof e.onclick){const a={handled:!1,item:t,label:s,text_right:i,items:this.items,data:e};e.onclick(a),a.handled||this.hide()}else this.hide()})),t.addEventListener("mousemove",(()=>{this.hideSubMenus()}));return t}hideAll(){return this.root&&!this.parent?(this.shown&&(this.hideSubMenus(),this.shown=!1,this.container.removeChild(this.dom),this.parent&&this.parent.shown&&this.parent.hide()),this):(this.parent.hide(),this)}hide(){return this.dom&&this.shown&&(this.shown=!1,this.hideSubMenus(),this.container.removeChild(this.dom),this.parent&&this.parent.shown&&this.parent.hide()),this}hideSubMenus(){for(const e of this.submenus)e.shown&&(e.shown=!1,e.container.removeChild(e.dom)),e.hideSubMenus();return this}show(e,t){return this.dom=this.getMenuDom(),this.dom.style.left=`${e}px`,this.dom.style.top=`${t}px`,this.shown=!0,this.container.appendChild(this.dom),this}install(){return this.container.addEventListener("contextmenu",this.oncontextmenu.bind(this)),this.container.addEventListener("keydown",this.oncontextmenu_keydown.bind(this)),this.container.addEventListener("click",this.onclick.bind(this)),window.addEventListener("blur",this.onblur.bind(this)),this}uninstall(){return this.dom=null,this.container.removeEventListener("contextmenu",this.oncontextmenu.bind(this)),this.container.removeEventListener("keydown",this.oncontextmenu_keydown.bind(this)),this.container.removeEventListener("click",this.onclick.bind(this)),window.removeEventListener("blur",this.onblur.bind(this)),this}}class c extends HTMLDivElement{connectedCallback(){const e=this.parentElement.closest("[is]");if(!e)return;const t=new Event("pantera:rendered");e.dispatchEvent(t)}}customElements.define("dom-indicator",c,{extends:"div"});let h={xTimer:o,xScript:new class{constructor(){this.cache={},this.doc_head=document.querySelector("head")}load(e){return e instanceof Array?Promise.all(e.map(this.exec.bind(this))):this.exec(e)}exec(e){let t=e.id||e.url,s=this.cache[t];if(null!==s)return s;if(!1!==e.allowExternal){let s=this.getScriptById(e.id)||this.getScriptByUrl(e.url);if(s){let e=Promise.resolve(s);return t&&(this.cache[t]=e),e}}if(null===e.url)throw new Error("xscript: NEPATEIKTAS SCRIPTO URL");let i=this.loadScript(e);return t&&!1!==e.cache&&(this.cache[t]=i),i}getScriptById(e){let t=e&&document.getElementById(e);if(t&&"xscript"!==t.xscript)return t}getScriptByUrl(e){let t=e&&document.querySelector("script[src='"+e+"']");if(t&&"xscript"!==t.xscript)return t}loadScript(e){return new Promise((function(t,s){let i=document.createElement("script");i.src=e.url,i.charset=e.charset||"utf-8",i.type=e.type||"text/javascript",i.async=!!e.async,i.id=e.id||e.url,i.xscript="xscript";let a=!1;i.onload=i.onreadystatechange=function(){a||i.readyState&&"loaded"!==i.readyState&&"complete"!==i.readyState||(a=!0,i.onload=i.onreadystatechange=null,t(i))},i.onerror=s,this.head.appendChild(e)}))}},ContextMenu:d,"dom-indicator":c};var u=s(2114),m=s(4180);let p=!1;function v(){(0,i.S)()}const g={tinymce:()=>Promise.all([s.e(84),s.e(618)]).then(s.bind(s,5633)).then((({textarea_pro:e})=>{new e})),google_address:()=>s.e(148).then(s.bind(s,669)),fckeditor:()=>s.e(8).then(s.bind(s,1153)),analytics:()=>Promise.all([s.e(990),s.e(479)]).then(s.bind(s,4519)).then((e=>{e.default()})),fckeditor_simple:()=>{if(!0===p)return;p=!0;let e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href="/dist/external/ckeditor.css",e.media="all",document.head.append(e);let t=document.createElement("script");t.type="text/javascript",t.src="/dist/external/ckeditor.js",document.head.append(t)},charts:()=>Promise.all([s.e(927),s.e(61)]).then(s.bind(s,8068)),calendar:()=>Promise.all([s.e(5),s.e(741)]).then(s.bind(s,3673)).then((({plugin_calendar:e})=>{console.dir("calendorius");let t=document.querySelector("div.xcalendar:not(.xlistener)");t&&(t.classList.add("xlistener"),new e(t))})),cropper:()=>Promise.resolve().then(s.bind(s,1458)),socket:()=>Promise.all([s.e(615),s.e(395)]).then(s.bind(s,778)),element_chat_fullscreen:()=>s.e(363).then(s.bind(s,9141)),element_web_chat_live:()=>s.e(725).then(s.bind(s,4459)),element_dropdown_notify:()=>s.e(725).then(s.bind(s,7716)),calendar_schedule_clean:()=>s.e(26).then(s.bind(s,259)).then((({calendar_schedule_clean:e})=>{new e})),calendar_schedule_bpc:()=>s.e(431).then(s.bind(s,3043)).then((({calendar_schedule_bpc:e})=>{new e})),calendar_schedule:()=>s.e(138).then(s.bind(s,3975)).then((({calendar_schedule:e})=>{new e})),element_diagram_structure:()=>Promise.all([s.e(575),s.e(616),s.e(715)]).then(s.bind(s,1707)).then((({element_diagram_structure:e})=>{new e})),element_diagram_structure_view:()=>Promise.all([s.e(575),s.e(852)]).then(s.bind(s,175)).then((({element_diagram_structure_view:e})=>{new e}))}},6611:(e,t,s)=>{"use strict";s.d(t,{S:()=>Qi});var i=s(6435),a=s(365);class n{constructor(e){this.onMousedown=e=>{let t=this.buildSpan("circle");const{clientX:s,clientY:i}=e,{x:a,y:n}=this.button.getBoundingClientRect(),r=s-a,l=i-n;t.style.top=`${l}px`,t.style.left=`${r}px`,this.circle=t,this.container.append(this.circle),document.addEventListener("mouseup",this.onMouseup)},this.onMouseup=()=>{let e=this.circle;setTimeout((()=>{this.button.blur(),e.remove()}),300)},this.button=e,this.container=this.buildSpan("container"),this.button.appendChild(this.container),this.button.addEventListener("mousedown",this.onMousedown)}buildSpan(e){let t=document.createElement("span");return t.classList.add(`btn-ripple-${e}`),t}}class r extends HTMLButtonElement{constructor(){super(),this.isLoading=!1}connectedCallback(){setTimeout((()=>{this.classList.contains("xlistener")||(this.classList.add("xlistener"),this.classList.contains("btn-ripple")&&new n(this),this._init())}))}get loading(){return this.isLoading}set loading(e){this.isLoading=e;let t=this.querySelector(".btn-loader");if(e)if(e&&!t){let e=document.createElement("span");e.classList.add("btn-loader"),e.innerHTML='<span class="loader"></span>',this.append(e),this.classList.add("btn-loading")}else t&&(t.remove(),this.classList.add("btn-loading"));else t&&(t.remove(),this.classList.remove("btn-loading"))}}const l=new class{add(e,t,s){e.classList.add("xevent-"+t),e.addEventListener(t,s)}check(e,t){return e.classList.contains("xevent-"+t)}dispatch(e,t,s){let i=new CustomEvent(t,{bubbles:!0,detail:s});e.dispatchEvent(i)}};class o extends r{constructor(){super()}_init(){this.submitUrl=this.dataset.submitUrl,this.dataset.tooltip&&i.q.tooltip.init(this),this.dataset.callback&&"function"==typeof window[this.dataset.callback]&&(this.callback=window[this.dataset.callback]),this.initAppend(),this.clickListener()}append(){const e=this.appendableConfig;if(-1!=e.max&&e.count>=e.max)return;const t=l.check(this,"append");let s={};!0===e.count_needed&&(s.children_length=e.el.children.length,s.count=e.count),new a.C.get(this.dataset.appendUrl,s,{json:!1},(s=>{if(e.indexReplaceRegExp){let t=e.indexReplaceRegExp,i=new RegExp(t,"g");s=s.replace(i,e.index),e.index++}if(e.clear&&(e.el.innerHTML=""),window.HTMLTemplateElement){let t=document.createElement("template");t.innerHTML=s;let i=t.content.firstElementChild;e.delete_button&&this.add_delete_button(i),e.el.append(i)}else $(e.el).append(s);Qi(),e.count++,t&&l.dispatch(this,"append",null)}))}add_delete_button(e){if(void 0===e)return;let t=document.createElement("template");t.innerHTML='<div class="appendable-remove-wrap"><a href="javascript:;" title="Pašalinti" class="appendable-remove"><i class="fa fa-times"></i></a></div>';let s=t.content.firstElementChild;s.querySelector(".appendable-remove").addEventListener("click",(function(t){i.q.question.show({title:"Patvirtinimas",text:"Ar tikrai norite pašalinti įrašą?"},(function(t){if(!t)return!1;e.remove()}))})),e.prepend(s)}initAppend(){var e;let t={enabled:!!this.dataset.appendUrl&&!!this.dataset.appendEl,el:null,url:this.dataset.appendUrl,max:-1,count:0,count_needed:!!this.dataset.appendCountneeded,delete_button:!!this.dataset.appendDeleteable,clear:!!this.dataset.appendClear,removeIndex:null!==(e=this.dataset.appendRemoveindex)&&void 0!==e?e:1,index:0,indexReplaceRegExp:this.dataset.replaceRegexp};if(this.appendableConfig=t,t.enabled){if(t.el=document.querySelector(this.dataset.appendEl),!t.el)throw new Error("Undefined element passed to xaction append (appendEl attribute)");if(t.clear||void 0===this.dataset.appendMax?t.max=-1:t.max=Number(this.dataset.appendMax)||1,t.delete_button){let e=t.el.children;for(let s=t.removeIndex;s<e.length;s++){let t=e[s];this.add_delete_button(t)}}}}clickListener(){let e=JSON.parse(this.dataset.question||"{}"),t={_type:"xaction"};this.dataset.param&&(t._param=this.dataset.param);let s=()=>{let e={table:this.dataset.reloadTable,content:!!this.dataset.reloadContent},s={};try{this.dataset.post&&(s=JSON.parse(this.dataset.post))}catch(e){console.error(e)}const i=this.callback||null;new a.C.post(this.submitUrl,Object.assign(Object.assign({},t),s),{json:!0,url:this.dataset.url,reload:e},i)};this.addEventListener("click",(()=>{this.appendableConfig.enabled?this.append():0!==Object.keys(e).length?i.q.question.show(e,(e=>{!1!==e&&s()})):s()}))}}customElements.define("button-action",o,{extends:"button"});var d=s(2114);class c{constructor(e){this.errorClass="is-invalid",this.validClass="is-valid",this.messages={required:"Šis laukas yra privalomas"},this.form=e}validate(){return d.X.form.validate(this.form)}}var h=s(3136),u=function(e,t,s,i){return new(s||(s=Promise))((function(a,n){function r(e){try{o(i.next(e))}catch(e){n(e)}}function l(e){try{o(i.throw(e))}catch(e){n(e)}}function o(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,l)}o((i=i.apply(e,t||[])).next())}))};class m extends r{constructor(){super()}connectedCallback(){super.connectedCallback(),this.form&&(this.form.classList.add("xform"),this.form.setAttribute("novalidate","")),this.validation=new c(this.form)}set callback(e){this._callback=this.getFunction(e)}_init(){this.addEventListener("click",(e=>{if(e.preventDefault(),this.disabled=!0,!1===this.validation.validate())return this.disabled=!1,!1;const t=this.getFunction(this.dataset.recaptcha);t&&this.form?this.recaptcha(t).then((()=>{this.initEventsAndSubmit()})):this.initEventsAndSubmit()}))}initEventsAndSubmit(){const e=JSON.parse(this.dataset.question||"{}"),t=this.getFunction(this.dataset.beforeSubmit);if(0!==Object.keys(e).length)i.q.question.show(e,(e=>{!1!==e?t&&!1===t()||this.submit():this.disabled=!1}));else{if(t&&!1===t())return;this.submit()}}submit(){this.dataset.callback&&(this._callback=this.getFunction(this.dataset.callback));const e=l.check(this.form,"submitcomplete");h.R.start();let t=d.X.form.serialize(this.form),s={json:!0,url:this.dataset.url,submitBtn:this,reload:{table:this.dataset.reloadTable}};this.dataset.param&&(t._param=this.dataset.param),this._callback||e?new a.C.post(this.dataset.submitUrl,t,s,(t=>{this._callback&&this._callback(t),e&&l.dispatch(this.form,"submitcomplete",t),this.disabled=!1})):new a.C.post(this.dataset.submitUrl,t,s,null)}getFunction(e){if(null==e)return null;if("string"==typeof e){if("function"==typeof window[e])return window[e];throw i.q.error.show({text:"button:data-callback callback is not a function "+e,title:"title",developerOnly:!0}),new Error("callback is not a function")}return e}dialog(e){"object"==typeof e.msg?i.q.notify.show(e.msg,(()=>{this._callback(e),h.R.stop()})):e.msg?i.q.toast.show({message:e.msg,position:"top-right",type:"success"},(()=>{this._callback(e),h.R.stop()})):!1!==e.msg?i.q.toast.show({message:"Išsaugota",position:"top-right",type:"success"},(()=>{this._callback(e),h.R.stop()})):this._callback(e)}recaptcha(e){return u(this,void 0,void 0,(function*(){return yield e(this.form)}))}}customElements.define("button-submit",m,{extends:"button"});class p extends r{constructor(){super()}_init(){let e="true"===this.dataset.contentload;null!==this.form?(this.form.classList.add("xform"),this.addEventListener("click",(t=>{if(t.preventDefault(),e){let e=this.serialize(this.form);if(null!=this.dataset.cparams){let t=JSON.parse(this.dataset.cparams);for(let s=0;s<Object.keys(t).length;s++){let i=Object.keys(t)[s],a=t[i];e[i]=a}}let t=this.dataset.get?JSON.parse(this.dataset.get):{};d.X.url.urlParams(e,!0),new a.C.get(window.location.href,t,{json:!1},(function(e){let t=document.querySelector("#content")||document.body,s=document.createRange().createContextualFragment(e);t.innerHTML="",t.append(s)}))}else this.form.submit()}))):console.error("randamas mygtukas, kuris yra ne formoje",el)}serialize(e){let t={};for(let s=0;s<e.elements.length;s++){let i=e.elements[s];if(i.name&&!i.disabled&&"file"!==i.type&&"reset"!==i.type&&"submit"!==i.type&&"button"!==i.type)if("select-multiple"===i.type)for(let e=0;e<i.options.length;e++)i.options[e].selected&&(t[i.name]=i.options[e].value);else("checkbox"!==i.type&&"radio"!==i.type||i.checked)&&(t[i.name]=i.value)}return this.dataset.param&&(t._param=this.dataset.param),t}}customElements.define("button-xsearch",p,{extends:"button"});class v extends r{constructor(){super()}_init(){"javascript:;"!==this.dataset.url&&this.addEventListener("click",(e=>{e.preventDefault(),this.disabled=!0;const t=JSON.parse(this.dataset.question||"{}");0!==Object.keys(t).length?i.q.question.show(t,(e=>{!1!==e?this.submit():this.disabled=!1})):this.submit()}))}submit(){const e=this.getFunction(this.dataset.callback);let t={},s={json:!0,url:this.dataset.url,submitBtn:this,reload:{table:this.dataset.reloadTable}};h.R.start(),this.dataset.param&&(t._param=this.dataset.param),e?new a.C.post(this.dataset.submitUrl,t,s,(t=>{e&&e(t)})):new a.C.post(this.dataset.submitUrl,t,s,null)}getFunction(e){if(null==e)return null;if("string"==typeof e){if("function"==typeof window[e])return window[e];throw i.q.error.show({text:"button:data-callback callback is not a function "+e,title:"title",developerOnly:!0}),new Error("callback is not a function")}return e}}customElements.define("button-delete",v,{extends:"button"});class g extends r{constructor(){super(),this.button_click=e=>{if(this.change_state(!0!==this.state),this.control_input(),this.control_anchor(),this.control_btn(),this.callback){let e=window[this.callback];e&&"function"==typeof e&&e(this.state)}(this.dataset.labelon||this.dataset.labeloff)&&this.button(),this.dataset.hide&&this.classList.add("d-none")},this.change_state=function(e){this.state=e},this.control_input=function(){var e=this.elements.concat(this.textarea),t=this;e.forEach((function(e){e.parentElement.offsetWidth&&(e.disabled!==t.state?e.disabled=t.state:t.dataset.reverse&&(e.disabled=!0!==t.state))}))},this.submit_btn_trigger_disable=function(e){var t=this;e.addEventListener("click",(function(e){!1!==t.state&&(t.state=!1,t.control_input())}))},this.button=function(){!0===this.state&&this.dataset.labeloff?this.text=this.dataset.labeloff:!1===this.state&&this.dataset.labelon?this.text=this.dataset.labelon:this.text="where is the label?"}}_init(){this._form=document.getElementById(this.dataset.form)||this.closest("form"),this.elements=Array.prototype.slice.call(this._form.getElementsByTagName("input")),this.textarea=Array.prototype.slice.call(this._form.getElementsByTagName("textarea")),this.submit_btn=Array.prototype.slice.call(this._form.querySelectorAll('button[type="submit"]')),this.btn=Array.prototype.slice.call(this._form.querySelectorAll('button[type="button"]:not(.always)')),this.anchor_btn=Array.prototype.slice.call(this._form.querySelectorAll('a:not([data-type="xdisable"]):not(.always):not(.dropzone-item-thumbnail)')),this.submit_btn=this.submit_btn.concat(this.btn),this.state=!!this.dataset.disabled,this.callback=this.dataset.callback,this.change_state(this.state),this.control_input(),this.control_anchor(),this.control_btn(),(this.dataset.labelon||this.dataset.labeloff)&&this.button(),this.addEventListener("click",this.button_click)}control_btn(){if(this.dataset.buttons)for(let e=0;e<this.submit_btn.length;e++)this.submit_btn[e].classList.contains("always")||(!0===this.state?this.submit_btn[e].classList.add("d-none"):this.submit_btn[e].classList.remove("d-none"))}control_anchor(){if(this.dataset.anchor)for(let e=0;e<this.anchor_btn.length;e++)!0===this.state?this.anchor_btn[e].classList.add("d-none"):this.anchor_btn[e].classList.remove("d-none")}}customElements.define("button-disable",g,{extends:"button"});var f=s(3130);class y extends r{constructor(){super()}_init(){const e=this.dataset.url,t=this.hasAttribute("blank")||this.hasAttribute("target");"javascript:;"!==e&&(!0===t?this.addEventListener("click",(()=>{window.open(e).focus()})):this.addEventListener("click",(0,f.Z)((function(){let t=JSON.parse(this.dataset.question||"{}"),s=this.dataset.reload,n=()=>{"true"!=s?(this.loading=!0,new a.C.get(e,{},{submitBtn:this,important:!1},(()=>{this.loading=!1}))):window.location.href=e};0!==Object.keys(t).length?i.q.question.show(t,(e=>{!1!==e&&n()})):n()}),500,!0)))}}customElements.define("button-url",y,{extends:"button"});var b=s(3211);class x{constructor(e,t,s,a){s.xloadingbar=void 0===s.xloadingbar||s.xloadingbar,this.params=s,this.params.xloadingbar&&h.R.start(void 0,"Vyksta failo generavimas. Prašome palaukti...",{backdropClass:"bg-black-40"});let n=this;this.callback=a,this.url=e,null!==t&&"object"==typeof t&&t instanceof FormData!=!0&&(t=this.param(t));let r=new XMLHttpRequest;r.onreadystatechange=()=>{if(4==r.readyState){if(!(r.status>=200&&r.status<299)){if(302===r.status){let e=r.getResponseHeader("location");return void console.log(e)}return void i.q.error.show({text:`Nepavyko kreiptis į ${e}, atsakymas: ${r.status}`,developerOnly:!0})}n.response(r)}},r.open("POST",e,!0),r.responseType="blob",r.setRequestHeader("X-Requested-With","XMLHttpRequest"),t instanceof FormData!=!0&&r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),!0===s.json&&r.setRequestHeader("Accept","application/json, text/javascript, */*; q=0.01"),r.send(t)}response(e){let t=e.getResponseHeader("X-Content")||"error",s=e.getResponseHeader("X-Error")||null,a=e.getResponseHeader("Content-Type"),n=e.getResponseHeader("Content-Disposition");if("error"===t||"xlog"===t){return void new Blob([e.response],{type:a}).text().then((e=>{!0===b.rH.developer?i.q.error.show({text:e,type:s}):i.q.error.show({text:"Įvyko klaida generuojant failą"}),this.callback&&this.callback(),h.R.stop()}))}if("file"!==t)return!0===b.rH.developer?i.q.error.show({text:"Grįžo ne failas"}):i.q.error.show({text:"Įvyko klaida generuojant failą"}),this.callback&&this.callback(),void h.R.stop();let r=n.replaceArr(["attachment","filename",";",'"',"="," "]).trim(),l=window.document.createElement("a");l.href=window.URL.createObjectURL(new Blob([e.response],{type:a})),l.target="_blank",l.download=r,document.body.appendChild(l),l.click(),this.callback&&this.callback(),h.R.stop()}param(e){return Object.keys(e).map((t=>`${t}=${encodeURIComponent(e[t])}`)).join("&")}}class k extends r{constructor(){super()}_init(){this.url=this.dataset.url,"javascript:;"!==this.url&&this.addEventListener("click",(0,f.Z)(this.handleClick.bind(this),500,!0))}handleClick(){this.loading=!0,new x(this.url,{},{},(()=>{this.loading=!1}))}}customElements.define("button-download",k,{extends:"button"});class _ extends HTMLAnchorElement{constructor(){super(...arguments),this.onClick=e=>{let t=e.currentTarget.dataset.clipboard;t&&this.copy(t)}}connectedCallback(){setTimeout((()=>{this._init()}))}_init(){this.addEventListener("click",this.onClick)}copy(e){let t=document.createElement("textarea");t.setAttribute("style","width:0;height:0;position:fixed;left:0"),t.value=e,document.body.appendChild(t),t.focus(),t.setSelectionRange(0,99999),document.execCommand("copy"),t.remove()}}customElements.define("button-copy-clipboard",_,{extends:"a"});class L extends HTMLButtonElement{constructor(){super(...arguments),this.onClick=e=>{e.preventDefault(),this.sidebar.classList.contains(this.openClassName)?(this.classList.remove(this.openClassName),this.sidebar.classList.remove(this.openClassName),document.body.classList.remove(this.openClassName),this.classList.add(this.closedClassName),this.sidebar.classList.add(this.closedClassName),document.body.classList.add(this.closedClassName)):(this.classList.add(this.openClassName),this.sidebar.classList.add(this.openClassName),document.body.classList.add(this.openClassName),this.classList.remove(this.closedClassName),this.sidebar.classList.remove(this.closedClassName),document.body.classList.remove(this.closedClassName))}}connectedCallback(){window.addEventListener("DOMContentLoaded",(()=>{this._init()}))}_init(){const{sidebar:e,openClass:t,closedClass:s,state:i}=this.dataset;if(!e)return void console.warn("Nenurodytas sidebar selektorius");let a=document.querySelector(e);a?(this.sidebar=a,this.openClassName=t,this.closedClassName=s,this.state=i,this.addEventListener("click",this.onClick)):console.warn("Nerastas sidebar elementas pagal nurodyta selektoriu")}set state(e){[document.body,this.sidebar,this].forEach((t=>{"open"===e?(t.classList.remove(this.closedClassName),t.classList.add(this.openClassName)):(t.classList.remove(this.openClassName),t.classList.add(this.closedClassName))}))}get state(){return this.dataset.state}}customElements.define("button-sidebar",L,{extends:"button"});class E extends r{constructor(){super()}_init(){const e=this.dataset.submitUrl;this.addEventListener("click",(()=>{this.loading=!0,new a.C.post(e,{},{json:!0},(e=>{this.loading=!1,!1!==e.success&&window.location.reload()}))}))}}customElements.define("button-exec",E,{extends:"button"});var w=s(2850),S=s(4387);class q extends r{constructor(){super(),this.data={},this.changedData={},this.changed=!1,this.timeout=()=>{const e=(new Date).getTime();return new Promise(((t,s)=>{const i=setInterval((()=>{let a=(new Date).getTime();document.querySelector("form#"+this.formId)?(clearInterval(i),t(!0)):a-e>=3e3&&s(!1)}),50)}))},this.loadData=()=>{document.querySelector("form#"+this.formId).querySelectorAll("input,textarea").forEach((e=>{if(e.getAttribute("name")){let t=e.getAttribute("name");this.data[t]=e.value||"",this.changedData[t]=e.value||"",e.addEventListener("change",(e=>{let t=e.target.getAttribute("name");this.changedData[t]=e.target.value||""}))}}))},this.clickEvent=()=>{let e=new w.t,t=new S.A;JSON.stringify(this.changedData)===JSON.stringify(this.data)?e.load(this.url):t.show({title:"Atlikti keitimai",text:"Ar norite išeiti neišsaugoję pakeitimų?"},(t=>{t&&e.load(this.url)}))}}_init(){this.url=this.dataset.url,this.formId=this.dataset.formId,this.formId&&this.timeout().then((()=>{this.loadData()})),this.addEventListener("click",(()=>this.clickEvent()))}}customElements.define("button-back",q,{extends:"button"});const C={"button-action":o,"button-delete":v,"button-disable":g,"button-submit":m,"button-xsearch":p,"button-url":y,"button-download":k,"button-sidebar":L,"button-copy-clipboard":_,button_exec:E,button_xsearch:p,button_back:q};var T=s(5686),A=s(7211);class I extends T.Z{constructor(){super(),this._placement="bottom-start",this._foutsideClick=this._outsideClick.bind(this)}connectedCallback(){setTimeout((()=>{this._box=this.closest(".pantera-control").querySelector(".box"),"body"===this.dataset.boxContext&&document.querySelector("body").appendChild(this._box),this.addEventListener("focus",(()=>{this._show()})),super.connectedCallback()}))}_show(){!0!==this.readOnly&&!0!==this.disabled&&(this._box.classList.remove("d-none"),this._popper=(0,A.fi)(this,this._box,{placement:this._placement}),setTimeout((()=>{document.addEventListener("mousedown",this._foutsideClick)}),100))}_close(){this._box.classList.add("d-none"),this._popper&&this._popper.destroy(),document.removeEventListener("mousedown",this._foutsideClick),this.dispatchEvent(new CustomEvent("pantera:closed"))}_outsideClick(e){let t=e.target;this._box.contains(t)||t instanceof I&&t===this||this._close()}}const D=I;class M extends D{constructor(){super(...arguments),this._regex=/^[1-2](0[0-9][0-9]|100)-(0[1-9]|1[0-2])/g}_init(){this._rendered={prev:this._box.querySelector(".xquarter-prev"),yearText:this._box.querySelector(".xquarter-year-text"),next:this._box.querySelector(".xquarter-next")},this.listeners()}_valid(){if(this._validation.message=null,this.value.slice(0,7).match(this._regex)){let e=this.value.slice(5,7),t=this.year.toString();return t=this.value.slice(0,4),"01"==e||"02"==e||"03"==e?(this._rendered.yearText.innerText=t,this.value=t.toString()+"-01 / "+t.toString()+"-03"):"04"==e||"05"==e||"06"==e?(this._rendered.yearText.innerText=t,this.value=t.toString()+"-04 / "+t.toString()+"-06"):"07"==e||"08"==e||"09"==e?(this._rendered.yearText.innerText=t,this.value=t.toString()+"-07 / "+t.toString()+"-09"):"10"!=e&&"11"!=e&&"12"!=e||(this._rendered.yearText.innerText=t,this.value=t.toString()+"-10 / "+t.toString()+"-12"),!0}return this._validation.message="Įvestas netinkamas ketvirčio fragmentas (YYYY-MM)",!1}listeners(){const e=this._rendered;this.wrap=document.querySelector(".xquarter-input-group"),this.box=this.wrap.querySelector(".xquarter-box"),this.quartersWrap=this.box.querySelector(".xquarter-box-item-wrap"),this.quarterItems=this.quartersWrap.querySelectorAll(".xquarter-box-item"),this.value.length>7?(this.year=parseInt(this.value.slice(0,4)),this._rendered.yearText.innerText=this.year.toString()):this.year=parseInt(this._rendered.yearText.innerText),this.addEventListener("input",(()=>{this.value.length>=5&&!0!==isNaN(parseInt(this.value.slice(0,4)))&&(this.year=parseInt(this.value.slice(0,4))),this._rendered.yearText.innerText=this.year.toString()})),e.prev.addEventListener("click",(t=>{t.preventDefault(),this.year--,e.yearText.innerText=this.year.toString()})),e.next.addEventListener("click",(t=>{t.preventDefault(),this.year++,e.yearText.innerText=this.year.toString()}));const t=e=>{let t=3*e,s=t-2,i=this.year,a=e=>`${i}-${e.toString().padStart(2,"0")}`;return`${a(s)} / ${a(t)}`};this.quartersWrap.addEventListener("click",(s=>{let i=s.target.closest(".xquarter-box-item");i&&(e.yearText.innerText=this.year.toString(),this.value=t(parseInt(i.dataset.quarter)))}))}}customElements.define("control-picker-date-quarter",M,{extends:"input"});class j extends T.Z{constructor(){super()}_init(){this.case=(this.dataset.case||"").toLowerCase(),""!=this.case&&(this.mask(),this.oninput=this.mask.bind(this))}_valid(){return!0}mask(){let e=this.value;switch(this.case){case"uppercase":this.value=e.toUpperCase();break;case"lowercase":this.value=e.toLowerCase();break;case"capitalizefirst":this.value=e.charAt(0).toUpperCase()+e.slice(1).toLowerCase();break;case"capitalizeonlyfirst":this.value=this.value.charAt(0).toUpperCase()+e.slice(1);break;case"capitalizeeachword":this.value=e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.substring(1))).join(" ");break;case"sentencecase":{let t=new RegExp("(^\\w{1}|[.!?]\\s*\\w{1})","gi");this.value=e.replace(t,(e=>e.toUpperCase()));break}case"alphanumeric":this.value=e.replace(new RegExp("[^a-z_0-9ąčęėįšųūžабвгдеёжзийклмнопрстуфхцчшщъыьэюя ]","gi"),"");break;case"justnumbers":this.value=e.replace(new RegExp("[^0-9]","gi"),"");break;default:throw new Error("Undefined case type")}}}customElements.define("text-simple",j,{extends:"input"});class B extends T.Z{constructor(){super(),this._regex=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)[\/]?([0-9]?[0-9]?)?$/,setTimeout((()=>this._init))}_init(){}_valid(){const e=this.value;return this._regex.lastIndex=0,!0===this._regex.test(e)||(this._validation.message="Neteisingas IP",!1)}get value(){return super.value}set value(e){super.value=e}}customElements.define("control-text-ipaddress",B,{extends:"input"});class H extends T.Z{constructor(){super()}_init(){this.validator=new RegExp(/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/,"g"),this.oninput=()=>{this.value=this.value.toLowerCase(),this.value=this.value.replace(/\.\./g,"."),this.value=this.value.replace(/@@/g,"@")}}_valid(){return!this.value&&!1===this.required||(!!this.validator.test(this.value)||(!1===this.validator.test(this.value)?(this._validation.message="Neteisingas el. pašto adresas",!1):void 0))}}customElements.define("text-mail",H,{extends:"input"});class N extends T.Z{constructor(){super()}_init(){this.oninput=this.alphaOnly.bind(this)}_valid(){return!0}alphaOnly(){this.value&&(this.value=this.value.replace(new RegExp("[^a-zA-ZąčęėįųūżčšžĄČĖĘĮŲŪČŠŽ\\s\\-]","gi"),""))}}customElements.define("text-name",N,{extends:"input"});var O=s(8019);class P extends T.Z{constructor(){super()}_init(){this.container=this.closest(".text-captcha-wrap"),this.captcha=this.container.querySelector("#captcha_"+this.dataset.id),this.img=this.container.querySelector("#captcha_img_"+this.dataset.id),this.img.addEventListener("click",(()=>{new O._("/router/control_text_captcha/resetCaptcha",{data:this.captcha.value},{},(e=>{!0===e.success&&(this.img.src="data:image/png;base64, "+e.captcha.img,this.captcha.value=e.captcha.data)}))})),this.img.dispatchEvent(new Event("click"))}_valid(){return!0}}customElements.define("text-captcha",P,{extends:"input"});class R extends T.Z{constructor(){super()}_init(){this.wrapper=this.closest(".form-group"),this.wrapper&&(this.passwordVisibilityToggler=this.wrapper.querySelector("div.input-group-append"),this.initEventListeners())}_valid(){return!!this.value}initEventListeners(){this.passwordVisibilityToggler&&this.passwordVisibilityToggler.addEventListener("click",this.togglePasswordVisibility.bind(this))}togglePasswordVisibility(){this.type="password"===this.type?"text":"password";let e=this.passwordVisibilityToggler.querySelector("span.fas");e.classList.contains("fa-eye-slash")?(e.classList.remove("fa-eye-slash"),e.classList.add("fa-eye")):(e.classList.remove("fa-eye"),e.classList.add("fa-eye-slash"))}}customElements.define("text-password",R,{extends:"input"});var F=s(4729);class U extends HTMLDivElement{constructor(){super(...arguments),this.allowClear=!1,this.focusSearchOnList=!0,this._validation={message:null,default:null,error:!1,validity:!1,info:null}}connectedCallback(){setTimeout((()=>this._init()),200)}_init(){this.render();const e=({target:t})=>{this.contains(t)||(this.close(),document.removeEventListener("focusin",e))},t=()=>{this.addEventListener("keyup",(({keyCode:s})=>{13==s&&(this.open(),document.addEventListener("focusin",e),this.removeEventListener("keyup",t))}))};this.addEventListener("focus",t),this.select._validate=this._validate.bind(this)}render(){this.form=this.closest("form"),this.select=this.querySelector('input[type="hidden"]'),this.activeItemClass="xselect-list-item--selected",this.pseudo=this.querySelector("div.xselect-display"),this.pseudoValue=this.pseudo.querySelector("span.xselect-display-text")||this.pseudo.querySelector("span.ship-primary"),this.list=this.querySelector("div.xselect-list"),this.listContent=this.list.querySelector("div.xselect-list-content"),this.search=this.list.querySelector("input.form-control"),this.callback=this.select.dataset.callback,this.querySelector(".xselect-list-search")||(this.focusSearchOnList=!1),this.toggleItemsClasses(),this.init_append(),this.listen=[],this.setUrlParam=!!this.select.dataset.setUrlParam;let e=this.select.dataset.control;this.control=e?e.split(","):null,null!==this.control&&this.control.forEach((e=>{let t=document.querySelector("input[name="+e+"]");this.select.value||this.select.dataset.ignore||(t.disabled=!0)}));const t=this.listContent.querySelector("."+this.activeItemClass);t&&(this.currentItem=t),this.pseudo.addEventListener("click",this.open.bind(this)),this.classList.contains("xsimple-add-on-search")&&(this.addOnSearchBtn=this.querySelector("a.add-on-search-btn"),this.addOnSearchBtn.addEventListener("click",this.addOnSearch.bind(this))),this.select.dataset.removeurl&&this.querySelectorAll("a.xselect-remove-item").forEach((e=>{e.addEventListener("click",this.removeItem.bind(this))})),this.listContent.addEventListener("click",this.handleClick.bind(this)),this.search&&(this.search.addEventListener("keydown",(e=>{13==e.which&&e.preventDefault()})),this.currentIndex=-1,this.search.addEventListener("keyup",(e=>{let t=this.querySelector(".xselect-list-content");e.preventDefault();let s=e.target.value.toLocaleLowerCase();switch(e.code){case"ArrowUp":if(-1==this.currentIndex||0==this.currentIndex)break;this.currentIndex>0&&this.currentIndex--,-1==this.currentIndex&&(this.currentIndex=0),this.currentIndex>=t.children.length&&(this.currentIndex=-1),this.currentIndex<t.children.length&&this.currentIndex>=0&&(t.children.item(this.currentIndex+1).style.backgroundColor="white"),this.currentIndex<t.children.length&&this.currentIndex>=0&&(t.children.item(this.currentIndex).style.backgroundColor="#bde3ff"),t.scrollTop=t.children[this.currentIndex].offsetTop-t.offsetHeight/2;break;case"ArrowDown":this.currentIndex>=t.children.length&&(this.currentIndex=-1),this.currentIndex<t.children.length-1&&this.currentIndex++,this.currentIndex>0&&this.currentIndex<t.children.length&&(t.children.item(this.currentIndex-1).style.backgroundColor="white"),this.currentIndex<t.children.length&&this.currentIndex>=0&&(t.children.item(this.currentIndex).style.backgroundColor="#bde3ff"),t.scrollTop=t.children[this.currentIndex].offsetTop-t.offsetHeight/2;break;case"ArrowLeft":case"ArrowRight":break;case"Enter":if(-1==this.currentIndex)break;this.currentIndex>=0&&this.currentIndex<t.children.length&&t.children.item(this.currentIndex).click();break;default:this.dataset.datasetSearch?this.handleDatasetSearch(s):this.handleSearch(s)}}))),t&&this.select.dispatchEvent(new CustomEvent("pantera:ready",{detail:this.currentListItem()})),this._clear_input()}addOnSearch(e){e.preventDefault(),this.search.value.replace(" ","")&&new a.C.post(this.addOnSearchBtn.href,{value:this.search.value},{json:!0},(e=>{if(e.success){const t=this.createListItem({id:e.id,text:e.text,isSelected:!1});this.listContent.append(t),this.value={id:e.id,text:e.text},this.actionAfterSelect(t)}}))}removeItem(e){e.preventDefault();let t=e.target.closest("div.xselect-list-item"),s=t.dataset.value,n=JSON.parse(this.select.dataset.removequestion||"{}");i.q.question.show(n,(e=>{!1!==e&&new a.C.post(this.select.dataset.removeurl,{value:s,_param:this.select.dataset.removedata},{json:!0},(e=>{e.success&&(this.value.id===s&&(this.value={id:"",text:""}),t.remove())}))}))}deleteValueText(){this.value={id:"",text:""}}append(){const e=this.appendableConfig;let t={};t[this.select.name]=this.select.value,new a.C.post(e.url,t,{json:!1},(t=>{if(e.overwrite&&(e.el.innerHTML=""),window.HTMLTemplateElement){let s=document.createElement("template");s.innerHTML=t;let i=s.content.firstElementChild;e.delete_button&&this.add_delete_button(i),e.el.append(i)}else $(e.el).append(t);let s=new CustomEvent("append",{bubbles:!0});this.dispatchEvent(s)}))}actionAfterSelect(e){this.closeAndReset();let t=new Event("change");this.dispatchEvent(t),this.appendableConfig.enabled&&this.append();const s=this.querySelector(".xselect-display");if(s){const e=s.querySelector(".xselect-display-text");s.innerText.includes("Pasirinkite")?e.style.pointerEvents="none":e.style.pointerEvents="auto"}}handleSearch(e){this.listContent.querySelectorAll("div.xselect-list-item").forEach((t=>{-1===t.innerText.toLocaleLowerCase().indexOf(e)?t.style.display="none":t.style.display=""}))}handleDatasetSearch(e){this.currentIndex=-1,new a.C.post(this.dataset.datasetSearchUrl,{search:e},{},(e=>{this.listContent.innerHTML=e}))}outsideClick(e){let t=e.target,s=document.activeElement.classList.contains("xselect-search-input");this.querySelector(".xselect-input-group").contains(t)||s||this.closeAndReset()}open(){this.currentIndex=-1,this.select.disabled||this.select.readOnly||this.list.classList.contains("open")||(this.popper=(0,A.fi)(this.pseudo,this.list,{placement:"bottom-start"}),this.toggleItemsClasses(),this.list.classList.add("open"),this.focusSearchOnList&&this.search&&this.search.focus(),this.onClick=this.outsideClick.bind(this),document.addEventListener("click",this.onClick,!0))}toggleItemsClasses(){let e=this;Array.prototype.slice.call(this.listContent.querySelectorAll("div.xselect-list-item")).forEach((t=>{e.value&&t.dataset.value===e.value.id.toString()?t.classList.add(e.activeItemClass):t.classList.remove(e.activeItemClass)}))}createListItem({text:e,id:t,isSelected:s}){let i=document.createElement("div");if(i.classList.add("xselect-list-item"),i.setAttribute("data-value",t),this.select.dataset.removeurl){let e=document.createElement("a");e.setAttribute("href","javascript:;"),e.setAttribute("class","xselect-remove-item"),e.addEventListener("click",this.removeItem.bind(this)),i.appendChild(e)}return i.appendChild(document.createTextNode(e)),s&&i.classList.add("xselect-list-item--selected"),i}close(){this.list.classList.remove("open"),this.popper&&(this.popper.destroy(),this.popper=null)}closeAndReset(){this.close(),document.removeEventListener("click",this.onClick,!0),this.resetSearch()}init_append(){let e={enabled:!!this.select.dataset.appendUrl&&!!this.select.dataset.appendEl,el:null,url:this.select.dataset.appendUrl,overwrite:!!this.select.dataset.appendOverwrite};if(this.appendableConfig=e,e.enabled&&(e.el=document.querySelector(this.select.dataset.appendEl),!e.el))throw new Error("Undefined element passed to xaction append (appendEl attribute)")}currentListItem(){const e=this.currentItem;return{id:this.select.value,text:this.pseudoValue?this.pseudoValue.innerText:"",extra:e&&e.dataset.extra?JSON.parse(e.dataset.extra):{}}}handleClick(e){let t,s=e.target;if(s.classList.contains("xselect-remove-item"))return;if(s.classList.contains("xselect-list-item"))t=e.target;else if(t=s.closest(".xselect-list-item"),null===t)return;if(e.preventDefault(),e.stopPropagation(),"true"==t.dataset.disabled)return;this.currentItem=t;let i=Number(this.dataset.chipTextMaxLength),a=t.dataset.text||t.innerText;if(0!=i&&a.length>i&&(a=a.substr(0,i)+"..."),this.value={id:isNaN(t.dataset.value)||0==t.dataset.value.substring(0,1)?t.dataset.value:t.dataset.value%1==0?parseInt(t.dataset.value):parseFloat(t.dataset.value),text:a},this.actionAfterSelect(t),this.callback){let e=window[this.callback];e&&"function"==typeof e&&e(this.value)}}set value({id:e,text:t}){if(this.select.value=e,this.pseudoValue.innerText=t,this.setUrlParam){(new F.q).update(this.select.name||"search",e,!0)}this.select.dispatchEvent(new CustomEvent("pantera:change",{detail:this.currentListItem(),bubbles:!0})),null!==this.control&&this.control.forEach((t=>{let s=this.form.querySelector("input[name="+t+"]").closest("[is]");void 0!==s?(s.dataset.listenName&&s.dataset.listenName.split(",").includes(this.select.name)?s.listen[this.select.name].value=this.value:(null==s.dataset.listenName?s.setAttributeNS(null,"data-listenName",this.select.name):s.setAttributeNS(null,"data-listenName",s.dataset.listenName+","+this.select.name),s.listen[this.select.name]={name:this.select.name,value:this.value}),s.value={id:null,text:null},"select-multi"===s.getAttribute("is")&&s.removeItems(),null!==e?(s.select.disabled=!1,s.handleSearch("")):s.select.disabled=!0):console.error("nemato proto")})),this._validate()}get value(){try{return{id:this.select.value,text:this.pseudoValue.innerText}}catch(e){return}}_validate(){if(this._validation.message=null,this._validation.validity=!1,this.closest("fieldset:disabled"))return!0;let e=this.select.checkValidity();return!1===e?(this._validation.validity=!0,this._error(!1),!1):this.select.required&&!this.select.value?(this._validation.message="Šis laukas yra privalomas",this._error(!1),!1):(this._error(!0),e)}_error(e){const t=this.closest(".pantera-control"),s=t.querySelector("label.is-invalid");let i;if(!1===e)return this._validation.error=!0,!0===this._validation.validity?(i=this.select.validationMessage,this.select.validity.valueMissing&&(i="Šis laukas yra privalomas")):i=this._validation.message||this._validation.default,s&&(s.classList.remove("d-none"),s.textContent=i),void t.classList.add("is-invalid");!0===this._validation.error&&(s&&(s.textContent=null,s.classList.remove("d-none")),this._validation.error=!1),t.classList.remove("is-invalid")}resetSearch(){const e=this.querySelector('[type="text"]');e&&(e.value=""),this.handleSearch("")}_clear_input(){const e=this.closest(".pantera-control").querySelector(".control-clear");e&&e.addEventListener("click",(()=>{this.value={id:"",text:""}}))}}function z(e,t){return e.toAscii().toLowerCase().indexOf(t.toAscii().toLowerCase())}customElements.define("select-simple",U,{extends:"div"}),Object.defineProperty(String.prototype,"toAscii",{enumerable:!1,writable:!0,value:function(){if(null===this)return"";const e={Ą:"A",Č:"C",Ę:"E",Ė:"E",Į:"I",Š:"S",Ų:"U",Ū:"U",Ž:"Z",ą:"a",č:"c",ę:"e",ė:"e",į:"i",š:"s",ų:"u",ū:"u",ž:"z"};let t="";for(let s=0;s<this.length;s++){let i=this.charAt(s),a=i===i.toUpperCase()&&i!==i.toLowerCase(),n=this.toLowerCase().charCodeAt(s);n<128?t+=a?String.fromCharCode(n).toUpperCase():String.fromCharCode(n):t+=e[i]?e[i]:i}return t}}),Object.defineProperty(String.prototype,"replaceAll",{enumerable:!1,writable:!0,value:function(e,t){let s=this;for(;-1!=s.indexOf(e);)s=s.replace(e,t);return s}}),Object.defineProperty(String.prototype,"replaceArr",{enumerable:!1,writable:!0,value:function(e){let t=this;return e.forEach((e=>{t=t.replaceAll(e,"")})),t}});const V=function(e,t){let s=z(e,t);if(-1===s)return e;let i=e.substring(0,s),a=e.substring(s,s+t.length),n=e.substring(s+t.length);return e=`${i}<span class='highlight'>${a}</span>${n}`},W=z;class Z extends U{_init(){super._init();const e=Array.from(this.listContent.querySelectorAll("div.xtree > ul > li"));this.items=e.map((e=>this._collect(e)))}_collect(e){const t=e.children[0],s=e.children[1],i={id:Number(e.dataset.id),parent:Number(e.dataset.parent||0),text:t.textContent.toLocaleLowerCase(),real:t.textContent,childrens:[],li:e,div:t};let a=Array.from(s?s.querySelectorAll(":scope > li"):[]);return i.childrens=a.map((e=>this._collect(e))),i}handleSearch(e,t){this.items.forEach((t=>{this._search(t,e)}))}_search(e,t,s=!1){let i=s||-1!==W(e.text,t),a=!1;e.childrens.forEach((e=>{!0===this._search(e,t,i)&&(a=!0)})),!0===a&&(i=!0);const n=e.li,r=e.div;return!1===i?(n.style.display="none",r.innerHTML=e.real):(r.innerHTML=V(e.real,t),n.style.display=""),i}}customElements.define("select-tree",Z,{extends:"div"});class Y{constructor(e){this.element=e}fadeOut(){let e=1,t=this,s=setInterval((function(){e<=.1&&clearInterval(s),t.element.style.opacity=e.toString(),t.element.style.filter="alpha(opacity="+(100*e).toString()+")",e-=.1*e}),13)}fadeIn(){let e=.1,t=this,s=setInterval((function(){e>=1&&clearInterval(s),t.element.style.opacity=e.toString(),t.element.style.filter="alpha(opacity="+(100*e).toString()+")",e+=.1*e}),12)}blink(){this.fadeOut(),setTimeout((()=>{this.fadeIn()}),300)}}class K extends T.Z{constructor(){super(),this.delay=400,this._isCompleting=!1,this._foutsideClick=this._outsideClick.bind(this),this._foutsideClickGlobal=this._outsideClickGlobal.bind(this)}_init(){this._box=this.nextSibling.nextSibling,this._list=this._box.firstElementChild,this._form=this.form,this.dataset.control&&(this.control=this._form.querySelector("[name="+this.dataset.control+"]")),this.dataset.listen&&(this.listen=this._form.querySelector("[name="+this.dataset.listen+"]")),this._listeners(),this._validationString=this.dataset.validation}_listeners(){this.addEventListener("input",(()=>{this.hasAttribute("temp-pause")||(document.addEventListener("click",this._foutsideClickGlobal),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((()=>{if(document.removeEventListener("click",this._foutsideClickGlobal),!0===this._isCompleting)return void(this._isCompleting=!1);const e=this.value;this.currentFocus=-1,""!==e?this.getDataJson(e):(this._close(),this.isControlInvalid())}),this.delay))})),this.addEventListener("keydown",(e=>{"ArrowDown"===e.key?(this.currentFocus++,this.addActive()):"ArrowUp"===e.key?(this.currentFocus--,this.addActive()):"Enter"!==e.key||this._list.classList.contains("d-none")||(e.preventDefault(),this.currentFocus>-1&&this._items&&this._items[this.currentFocus].click())})),this.addEventListener("click",(()=>{this.classList.remove("is-invalid")}))}addActive(){this._items&&(this.currentFocus>=this._items.length&&(this.currentFocus=0),this.currentFocus<0&&(this.currentFocus=this._items.length-1),this._items.forEach((e=>{e.classList.remove("autocomplete-active")})),this._items[this.currentFocus].classList.add("autocomplete-active"))}_valid(){if("companyCode"!==this._validationString)return!0;{const e=this.value;if(!e||this.dataset.whitelist===e)return!0;if(!0===isNaN(parseInt(e))||e.length<9)return this._validation.message="Įmonės kodas per trumpas",!1;if(!0===isNaN(parseInt(e))||e.length>9)return this._validation.message="Įmonės kodas per ilgas",!1;let t=[],s=[],i=0;if(9===e.length){for(let i=0;i<9;i++)t[i]=e.substring(i,i+1),i<8?s[i]=Number(t[i])*(i+1):8===i&&(s[i]=Number(t[i]));for(let e=0;e<8;e++)i+=s[e];return i%=11,i>9?(this._validation.message="Įmonės kodas neteisingas",!1):i===s[8]||(this._validation.message="Įmonės kodas neteisingas",!1)}}}setAutocompleteValues(){const e=this._list;e.innerHTML=this.responseData,this._items=e.querySelectorAll("li"),this.validationMessage,0!==this._items.length?(this._show(),this._items.forEach((e=>{e.addEventListener("click",(()=>{this.value=e.dataset.value,this.control&&this.isControlInvalid(),l.dispatch(this,"pantera:change",Object.assign({},e.dataset)),this._close()}))}))):this._close()}isControlInvalid(){if(this.control&&""!==this.control.value){this.control.classList.add("is-invalid"),this.control.isControlInvalid(),new Y(this.control).blink()}else this.control&&""===this.control.value&&(this.control.classList.remove("is-invalid"),this.control.isControlInvalid())}getDataJson(e){let t={search:e,type:this._form.getAttribute("name")};this.listen&&(t[this.dataset.listen]=this.listen.value),new a.C.post(this.dataset.url,t,{json:!1},(e=>{this.responseData=e.data,this.setAutocompleteValues()}))}_show(){this._box.classList.remove("d-none"),setTimeout((()=>{document.addEventListener("click",this._foutsideClick)}),100)}_close(){this._box.classList.add("d-none"),document.removeEventListener("click",this._foutsideClick)}_outsideClick(e){let t=e.target;this._box.contains(t)||t instanceof T.Z&&t===this||this._close()}_outsideClickGlobal(){this._isCompleting=!0,this.getDataOne()}getDataOne(){let e={search:this.value,type:this._form.getAttribute("name")};new a.C.post(this.dataset.url,e,{json:!1},(e=>{let t=document.createElement("ul");t.innerHTML=e.data;let s=t.querySelectorAll("li");1===s.length?(this._isCompleting=!0,this._form.value=s[0].dataset.value,this.control&&this.isControlInvalid(),l.dispatch(this,"pantera:change",Object.assign({},s[0].dataset))):this._isCompleting=!1}))}}customElements.define("select-autocomplete",K,{extends:"input"});class X extends T.Z{constructor(){super()}_init(){this._listeners()}_listeners(){this.addEventListener("keydown",(e=>{var t,s=window.location.search,i=new URLSearchParams(s);if("Enter"===e.key){e.preventDefault();var n,r=e.currentTarget;r.value.trim()?i.set("search",r.value.trim()):i.delete("search");n=i.toString().length?JSON.parse('{"'+decodeURI((null!==(t=i.toString())&&void 0!==t?t:{}).replace(/&/g,'","').replace(/=/g,'":"'))+'"}'):{},d.X.url.urlParams(n,!0),window.location.href,new a.C.get(window.location.href,n,{json:!0,reload:!0},(function(e){let t=document.querySelector("#content")||document.body,s=document.createRange().createContextualFragment(e);t.innerHTML="",t.append(s)}))}}))}_valid(){return!0}}customElements.define("select-autocomplete-expand",X,{extends:"input"});var J=s(1682);class G extends J.Z{_init(){setTimeout((()=>{this.switch=this.dataset.switch,this.hideBlocks(),this.select=this.querySelector('input[type="hidden"]'),this.select.value&&this.setBlocks(this.select.value),this.select.addEventListener("pantera:change",(()=>this.setBlocks(this.select.value)))}),50)}setBlocks(e){this.hideBlocks(e),this.setActiveBlock(e),"true"===this.select.dataset.disabled&&(this.select.disabled=!0)}hideBlocks(e){document.querySelectorAll(`[data-${this.switch}]:not(.select-model-switcher)`).forEach((t=>{if(this===t)return;if(e&&t.dataset.switch===e)return;t.style.display="none";let s=t.querySelectorAll("[name]");s&&s.forEach((e=>{e.disabled=!0}))}))}setActiveBlock(e){let t;if(document.querySelectorAll(`[data-${this.switch}*="${e}"]`).forEach((s=>{s.getAttribute(`data-${this.switch}`).split(",").includes(e)&&(t=s)})),!t)return;t.classList.add("active"),t.style.removeProperty("display");let s=t.querySelectorAll("[name]");s&&s.forEach((e=>{e.disabled=!1}))}}customElements.define("select-model-switcher",G,{extends:"div"});class Q extends U{constructor(){super(...arguments),this.selectedItems=[],this.chipClass="",this.onClickRemove=e=>{if(this.select.disabled)return;e.stopPropagation();let t=e.target;if(t.classList.contains("xselect-deselect")){let e=t.closest("span"),s=e.dataset.value;this.value={id:s,text:e.innerText.trim()},e.remove();let i=this.listContent.querySelector('div[data-value="'+s+'"].xselect-list-item.xselect-list-item--selected');i&&i.classList.remove("xselect-list-item--selected")}}}render(){super.render(),this.dataset.chipClass&&(this.chipClass=this.dataset.chipClass),this.badgeWrap=this.querySelector("div.xselect-display-values"),this.badgeWrap||(this.badgeWrap=this.pseudo);let e=this;e.classList.contains("multiselect-add-on-search")&&(this.addOnSearchBtn=e.el.querySelector("a.add-on-search-btn"),this.addOnSearchBtn.addEventListener("click",this.addOnSearch.bind(this))),this.listContent.querySelectorAll("div.xselect-list-item").forEach((e=>{e.classList.contains(this.activeItemClass)&&this.selectedItems.push({id:e.dataset.value,text:e.innerText})})),this.pseudo.addEventListener("click",this.onClickRemove),this.dataset.connectedChipWrap&&(this.connectedChipWrap=document.querySelector(this.dataset.connectedChipWrap),this.connectedChipWrap.addEventListener("click",this.onClickRemove),this.renderChips())}addOnSearch(e){e.preventDefault();const t=this;if(!this.search.value.replace(" ",""))return;let s=this.listContent.querySelectorAll("div.xselect-list-item"),i=!1;s.forEach((e=>{if(e.textContent.trim().toUpperCase()==this.search.value.trim().toUpperCase()){const s=e.dataset.value,a=e.innerText;t.value={id:s,text:a},t.actionAfterSelect(e),i=!0}})),i||new a.C.post(this.addOnSearchBtn.href,{value:this.search.value},{},(e=>{if(e.success){const s=t.createListItem({id:e.id,text:e.text,isSelected:!1});t.listContent.append(s),t.value={id:e.id,text:e.text},t.actionAfterSelect(s)}}))}removeItems(){this.select.value="",this.pseudo.querySelector(".xselect-display-values").innerHTML="",this.listContent.querySelectorAll(".xselect-list-item").forEach((e=>{e.classList.contains(this.activeItemClass)&&e.classList.remove(this.activeItemClass)})),this.selectedItems=[]}removeItem(e){e.preventDefault();let t=e.target,s=t.closest("div.xselect-list-item").dataset.value,n=JSON.parse(this.select.dataset.removequestion||"{}");i.q.question.show(n,(e=>{!1!==e&&new a.C.post(this.select.dataset.removeurl,{value:s,_param:this.select.dataset.removedata},{},(e=>{e.success&&(this.selectedItems.forEach((e=>{e.id==s&&(this.value={id:s,text:""},this.actionAfterSelect(t.closest(".xselect-list-item")))})),t.closest(".xselect-list-item").remove())}))}))}actionAfterSelect(e){e.classList.contains(this.activeItemClass)?e.classList.remove(this.activeItemClass):e.classList.add(this.activeItemClass)}renderChips(){let e,t;e=this.selectedItems.map((e=>e.id));let s=this.select.dataset.chipColor;t=this.selectedItems.reduce(((e,t)=>e+=this.badgeItemTpl({color:s,data:t})),"");let i=document.createElement("div");i.innerHTML=t,this.select.value=e.toString(),[...this.badgeWrap.children].forEach((e=>{e.classList.contains("chip")&&e.remove()})),[...i.children].forEach((e=>{this.badgeWrap.prepend(e)})),this.connectedChipWrap&&(this.connectedChipWrap.innerHTML=this.selectedItems.map((e=>this.badgeItemTpl({color:s,data:e}))).join(""))}badgeItemTpl({color:e,data:t}){return`\n                <span class="chip chip-${e||"primary"} ${this.chipClass}" data-value="${t.id}">\n                    ${t.text}\n                    <i class="chip-btn fas fa-times xselect-deselect"></i>\n                </span>\n            `}set value({id:e,text:t}){if(e||t){let s=function(e,t){for(let s=0;s<t.length;s++)if(`${t[s].id}`==`${e.id}`)return s;return!1}({id:e,text:t},this.selectedItems);"boolean"==typeof s&&0==s?this.selectedItems.push({id:e,text:t}):"number"==typeof s&&this.selectedItems.splice(s,1),this.select.value=this.selectedItems.map((e=>e.id)).join()}else this.clear();this.select.dispatchEvent(new Event("change",{bubbles:!0})),this.popper&&this.popper.update(),this.renderChips()}clear(){this.selectedItems=[],this.select.value="",this.badgeWrap.innerHTML="",[...this.listContent.querySelectorAll(".xselect-list-item--selected")].map((e=>e.classList.remove("xselect-list-item--selected")))}toggleItemsClasses(){let e=this,t=[];""!=e.select.value&&(t=e.select.value.split(",")),t.length&&t.forEach((t=>{let s=e.listContent.querySelector(`[data-value="${t}"]`);if(s)s.classList.add(e.activeItemClass);else{let e=this.pseudo.querySelector(`[data-value="${t}"]`);if(!e||e.classList.contains("badge-danger"))return;e.classList.remove("badge-primary"),e.classList.add("badge-danger")}}))}}customElements.define("select-multi",Q,{extends:"div"});class ee extends Q{constructor(){super(...arguments),this.appendValues=[],this.focusSearchOnList=!1,this.onAppendEnter=e=>{if(!te(e))return;let t=13===e.which||188===e.which,s=e.target,i=s.value.trim();if(t){if(e.preventDefault(),!i)return;let t={text:i,id:i};this.value=t;let a={color:this.select.dataset.chipColor,data:t};this.appendValues.push(i);let n=this.badgeItemTpl(a),r=document.createElement("div");r.innerHTML=n,this.pseudoValues.insertBefore(r.firstElementChild,s);let l=document.createElement("div");l.classList.add("xselect-list-item"),l.classList.add("xselect-list-item--selected"),l.setAttribute("data-value",t.id),l.innerText=t.text,this.listContent.appendChild(l),s.value="",this.popper&&this.popper.update()}}}_init(){super._init(),this.pseudoValues=this.querySelector("div.xselect-display-values"),this.appendInput=this.pseudo.querySelector(".xselect-display-append"),this.addEventListener("click",(e=>{te(e)&&e.stopPropagation()})),this.addEventListener("keydown",this.onAppendEnter)}}function te(e){return!!e.target.closest(".xselect-display-append")}customElements.define("select-multiappend",ee,{extends:"div"});class se extends U{render(){super.render(),this.lang="lt"!=b.xw.lang?"/"+b.xw.lang:"",this.url=this.lang+b.xw.zone+"/remote/"+this.select.dataset.remote+"/search",this.delay=400,this.params=this.select.dataset.params?JSON.parse(this.select.dataset.params):null}handleSearch(e){let t=this;t.timeout&&clearTimeout(t.timeout),t.timeout=setTimeout((()=>{t.request(e)}),t.delay)}request(e){let t=this,s=Object.assign({search:e},this.params),i=this.listen;for(var n in i)s[i[n].name]=i[n].value.id;new a.C.post(t.url,s,{json:!1},(function(e){for(;t.listContent.firstChild;)t.listContent.removeChild(t.listContent.firstChild);t.listContent.innerHTML=e,Qi()}))}}customElements.define("select-remote",se,{extends:"div"});class ie{constructor(e){this.started=!1,this.page=1,this.noData=!1,this.params={url:e.url,container:e.container,paging:e.paging||20,onEvent:e.onEvent||"scroll",onScrollEventHandler:e.onScrollEventHandler||this.onScrollEventHandler.bind(this),scrollSubtraction:e.scrollSubtraction||100,onRender:e.onRender||this.onRender.bind(this),getDataCallback:e.getDataCallback},this.params.container.addEventListener(this.params.onEvent,(e=>{!this.noData&&this.params.onScrollEventHandler(this,e)&&this.load()}))}onScrollEventHandler(e,t){let s=t.currentTarget;return s.offsetHeight+s.scrollTop>=s.scrollHeight-e.params.scrollSubtraction}load(){if(this.started)return;this.started=!0;let e,t=this.createSection();this.params.container.appendChild(t),t.classList.add("preload-section-loading"),h.R.start(t),e="function"==typeof this.params.getDataCallback?Object.assign({page:++this.page,paging:this.params.paging},this.params.getDataCallback()):{page:++this.page,paging:this.params.paging},new a.C.post(this.params.url,e,{xloadingbar:!1},(e=>{this.noData=!e,this.handleCallback(this,e,t),this.started=!1,h.R.stop()}))}createSection(){let e=document.createElement("div");return e.setAttribute("class","preload-section position-relative"),e.id="_"+Math.random().toString(36).substr(2,9),e}handleCallback(e,t,s){e.params.container.replaceChild(this.params.onRender(t),s)}onRender(e){return document.createRange().createContextualFragment(e)}reset(){this.noData=!1}resetPage(){this.page=1}}class ae extends se{constructor(){super(...arguments),this.urls={list:String,search:String,details:String,add:String,preload:String},this.loading=!1}render(){super.render();let e=this;if(this.url=b.xw.zone+"/xmega/"+e.select.dataset.remote+"/",this.showAddModal=this.showAddModal.bind(this),this.addBtnSm=this.pseudo.querySelector("a.tsmega-add"),this.addBtn=this.list.querySelector("a.tsmega-add"),this.addBtn&&this.addBtn.addEventListener("click",this.showAddModal),this.addBtnSm&&this.addBtnSm.addEventListener("click",this.showAddModal),this.urls={list:this.url.concat("list/"),search:this.url.concat("search"),details:this.url.concat("details/"),add:this.url.concat("add"),preload:this.url.concat("preload")},this.detailEl=this.querySelector(".tsmega-details"),this.classList.contains("tsmega-preload")&&(this.preloader=new ie({url:this.urls.preload,container:this.listContent,paging:30,getDataCallback:()=>({search:this.search_text||""})})),!this.pseudoValue)return;!this.pseudoValue.classList.contains("xselect-no-details")&&this.pseudoValue.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation(),""===this.select.value||!0===this.loading||this.detailEl.classList.contains("open")||(this.loading=!0,e.details())})),this.select.dataset.listenValue&&this.handleSearch("",null);let t=this.querySelector(".xselect-display");t.innerText.includes("Pasirinkite")&&(t.querySelector(".xselect-display-text").style.pointerEvents="none")}showAddModal(e){e.stopPropagation();let t=this.search.value,s=this,i=Object.assign({Name:t},this.params);void 0!==this.listen&&null!==this.listen&&(i[this.listen.name]=this.listen.value),new a.C.post(this.urls.add,i,{json:!1},(e=>{("hidden"==e.type||"dismiss"==e.type)&&"bs.modal"==e.namespace&&s.handleSearch("")}))}outsideClickDetails(e){this.detailEl.classList.remove("open"),document.removeEventListener("click",this.onClickDetails),this.detailEl.innerHTML=null}details(){let e=document.querySelectorAll(".tsmega-details");e&&e.forEach((e=>{e.innerHTML="",e.classList.remove("open")})),this.detailEl.classList.add("open"),this.list.classList.remove("open"),this.popper=(0,A.fi)(this.pseudoValue,this.detailEl,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,6]}}]});let t=this,s=t.value.id,i=t.urls.details.concat(s.toString());this.onClickDetails=this.outsideClickDetails.bind(this),new a.C.post(i,{},{json:!1},(e=>{t.detailEl.innerHTML=e,document.addEventListener("click",this.onClickDetails),this.loading=!1,Qi()}))}close(){this.detailEl.classList.remove("open"),super.close()}open(){this.detailEl.classList.remove("open"),super.open()}handleSearch(e,t){this.url=this.urls.search,this.preloader&&(this.search_text=e,e||this.preloader.reset(),this.preloader.resetPage());let s=this;s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout((()=>{s.request(e)}),s.delay)}request(e){let t=this,s=Object.assign({search:e},this.params),i=this.select.dataset;var n=this.listen;if(0==Object.keys(n).length)s[i.listenName]=i.listenValue;else for(var r in n)s[n[r].name]=n[r].value.id;new a.C.post(t.url,s,{json:!1},(function(e){for(;t.listContent.firstChild;)t.listContent.removeChild(t.listContent.firstChild);t.listContent.innerHTML=e,Qi()}))}}customElements.define("select-mega",ae,{extends:"div"});class ne extends U{constructor(){super(...arguments),this.option=null,this.editBtn=null,this.url="/xoptions/"}}customElements.define("select-options",ne,{extends:"div"});class re extends T.Z{constructor(){super(),this._submitMasked=!0,this._length=255,this._regex=/[^a-z0-9]/gi,this._typing=!1,this._initialized=!1,this._canceled=!1,this._focused=!1,this._number=!1}_init(){this._typing=!0,this.unmasked=this.value,this._typing=!1,this.mask(),this.value=this.masked,this.manageEvents(),this._initialized=!0}manageEvents(){this.oninput=()=>{if(this._focused=!0,this._canceled=!1,this._selection={start:this.selectionStart,end:this.selectionEnd},this._typing=!0,!0===this._number){if(!/^(0\.)/.test(this.value)||!/^(0,)/.test(this.value)){let e=this.value.replace(/^0+(?!\.|$|,)/,"");this.unmasked=e}}else this.unmasked=this.value;this._typing=!1,this.mask(),this.value=this.masked,this._setSelection(),this._focused=!1,this.dispatchEvent(new CustomEvent("pantera:input",{detail:{name:this.getAttribute("name"),unmasked:this.unmasked}}))}}_cancel(){this._unmasked=this._unmaskedBefore,this._canceled=!0}_setSelection(){const e=this.masked;let t=0,s=this._index;for(let i=0;i<e.length;i++){if(t++,e[i].replace(this._regex,"")){if(s--,0===s)break}else;}this.selectionStart=t,this.selectionEnd=t}set unmasked(e){const t=e.replace(this._regex,"");if(this._unmaskedBefore=void 0===this._unmasked?"":this._unmasked,this._unmasked=t,this._buffer=t.split(""),!1===this._initialized||!1===this._typing)return;const s=e.substr(0,this._selection.start);this._index=s.replace(this._regex,"").length}get unmasked(){return this._unmasked}set masked(e){this._lastMasked=this.masked,this._masked=e}get masked(){return this._masked}set value(e){if(!0===this._initialized&&!1===this._focused)return this._unmasked=e.toString(),this.mask(),void(super.value=this.masked);super.value=e}get value(){return!0!==this._typing&&this.unmasked?!0===this._submitMasked?this.masked:this.unmasked:super.value}}const le=re,oe=JSON.parse('[{"prefix":"8","mask":"425 #####","region":"Akmenė","info":"Akmenė"},{"prefix":"8","mask":"315 #####","region":"Alytus","info":"Alytus"},{"prefix":"8","mask":"381 #####","region":"Anykščiai","info":"Anykščiai"},{"prefix":"8","mask":"319 #####","region":"Birštonas","info":"Birštonas"},{"prefix":"8","mask":"450 #####","region":"Biržai","info":"Biržai"},{"prefix":"8","mask":"313 #####","region":"Druskininkai","info":"Druskininkai"},{"prefix":"8","mask":"528 #####","region":"Elektrėnai","info":"Elektrėnai"},{"prefix":"8","mask":"46 ######","region":"Gargždai","info":"Gargždai"},{"prefix":"8","mask":"386 #####","region":"Ignalina","info":"Ignalina"},{"prefix":"8","mask":"349 #####","region":"Jonava","info":"Jonava"},{"prefix":"8","mask":"426 #####","region":"Joniškis","info":"Joniškis"},{"prefix":"8","mask":"447 #####","region":"Jurbarkas","info":"Jurbarkas"},{"prefix":"8","mask":"346 #####","region":"Kaišiadorys","info":"Kaišiadorys"},{"prefix":"8","mask":"37 ######","region":"Kaunas","info":"Kaunas"},{"prefix":"8","mask":"347 #####","region":"Kėdainiai","info":"Kėdainiai"},{"prefix":"8","mask":"427 #####","region":"Kelmė","info":"Kelmė"},{"prefix":"8","mask":"46 ######","region":"Klaipėda","info":"Klaipėda"},{"prefix":"8","mask":"445 #####","region":"Kretinga","info":"Kretinga"},{"prefix":"8","mask":"459 #####","region":"Kupiškis","info":"Kupiškis"},{"prefix":"8","mask":"318 #####","region":"Lazdijai","info":"Lazdijai"},{"prefix":"8","mask":"343 #####","region":"Marijampolė","info":"Marijampolė"},{"prefix":"8","mask":"443 #####","region":"Mažeikiai","info":"Mažeikiai"},{"prefix":"8","mask":"383 #####","region":"Molėtai","info":"Molėtai"},{"prefix":"8","mask":"469 #####","region":"Nida","info":"Nida"},{"prefix":"8","mask":"421 #####","region":"Pakruojis","info":"Pakruojis"},{"prefix":"8","mask":"460 #####","region":"Palanga","info":"Palanga"},{"prefix":"8","mask":"45 ######","region":"Panevėžys","info":"Panevėžys"},{"prefix":"8","mask":"451 #####","region":"Pasvalys","info":"Pasvalys"},{"prefix":"8","mask":"448 #####","region":"Plungė","info":"Plungė"},{"prefix":"8","mask":"319 #####","region":"Prienai","info":"Prienai"},{"prefix":"8","mask":"422 #####","region":"Radviliškis","info":"Radviliškis"},{"prefix":"8","mask":"428 #####","region":"Raseiniai","info":"Raseiniai"},{"prefix":"8","mask":"458 #####","region":"Rokiškis","info":"Rokiškis"},{"prefix":"8","mask":"440 #####","region":"Skuodas","info":"Skuodas"},{"prefix":"8","mask":"345 #####","region":"Šakiai","info":"Šakiai"},{"prefix":"8","mask":"380 #####","region":"Šalčininkai","info":"Šalčininkai"},{"prefix":"8","mask":"41 ######","region":"Šiauliai","info":"Šiauliai"},{"prefix":"8","mask":"449 #####","region":"Šilalė","info":"Šilalė"},{"prefix":"8","mask":"441 #####","region":"Šilutė","info":"Šilutė"},{"prefix":"8","mask":"382 #####","region":"Širvintos","info":"Širvintos"},{"prefix":"8","mask":"387 #####","region":"Švenčionys","info":"Švenčionys"},{"prefix":"8","mask":"446 #####","region":"Tauragė","info":"Tauragė"},{"prefix":"8","mask":"444 #####","region":"Telšiai","info":"Telšiai"},{"prefix":"8","mask":"528 #####","region":"Trakai","info":"Trakai"},{"prefix":"8","mask":"340 #####","region":"Ukmergė","info":"Ukmergė"},{"prefix":"8","mask":"389 #####","region":"Utena","info":"Utena"},{"prefix":"8","mask":"310 #####","region":"Varėna","info":"Varėna"},{"prefix":"8","mask":"342 #####","region":"Vilkaviškis","info":"Vilkaviškis"},{"prefix":"8","mask":"386 #####","region":"Visaginas","info":"Visaginas"},{"prefix":"8","mask":"385 #####","region":"Zarasai","info":"Zarasai"},{"prefix":"8","mask":"5 #######","region":"Vilnius","info":"Vilnius"},{"prefix":"+370","mask":"425 #####","region":"Akmenė","info":"Akmenė"},{"prefix":"+370","mask":"315 #####","region":"Alytus","info":"Alytus"},{"prefix":"+370","mask":"381 #####","region":"Anykščiai","info":"Anykščiai"},{"prefix":"+370","mask":"319 #####","region":"Birštonas","info":"Birštonas"},{"prefix":"+370","mask":"450 #####","region":"Biržai","info":"Biržai"},{"prefix":"+370","mask":"313 #####","region":"Druskininkai","info":"Druskininkai"},{"prefix":"+370","mask":"528 #####","region":"Elektrėnai","info":"Elektrėnai"},{"prefix":"+370","mask":"46 ######","region":"Gargždai","info":"Gargždai"},{"prefix":"+370","mask":"386 #####","region":"Ignalina","info":"Ignalina"},{"prefix":"+370","mask":"349 #####","region":"Jonava","info":"Jonava"},{"prefix":"+370","mask":"426 #####","region":"Joniškis","info":"Joniškis"},{"prefix":"+370","mask":"447 #####","region":"Jurbarkas","info":"Jurbarkas"},{"prefix":"+370","mask":"346 #####","region":"Kaišiadorys","info":"Kaišiadorys"},{"prefix":"+370","mask":"37 ######","region":"Kaunas","info":"Kaunas"},{"prefix":"+370","mask":"347 #####","region":"Kėdainiai","info":"Kėdainiai"},{"prefix":"+370","mask":"427 #####","region":"Kelmė","info":"Kelmė"},{"prefix":"+370","mask":"46 ######","region":"Klaipėda","info":"Klaipėda"},{"prefix":"+370","mask":"445 #####","region":"Kretinga","info":"Kretinga"},{"prefix":"+370","mask":"459 #####","region":"Kupiškis","info":"Kupiškis"},{"prefix":"+370","mask":"318 #####","region":"Lazdijai","info":"Lazdijai"},{"prefix":"+370","mask":"343 #####","region":"Marijampolė","info":"Marijampolė"},{"prefix":"+370","mask":"443 #####","region":"Mažeikiai","info":"Mažeikiai"},{"prefix":"+370","mask":"383 #####","region":"Molėtai","info":"Molėtai"},{"prefix":"+370","mask":"469 #####","region":"Nida","info":"Nida"},{"prefix":"+370","mask":"421 #####","region":"Pakruojis","info":"Pakruojis"},{"prefix":"+370","mask":"460 #####","region":"Palanga","info":"Palanga"},{"prefix":"+370","mask":"45 ######","region":"Panevėžys","info":"Panevėžys"},{"prefix":"+370","mask":"451 #####","region":"Pasvalys","info":"Pasvalys"},{"prefix":"+370","mask":"448 #####","region":"Plungė","info":"Plungė"},{"prefix":"+370","mask":"319 #####","region":"Prienai","info":"Prienai"},{"prefix":"+370","mask":"422 #####","region":"Radviliškis","info":"Radviliškis"},{"prefix":"+370","mask":"428 #####","region":"Raseiniai","info":"Raseiniai"},{"prefix":"+370","mask":"458 #####","region":"Rokiškis","info":"Rokiškis"},{"prefix":"+370","mask":"440 #####","region":"Skuodas","info":"Skuodas"},{"prefix":"+370","mask":"345 #####","region":"Šakiai","info":"Šakiai"},{"prefix":"+370","mask":"380 #####","region":"Šalčininkai","info":"Šalčininkai"},{"prefix":"+370","mask":"41 ######","region":"Šiauliai","info":"Šiauliai"},{"prefix":"+370","mask":"449 #####","region":"Šilalė","info":"Šilalė"},{"prefix":"+370","mask":"441 #####","region":"Šilutė","info":"Šilutė"},{"prefix":"+370","mask":"382 #####","region":"Širvintos","info":"Širvintos"},{"prefix":"+370","mask":"387 #####","region":"Švenčionys","info":"Švenčionys"},{"prefix":"+370","mask":"446 #####","region":"Tauragė","info":"Tauragė"},{"prefix":"+370","mask":"444 #####","region":"Telšiai","info":"Telšiai"},{"prefix":"+370","mask":"528 #####","region":"Trakai","info":"Trakai"},{"prefix":"+370","mask":"340 #####","region":"Ukmergė","info":"Ukmergė"},{"prefix":"+370","mask":"389 #####","region":"Utena","info":"Utena"},{"prefix":"+370","mask":"310 #####","region":"Varėna","info":"Varėna"},{"prefix":"+370","mask":"342 #####","region":"Vilkaviškis","info":"Vilkaviškis"},{"prefix":"+370","mask":"386 #####","region":"Visaginas","info":"Visaginas"},{"prefix":"+370","mask":"385 #####","region":"Zarasai","info":"Zarasai"},{"prefix":"+370","mask":"5 #######","region":"Vilnius","info":"Vilnius"},{"prefix":"+370","mask":"706 #####","region":"Oficialus","info":""},{"prefix":"8","mask":"6## #####","region":"mobile","info":"Lietuva"},{"prefix":"+370","mask":"6## #####","region":"mobile","info":"Lietuva"},{"prefix":"+371","mask":"","region":"Latvija","info":"Latvija"},{"prefix":"+44","mask":"","region":"Anglija","info":"Anglija"}]');function de(e,t){let s=[];for(let i=e;i<=t;i++)s.push(i);return s}let ce={BACKSPACE:8,TAB:9,F:[...de(112,143)],ENTER:13,ESC:27,SPACE:23,END:35,HOME:36,DELETE:46,PLUS:[107,187],MINUS:[109,189],ARROW:[37,38,39,40],NUM:[...de(48,57),...de(96,105)],ALPHA:de(65,90),COMMA:[110,180,188,190]};ce.SPECIAL=[...ce.F,...ce.ARROW,ce.BACKSPACE,ce.DELETE,ce.HOME,ce.END,ce.ENTER,ce.TAB],ce.NUMERIC=[...ce.NUM,...ce.COMMA,...ce.MINUS],ce.LETTERS=[...ce.ALPHA];const he=ce;class ue extends le{constructor(){super(...arguments),this._regex=/[^\\+0-9]/g,this._masks=oe,this._submitMasked=!1,this._keydown=[...he.SPECIAL,...he.PLUS,...he.NUMERIC]}mask(){const e=this.unmasked,t=this._find(e);this.masked=t}_find(e){const t=this._masks,s=e.replace(/\D/g,""),i=t.find((t=>{const i=t.mask.replace(/\D/g,"");if(e.startsWith(t.prefix)&&s.startsWith(t.prefix.replace("+","")+i))return!0}));if(void 0===i)return this._found=null,this._validation.info="","++"==e&&(e="+"),e;if(this._found=i,this._validation.info=i.info,(i.prefix.startsWith("+")&&e.length>12||i.prefix.startsWith("8")&&e.length>9)&&this._cancel(),i.prefix.startsWith("8")||i.prefix.startsWith("+370")){const e=i.mask.split(" ");let t=i.prefix,a=s.substr(t.length+(i.prefix.startsWith("+")?-1:0));return e.forEach((e=>{t+=" "+a.substr(0,e.length),a=a.substr(e.length)})),t}{let t=i.prefix;return t+=" "+e.substr(i.prefix.length,12),t}}_valid(){if(this._found&&this._found.mask.length>0){const t=this._found;let s=(" "+t.mask).slice(1);s=s.replace(" ","");for(var e=this.value;e.includes(" ");)e=e.replace(" ","");if(e.length-t.prefix.length!=s.length)return this._validation.message="Įvedete per trumpą telefono numerį",!1}return!0}}customElements.define("number-phone",ue,{extends:"input"});class me extends le{constructor(){super(),this._regex=/[^0-9.,-]/g,this._radix=".",this._minus="-",this._negative=!0,this._number=!0,this._keydown=[...he.SPECIAL,...he.NUMERIC],this._submitMasked=!1}connectedCallback(){"true"==this.dataset.negative?this._negative=!0:this._negative=!1,this._radix=this.dataset.radix||".","."==this._radix?this._comma=",":this._comma=".",this._min=parseFloat(this.dataset.min),this._max=parseFloat(this.dataset.max),this._decimalsCount=parseFloat(this.dataset.decimals),super.connectedCallback()}mask(){let e=this.unmasked.replace(this._comma,this._radix),t=e.split(this._radix),s=t[0],i=t.length>1?this._radix+t[1]:"",a=/(\d+)(\d{3})/;if(!0!=!!this.dataset.noformat)for(;a.test(s);)s=s.replace(a,"$1 $2");let n=0,r=0;for(let s=0;s<e.length;s++){const i=e[s];if(i!=this._radix&&i!=this._comma||n++,i==this._minus&&r++,s>0&&i==this._minus)return void this._cancel();if(i==this._minus&&!1===this._negative)return void this._cancel();if(r>1)return void this._cancel();if(n>1)return void this._cancel();if(null!=t[1]&&t[1].length>this._decimalsCount)return void this._cancel();if(parseFloat(e)>this._max)return void this._cancel()}let l=s+i;this.masked=l}_valid(){return this._validation.message=null,"0."==this.unmasked||"0.0"==this.unmasked||"0.00"==this.unmasked||"-"==this.unmasked||"-0"==this.unmasked||"-00"==this.unmasked||"-000"==this.unmasked||"-0."==this.unmasked||"-0.0"==this.unmasked||"-0.00"==this.unmasked||"-.0"==this.unmasked||"-.00"==this.unmasked||"-."==this.unmasked?(this._validation.message="Įvestas skaičius nėra validus",!1):!(parseFloat(this.unmasked)<this._min)||(this._validation.message="Minimali galima reikšmė: "+this._min.toString(),!1)}get valueAsNumber(){return""===this.unmasked||"0"==this.unmasked?0:Number(this.unmasked)}}customElements.define("number-simple",me,{extends:"input"});class pe extends me{constructor(){super(...arguments),this._negative=!1}connectedCallback(){this._currency=this.dataset.currency||"€",super.connectedCallback(),"true"==this.dataset.negative&&(this._negative=!0)}mask(){super.mask(),!0!==this._canceled&&(this.masked=this.masked+" "+this._currency)}}customElements.define("number-money",pe,{extends:"input"});class ve extends me{constructor(){super(),this._decimals=!0,this._decimalsCount=2,this._min=0,this._max=100,this._submitMasked=!1}connectedCallback(){this._radix=this.dataset.radix||".","."===this._radix?this._comma=",":this._comma=".","true"==this.dataset.negative&&(this._negative=!0),!0===this._negative&&(this._min=-100),null!==this.dataset.max&&(this._max=this.dataset.max),super.connectedCallback()}mask(){const e=this.unmasked.replace(this._comma,this._radix);let t=0;for(let s=0;s<e.length;s++){const i=e[s];if(i!==this._radix&&i!==this._comma||t++,s>0&&"-"===i)return void this._cancel();if(!1===this._decimals&&(i===this._radix||i===this._comma))return void this._cancel();if(t>1)return void this._cancel();let a=this.unmasked.split(this._radix);if(null!=a[1]&&a[1].length>this._decimalsCount)return void this._cancel()}const s=parseFloat(e);s>this._max||s<this._min?this._cancel():this.masked=e.toString()+" %"}_valid(){return!0}}customElements.define("number-percents",ve,{extends:"input"});class ge extends me{constructor(){super(...arguments),this._negative=!1,this._calcOnClick=!0,this._click=e=>{if(0!=e.button)return;const t=e.currentTarget.classList.contains("up")?"+":"-";clearTimeout(this._timeout),clearInterval(this._interval),this._calcOnClick&&this._calculate(t),this._calcOnClick=!0},this._hold=e=>{if(0!=e.button)return;const t=e.currentTarget.classList.contains("up")?"+":"-";this._timeout=setTimeout((()=>{this._interval=setInterval((()=>{this._calculate(t),this._calcOnClick=!1}),100)}),500)}}_init(){super._init();const e=this.nextElementSibling,t=e.nextElementSibling;e.addEventListener("click",this._click),t.addEventListener("click",this._click),e.addEventListener("mousedown",this._hold),t.addEventListener("mousedown",this._hold),this.addEventListener("change",this._ifEmpty.bind(this)),this._datastep=parseInt(this.dataset.step)||1,this._datamin=parseInt(this.dataset.min)||0,this._datamax=parseInt(this.dataset.max)||Number.MAX_SAFE_INTEGER}_ifEmpty(){""===this.value&&(this.value=this._datamin.toString(),this.dispatchEvent(new Event("change")))}_calculate(e){let t;const s=parseInt(this.value);switch(e){case"+":t=(isNaN(s)?0:s)+this._datastep,t>this._datamax?this.value=this._datamax.toString():this.value=t.toString();break;case"-":t=(isNaN(s)?0:s)-this._datastep,t<this._datamin?this.value=this._datamin.toString():this.value=t.toString()}this.setAttribute("value",this.value),this.dispatchEvent(new Event("change",{bubbles:!0}))}}customElements.define("number-spin",ge,{extends:"input"});class fe extends HTMLInputElement{connectedCallback(){this.wrap=this.closest(".form-group"),console.log("Naujas komponentas: xnumber_plate"),console.log(this)}}customElements.define("code-car",fe,{extends:"input"});class ye extends T.Z{constructor(){super(),this._keydown=[...he.SPECIAL,...he.NUM],this._validation.default="Netinkamai įvestas įmonės kodas."}_init(){this.addEventListener("keyup",(()=>{9===this.value.length&&this._validate()}))}_valid(){const e=this.value;if(!e||this.dataset.whitelist===e)return!0;if(!0===isNaN(parseInt(e))||9!==e.length)return this._validation.message="Įmonės kodas per trumpas",!1;let t=[],s=[],i=0;if(9===e.length){for(let i=0;i<9;i++)t[i]=e.substring(i,i+1),i<8?s[i]=Number(t[i])*(i+1):8===i&&(s[i]=Number(t[i]));for(let e=0;e<8;e++)i+=s[e];return i%=11,!(i>9)&&i===s[8]}}}customElements.define("code-company",ye,{extends:"input"});const be=JSON.parse('{"LT":{"name":"Lietuva","length":20,"format":"/\\\\S{4}(?=.)/","code":5,"banks":{"10100":"Lietuvos bankas","10101":"Lietuvos bankas","10110":"Lietuvos bankas","10900":"Lietuvos bankas","20900":"Bigbank AS filialas","21200":"Svenska Handelsbanken AB Lietuvos filialas","21400":"Luminor Bank AS Lietuvos skyrius","21500":"OP Corporate Bank plc Lietuvos filialas","21700":"AS Industra Bank Lietuvos filialas","22500":"AB Fjord Bank","22600":"PayRay, UAB","30200":"Perlas Finance, UAB","30300":"AB Lietuvos paštas","30500":"Foxpay, UAB ","30600":"SatchelPay, UAB","30700":"Valyuz, UAB","30800":"NexPay UAB","30900":"UAB Walletto","31000":"UAB Contabilita","31100":"Maneuver LT, UAB","31200":"UAB Paytend Europe ","31300":"UAB ZEN.COM","31400":"PCS Transfer UAB","31500":"UAB Drauskaita","31600":"Verse Payments Lithuania UAB","31700":"UAB Shift Financial Services LT  ","31800":"TBF Finance, UAB","31801":"TBF Finance, UAB","31900":"TeslaPay, UAB","32000":"Wallter UAB","32200":"UAB Phoenix Payments","32300":"International Payment Union, UAB ","32400":"TransferGo Lithuania UAB","32500":"Revolut Payments UAB","32600":"Rebellion Fintech Services UAB","32700":"UAB DSBC Financial Europe","32800":"Earthport Payment Services UAB","32900":"Kuan Financial, UAB ","33000":"Wittix, UAB","33100":"ValorPay UAB","33200":"UAB SONECT Europe","33300":"UAB Silvergate LT","33400":"UAB Uplata EU","33500":"UAB epayblock","33700":"SumUp EU Payments, UAB","33800":"Opal Transfer EU, UAB","33900":"UAB Simplex Payment Services","34000":"UAB Guru Pay","34100":"CBI Money UAB","34200":"Banxe, UAB","34300":"UAB Paystra","34600":"Nikulipe UAB ","34700":"Clearshift, UAB","34800":"UAB Travel Union","35000":"Paysera LT, UAB","35100":"Secure Nordic Payments UAB","35200":"NEO Finance, UAB","35300":"UAB Alternative Payments","35400":"UAB Argentum mobile","35500":"UAB Pervesk","35501":"UAB Pervesk","35600":"UAB Finolita Unio ","35700":"Via Payments, UAB","35800":"Bruc Bond, UAB","35900":"UAB NIUM EU","36000":"UAB Mobilieji mokėjimai","36400":"UAB International Fintech","36600":"UAB deVere E-Money”","36700":"UAB Pyrros Lithuania","36900":"TRUSTCOM FINANCIAL UAB","37000":"UAB Elektroninių mokėjimų agentūra","37100":"UAB Seven Seas Europe ","37101":"UAB Seven Seas Europe ","37200":"UAB Glocash Payment","37300":"Majestic Financial, UAB","37400":"UAB ConnectPay","37500":"Verified Payments, UAB","37800":"Transactive Systems UAB","38500":"Galperin, UAB","38700":"UAB PanPay Europe","38800":"GlobalNetint, UAB","38900":"UAB SAFU.COM","39100":"UAB IBS Lithuania","39200":"Revolut Limited","39600":"Contis Financial Services Ltd","39700":"SIA Transact Pro","40100":"Luminor Bank AS Lietuvos skyrius","50100":"Lietuvos centrinė kredito unija","50101":"Kredito unija Sūduvos parama","50102":"Šilutes kredito unija","50103":"Radviliškio kredito unija","50104":"Vilkaviškio kredito unija","50105":"Plungės kredito unija","50106":"Kredito unija Ebitum","50108":"ARKU kredito unija","50109":"Akademinė kredito unija","50110":"Panevėžio kredito unija","50111":"Centro kredito unija","50112":"Kredito unija Tikroji viltis","50113":"Kredito unija Germanto lobis","50114":"Kredito unija Kupiškėnų taupa","50115":"Širvintų kredito unija ","50117":"Kredito unija Zanavyku bankelis","50118":"Vytauto Didžiojo kredito unija","50119":"Pakruojo ūkininkų kredito unija","50120":"Kredito unija Vievio taupa","50121":"Aukštaitijos kredito unija","50122":"Kelmės kredito unija","50123":"Kredito unija Prienų taupa","50124":"Pasvalio kredito unija","50125":"Kredito unija DELTA","50126":"Biržų kredito unija","50127":"Kauno kredito unija","50128":"Tauragės kredito unija","50129":"Šilalės kredito unija","50130":"Anykščių kredito unija","50131":"Achemos kredito unija","50132":"Kredito unija Jonavos žemė","50133":"Jurbarko kredito unija","50134":"Ukmergės ūkininkų kredito unija","50135":"Kauno regiono kredito unija","50136":"Palangos kredito unija","50138":"Kretingos kredito unija","50139":"Raseinių kredito unija","50140":"Pagėgių kredito unija","50143":"Sedos kredito unija","50144":"Ignalinos kredito unija","50145":"Utenos kredito unija","50146":"Mažeikių kredito unija","50147":"Joniškio kredito unija","50149":"Druskininkų kredito unija","50151":"Trakų kredito unija","50152":"Alytaus kredito unija","50153":"Kredito unija Gargždų taupa","50154":"Kredito unija Mėmelio taupomoji kasa","50156":"Grigiškių kredito unija","50158":"Varėnos kredito unija","50159":"Kėdainių krašto kredito unija","50160":"Rato kredito unija","50162":"Pareigūnų kredito unija","50163":"Klaipėdos kredito unija","50164":"Gyventojų ir smulkaus verslo kredito unija ","50165":"Šeimos kredito unija","50166":"Kredito unija Neris","50167":"Vilniaus kredito unija","50168":"Kredito unija Magnus","50200":"Jungtinė centrinė kredito unija","50300":"AB Mano bankas","50301":"AB Mano bankas","50500":"Kredito unija Taupa","50800":"VILNIAUS  KREDITO UNIJA","51400":"Kredito unija Magnus","51500":"LTL  kredito unija","51700":"Kredito unija Saulėgrąža","51900":"Rato kredito unija","60024":"GF bankas, UAB  ","70440":"AB SEB bankas","70500":"AB Šiauliu bankas","70700":"Revolut Bank, UAB","71100":"European Merchant Bank","71800":"AB Šiauliu bankas","71802":"AB Šiauliu bankas","71803":"AB Šiauliu bankas","71804":"AB Šiauliu bankas","71805":"AB Šiauliu bankas","71806":"AB Šiauliu bankas","71807":"AB Šiauliu bankas","71808":"AB Šiauliu bankas","71809":"AB Šiauliu bankas","71810":"AB Šiauliu bankas","71811":"AB Šiauliu bankas","71812":"AB Šiauliu bankas","71813":"AB Šiauliu bankas","71814":"AB Šiauliu bankas","71815":"AB Šiauliu bankas","71816":"AB Šiauliu bankas","71817":"AB Šiauliu bankas","71818":"AB Šiauliu bankas","71819":"AB Šiauliu bankas","71820":"AB Šiauliu bankas","71821":"AB Šiauliu bankas","71822":"AB Šiauliu bankas","71823":"AB Šiauliu bankas","71824":"AB Šiauliu bankas","71825":"AB Šiauliu bankas","71826":"AB Šiauliu bankas","71827":"AB Šiauliu bankas","71828":"AB Šiauliu bankas","71829":"AB Šiauliu bankas","71830":"AB Šiauliu bankas","71899":"AB Šiauliu bankas","72300":"UAB Medicinos bankas","72900":"AB Citadele bankas","73000":"Swedbank, AB","74000":"Danske Bank A/S Lietuvos filialas","90577":"LCVPD asmeninių sąskaitų registras","91001":"Orion Securities, UAB FMI","91002":"Macte Invest FM AB"}}}');const xe=s.t(be,2);class ke extends le{mask(){const e=this.unmasked.toUpperCase(),t=this._getBank(e);if(!t)return void(this._validation.info="");if(this._length=t.length,e.length>this._length)return void this._cancel();const s=e.replace(t.format,"$& ");this._validation.info=t.bank?t.bank:"",this.masked=s}_valid(){const e=this._getBank(this.unmasked);return!(e.length&&e.length>this.unmasked.length)||(this._validation.message="Sąskaitos numeris per trumpas",!1)}_getBank(e){const t=e.substr(0,2).toUpperCase(),s=Object.assign({},xe[t]);if(s.banks&&e.length>8){const t=e.substr(4,s.code),i=s.banks[t];s.bank=i}return delete s.banks,s}}customElements.define("code-iban",ke,{extends:"input"});class _e extends le{constructor(){super(...arguments),this._regex=/[^0-9.,]/g}mask(){const e=this.unmasked;if(this.dotCount=0,this.commaCount=0,!e)return void(this.masked=e);for(let t=0;t<e.length;t++){const s=e[t];let i=e[t-1];if("."==s&&this.dotCount++,","==s&&this.commaCount++,"."==e[0])return;if("."==s&&i==s)return;if(this.commaCount>1)return;if(","==s){const t=e.split(",");for(let e=0;e<t.length;e++){const e=t[1].split(".");for(let t=0;t<e.length;t++){if(parseInt(e[t])>255)return}this.masked=e.join(".")}this.masked=t.join(",")}}const t=e.split(".");for(let e=0;e<t.length;e++){if(parseInt(t[e])>255)return}this.masked=t.join(".")}_valid(){this._validation.message=null;let e=1,t=this.unmasked;if(this.commaCount>1)return this._validation.message="Įvestas IP adresas nėra validus",!1;this.unmasked.includes(",")&&(e=2,t=t.replace(",","."));let s=t.split(".");if(!(parseInt(s[7])>255)){for(let e=0;e<s.length;e++)if(""==s[e])return this._validation.message="Įvestas IP adresas nėra validus",!1;return this.dotCount==3*e&&s.length==4*e||(this._validation.message="Įvestas IP adresas nėra validus",!1)}}}customElements.define("code-ip",_e,{extends:"input"});class Le extends T.Z{constructor(){super(),this._keydown=[...he.SPECIAL,...he.NUM],this._validation.default="Netinkamas asmens kodas"}_init(){this.addEventListener("keyup",(()=>{11===this.value.length&&this._validate()}))}_valid(){const e=this.value;if(!e)return!0;if(!0===isNaN(parseInt(e))||11!=e.length)return this._validation.message="Asmens kodas per trumpas",!1;let t=e.split("").map((e=>parseInt(e))),s=[],i=t[10],a=parseInt(`${t[1]}${t[2]}`);if(t[0]<3&&t[0]>6)return!1;if((5===t[0]||6===t[0])&&a>25)return!1;let n=parseInt(`${t[3]}${t[4]}`),r=parseInt(`${t[5]}${t[6]}`);if(n>12||r>31||0===n||0===r)return!1;if(2===n&&r>29)return!1;if([4,6,9,11].includes(n)&&r>30)return!1;if(2===n&&29===r&&a%4!=0)return!1;for(let e=0;e<11;e++)e<9?s[e]=t[e]*(e+1):9===e&&(s[e]=t[e]);let l=s.reduce(((e,t)=>e+t),0);if(l%=11,10!==l)return l===i;if(10===l&&0==i)return!0;let o=[3,4,5,6,7,8,9,1,2,3];l=0;for(let e=0;e<10;e++)l+=o[e]*t[e];return l%11===i}}customElements.define("code-person",Le,{extends:"input"});const Ee={AD:/^(\d{3})$/,AM:/^(\d{6})$/,AR:/^([A-Z]\d{4}[A-Z]{3})$/,AT:/^(\d{4})$/,AU:/^(\d{4})$/,AX:/^(\d{5})$/,AZ:/^(\d{4})$/,BA:/^(\d{5})$/,BB:/^(\d{5})$/,BD:/^(\d{4})$/,BE:/^(\d{4})$/,BG:/^(\d{4})$/,BH:/^(\d{3}\d?)$/,BM:/^([A-Z]{2}\d{2})$/,BN:/^([A-Z]{2}\d{4})$/,BR:/^(\d{8})$/,BY:/^(\d{6})$/,CA:/^([ABCEGHJKLMNPRSTVXY]\d[ABCEGHJKLMNPRSTVWXYZ]) ?(\d[ABCEGHJKLMNPRSTVWXYZ]\d)$/,CH:/^(\d{4})$/,CL:/^(\d{7})$/,CN:/^(\d{6})$/,CR:/^(\d{4})$/,CU:/^(\d{5})$/,CV:/^(\d{4})$/,CX:/^(\d{4})$/,CY:/^(\d{4})$/,CZ:/^(\d{5})$/,DE:/^(\d{5})$/,DK:/^(\d{4})$/,DO:/^(\d{5})$/,DZ:/^(\d{5})$/,EC:/^([a-zA-Z]\d{4}[a-zA-Z])$/,EE:/^(\d{5})$/,EG:/^(\d{5})$/,ES:/^(\d{5})$/,ET:/^(\d{4})$/,FI:/^(\d{5})$/,FM:/^(\d{5})$/,FO:/^(\d{3})$/,FR:/^(\d{5})$/,GB:/^(([A-Z]\d{2}[A-Z]{2})|([A-Z]\d{3}[A-Z]{2})|([A-Z]{2}\d{2}[A-Z]{2})|([A-Z]{2}\d{3}[A-Z]{2})|([A-Z]\d[A-Z]\d[A-Z]{2})|([A-Z]{2}\d[A-Z]\d[A-Z]{2})|(GIR0AA))$/,GE:/^(\d{4})$/,GF:/^((97|98)3\d{2})$/,GG:/^(([A-Z]\d{2}[A-Z]{2})|([A-Z]\d{3}[A-Z]{2})|([A-Z]{2}\d{2}[A-Z]{2})|([A-Z]{2}\d{3}[A-Z]{2})|([A-Z]\d[A-Z]\d[A-Z]{2})|([A-Z]{2}\d[A-Z]\d[A-Z]{2})|(GIR0AA))$/,GL:/^(\d{4})$/,GP:/^((97|98)\d{3})$/,GR:/^(\d{5})$/,GT:/^(\d{5})$/,GU:/^(969\d{2})$/,GW:/^(\d{4})$/,HN:/^([A-Z]{2}\d{4})$/,HR:/^(\d{5})$/,HT:/^(\d{4})$/,HU:/^(\d{4})$/,ID:/^(\d{5})$/,IL:/^(\d{5})$/,IM:/^(([A-Z]\d{2}[A-Z]{2})|([A-Z]\d{3}[A-Z]{2})|([A-Z]{2}\d{2}[A-Z]{2})|([A-Z]{2}\d{3}[A-Z]{2})|([A-Z]\d[A-Z]\d[A-Z]{2})|([A-Z]{2}\d[A-Z]\d[A-Z]{2})|(GIR0AA))$/,IN:/^(\d{6})$/,IQ:/^(\d{5})$/,IR:/^(\d{10})$/,IS:/^(\d{3})$/,IT:/^(\d{5})$/,JE:/^(([A-Z]\d{2}[A-Z]{2})|([A-Z]\d{3}[A-Z]{2})|([A-Z]{2}\d{2}[A-Z]{2})|([A-Z]{2}\d{3}[A-Z]{2})|([A-Z]\d[A-Z]\d[A-Z]{2})|([A-Z]{2}\d[A-Z]\d[A-Z]{2})|(GIR0AA))$/,JO:/^(\d{5})$/,JP:/^(\d{7})$/,KE:/^(\d{5})$/,KG:/^(\d{6})$/,KH:/^(\d{5})$/,KP:/^(\d{6})$/,KR:/^(\d{6})$/,KW:/^(\d{5})$/,KZ:/^(\d{6})$/,LA:/^(\d{5})$/,LB:/^(\d{4}(\d{4})?)$/,LI:/^(\d{4})$/,LK:/^(\d{5})$/,LR:/^(\d{4})$/,LS:/^(\d{3})$/,LT:/^(\d{5})$/,LU:/^(\d{4})$/,LV:/^(\d{4})$/,MA:/^(\d{5})$/,MC:/^(\d{5})$/,MD:/^(\d{4})$/,ME:/^(\d{5})$/,MG:/^(\d{3})$/,MK:/^(\d{4})$/,MM:/^(\d{5})$/,MN:/^(\d{6})$/,MQ:/^(\d{5})$/,MT:/^([A-Z]{3}\d{2}\d?)$/,MV:/^(\d{5})$/,MX:/^(\d{5})$/,MY:/^(\d{5})$/,MZ:/^(\d{4})$/,NC:/^(\d{5})$/,NE:/^(\d{4})$/,NF:/^(\d{4})$/,NG:/^(\d{6})$/,NI:/^(\d{7})$/,NL:/^(\d{4}[A-Z]{2})$/,NO:/^(\d{4})$/,NP:/^(\d{5})$/,NZ:/^(\d{4})$/,OM:/^(\d{3})$/,PF:/^((97|98)7\d{2})$/,PG:/^(\d{3})$/,PH:/^(\d{4})$/,PK:/^(\d{5})$/,PL:/^(\d{5})$/,PM:/^(97500)$/,PR:/^(\d{9})$/,PT:/^(\d{7})$/,PW:/^(96940)$/,PY:/^(\d{4})$/,RE:/^((97|98)(4|7|8)\d{2})$/,RO:/^(\d{6})$/,RS:/^(\d{6})$/,RU:/^(\d{6})$/,SA:/^(\d{5})$/,SD:/^(\d{5})$/,SE:/^(\d{5})$/,SG:/^(\d{6})$/,SH:/^(STHL1ZZ)$/,SI:/^(\d{4})$/,SK:/^(\d{5})$/,SM:/^(4789\d)$/,SN:/^(\d{5})$/,SO:/^([A-Z]{2}\d{5})$/,SV:/^(\d{4})$/,SZ:/^([A-Z]\d{3})$/,TC:/^(TKCA 1ZZ)$/,TH:/^(\d{5})$/,TJ:/^(\d{6})$/,TM:/^(\d{6})$/,TN:/^(\d{4})$/,TR:/^(\d{5})$/,TW:/^(\d{5})$/,UA:/^(\d{5})$/,US:/^\d{5}(-\d{4})?$/,UY:/^(\d{5})$/,UZ:/^(\d{6})$/,VA:/^(\d{5})$/,VE:/^(\d{4})$/,VI:/^\d{5}(-\d{4})?$/,VN:/^(\d{6})$/,WF:/^(986\d{2})$/,YT:/^(\d{5})$/,ZA:/^(\d{4})$/,ZM:/^(\d{5})$/,CS:/^(\d{5})$/};class we extends le{constructor(){super(),this._keydown=[...he.SPECIAL,...he.NUM,...he.LETTERS],this._regex=/[^0-9a-z-]/gi,this._default_country="LT",this._default_rule=Ee[this._default_country],this.country=null,this.rule=null,this._submitMasked=!1}manageEvents(){super.manageEvents(),this.addEventListener("blur",(e=>{this.value&&this._validate()}))}mask(){let e=this.unmasked.toUpperCase(),t=e.substr(0,2),s=e.substr(2);t in Ee?(this.country=t,this.rule=Ee[t]):(s=e,this.country=this._default_country,this.rule=this._default_rule),this.code=s,this.rule.exec(s)?this.masked=e:this.masked=this.unmasked}_info(){super._info(`Nustatyta šalis ${this.country}, jei nori pakeisti šalį, pradžioje nuruodykite šalies pirmas dvi raides`)}_valid(){return!!this.rule.exec(this.code)||(this._validation.validity=!1,this._validation.message="Neteisingas pašto kodas",this._info(),!1)}}customElements.define("code-post",we,{extends:"input"});class Se extends HTMLInputElement{connectedCallback(){this.init()}init(){this.mask(),this.initInputEvents()}mask(){let e=this.selectionStart,t=this.value.length;if(this.value.substring(0,2).localeCompare("LT")){let e=this.value;e=this.removeNonDigits(e),this.value=e.substring(0,25)}else{let e=this.value;e=this.removeNonDigits(e),this.value=e.substring(0,14)}let s=this.value.length-t;this.selectionEnd=e+s}removeNonDigits(e){let t=e.substring(0,2),s=e.substring(2,e.length);return t=t.toUpperCase(),s=s.replace(/\D/g,""),t.concat(s)}initInputEvents(){this.oninput=()=>this.mask(),this.onkeydown=e=>{this.value.length>=14&&(0==this.value.substring(0,2).localeCompare("LT")||this.value.length>=25)&&/\d/.test(e.key)&&this.selectionStart===this.selectionEnd&&e.preventDefault()}}}customElements.define("code-vat",Se,{extends:"input"});class qe extends HTMLInputElement{constructor(){super(),this._validation={message:null,default:null,error:!1,validity:!1,info:null}}connectedCallback(){this._init()}_info(){this._validation.info}_validate(){this._validation.message=null,this._validation.validity=!1;let e=this.checkValidity();return!1===e?(this._validation.validity=!0,this._error(!1),!1):!0===e&&this.hasAttribute("maxlength")&&this.value.length>this.maxLength?(this._validation.message="Maksimalus lauko ilgis "+this.maxLength.toString(),this._error(!1),!1):(e=this._valid(),!1===e?(this._error(!1),!1):(this._error(!0),e))}_error(e){let t,s=this.parentNode.querySelector("label.is-invalid"),i=this.closest(".checkbox-wrap");if(i&&(s=i.querySelector("label.is-invalid")),!1===e)return this._validation.error=!0,t=!0===this._validation.validity?"Privalomas patvirtinimas":this._validation.message||this._validation.default,s.classList.remove("d-none"),void(s.textContent=t);!0===this._validation.error&&(s.textContent=null,s.classList.remove("d-none"),this._validation.error=!1)}}const Ce=qe;class Te extends Ce{connectedCallback(){setTimeout((()=>this._init()))}_init(){}_valid(){return 1!=this.required||0!=this.checked}get value(){return!0===this.checked?"1":"0"}set value(e){super.value=e}}customElements.define("checkbox-simple",Te,{extends:"input"});class Ae extends Ce{_init(){"true"!=this.dataset.filter||this.addEventListener("click",(()=>{let e=this.name,t=this.value;d.X.url.update(e,t)}))}_valid(){return!0}get value(){return this.checked?this.getAttribute("value"):null}}customElements.define("checkbox-value",Ae,{extends:"input"});class Ie extends Ce{_init(){this.dataset.submit&&this.submit_listener()}_valid(){return!0}get value(){return!0===this.checked?"1":"0"}set value(e){super.value=e}submit_listener(){let e=this.dataset.param?{_param:this.dataset.param}:{},t=this;this.addEventListener("click",(s=>{let a={json:!0,url:this.dataset.url,submitBtn:this,reload:{table:this.dataset.reloadTable}};e[this.name]=this.checked?this.value:0,this.checked=!this.checked,new xcrud.post(this.dataset.submit,e,a,(e=>{t.checked=!t.checked,i.q.notify.json(e,{modalClose:e.modalClose})}))}))}}customElements.define("checkbox-switch-simple",Ie,{extends:"input"});class De extends Ce{_init(){}_valid(){return!0}get value(){return!0===this.checked?"1":"0"}}customElements.define("checkbox-switch-inside",De,{extends:"input"});class $e extends Ce{connectedCallback(){setTimeout((()=>this._init()))}_init(){this.toggleItem()}_valid(){return!0}get value(){return!0===this.checked?"1":"0"}toggleItem(){if(this.dataset.toggle){var e=[];this.dataset.toggle.split(",").forEach(((t,s)=>e.push({item:document.querySelector(t.replace("!","")),reverse:"!"===t[0]})));var t=()=>{for(let t=0;t<e.length;t++){let s=e[t].reverse,i=e[t].item;i&&(1==this.checked?!0===s?(i.disabled=!1,i.classList.remove("d-none")):(i.disabled=!0,i.classList.add("d-none")):!0===s?(i.disabled=!0,i.classList.add("d-none")):(i.disabled=!1,i.classList.remove("d-none")))}};this.addEventListener("change",t),t()}}}customElements.define("checkbox-switch-material",$e,{extends:"input"});var Me=s(9009);class je extends D{constructor(){super(),this._regex=/^[1-2][0-9][0-9][0-9]-[0-1][0-9]-[0-3][0-9]$/}_init(){this.picker_box=new Be(this._box,this);const{control:e,listen:t,disabledFrom:s,disabledTo:i}=this.dataset;if(this.custom_selector=void 0!==this.dataset.cs,e){let t=document.querySelector(1==this.custom_selector?e:`[name="${e}"]`);this.controlEl=t,t.value&&this.disableFrom(t.value)}if(t){let e=document.querySelector(1==this.custom_selector?t:`[name="${t}"]`);this.listenEl=e,e.value&&(this.disableTo(e.value),this.picker_box.date.year=parseInt(e.value.slice(0,4)),this.picker_box.date.month=parseInt(e.value.slice(5,7)),this.picker_box.inputs.year.value=e.value.slice(0,4),this.picker_box.inputs.month.value=parseInt(e.value.slice(5,7)).toString(),this.picker_box.redraw())}s&&this.disableFrom(s),i&&(this.disabledTo=i,this.controlEl&&(this.controlEl.disabledTo=i),this.listenEl&&(this.listenEl.disabledTo=i),this.picker_box.redraw(i)),this.pickerShowDate("")}pickerShowDate(e){let t,s=new Date;if(""==e){let e=this.dataset.disabledTo;t=new Date(e),this.listenEl&&(t=new Date(this.listenEl.dataset.disabledTo)),s<t&&(this.picker_box.date.year=t.getFullYear(),this.picker_box.date.month=t.getMonth()+1,this.picker_box.inputs.year.value=t.getFullYear().toString(),this.picker_box.inputs.month.value=(t.getMonth()+1).toString(),this.picker_box.redraw())}else{t=new Date(e),s<t&&(this.controlEl.picker_box.date.year=t.getFullYear(),this.controlEl.picker_box.date.month=t.getMonth()+1,this.controlEl.picker_box.inputs.year.value=t.getFullYear().toString(),this.controlEl.picker_box.inputs.month.value=(t.getMonth()+1).toString(),this.controlEl.picker_box.checkDisabledTo(),this.controlEl.picker_box.redraw())}}disableFrom(e){this.disabledFrom=e}disableTo(e){this.disabledTo=e,this.picker_box.redraw(e)}isControlInvalid(){if(null!=this.controlEl&&""!=this.controlEl.value){this.controlEl.classList.add("is-invalid"),new Y(this.controlEl).blink()}else null!=this.listenEl&&this.value>=this.listenEl.value&&this.classList.remove("is-invalid")}_valid(){this._validation.message=null;let e=this.value,t=new Date(e.slice(0,10)),s=e.slice(8,10),i=this._regex.test(e),a=t.getDate().toString().padStart(2,"0");if(this.listenEl){if(this.listenEl.value>e)return this._validation.message="Data iki < Data nuo",!1}return!0===i&&a==s||(this._validation.message="Įvesta data nėra validi. (YYYY-MM-DD)",!1)}set value(e){super.value=e,this.controlEl&&(this.controlEl.disableTo(e),this.pickerShowDate(e)),this.isControlInvalid()}get value(){return super.value}}class Be{constructor(e,t){const s=t.value?new Date(t.value):new Date;return this.date=new Me.j({year:s.getFullYear(),month:s.getMonth()+1}),this.el=e,this.inputs={year:e.querySelector("input.current-year"),month:e.querySelector("select.current-month")},this.tbody=e.querySelector("tbody.xcalendar-days"),this.parent=t,this.buttons={month:{prev:e.querySelector(".prev-month"),next:e.querySelector(".next-month")},year:{prev:e.querySelector(".prev-year"),next:e.querySelector(".next-year")}},this.calendar={years:e.querySelector(".current-year"),months:e.querySelector(".current-month"),days:Array.from(e.querySelectorAll(".xdate-day-number"))},this.checkDisabledTo(),this.listeners(),this}checkDisabledTo(){let e,t=this.date.year+"-"+this.date.month+"-1",s=new Date(t);if(e=this.parent.dataset.control?new Date(this.parent.dataset.disabledTo):new Date(this.parent.disabledTo),s.getFullYear()<=e.getFullYear()?(this.buttons.year.prev.style.pointerEvents="none",this.buttons.year.prev.style.color="lightgray"):(this.buttons.year.prev.style.pointerEvents="auto",this.buttons.year.prev.style.color="black"),s<e?(this.buttons.month.prev.style.pointerEvents="none",this.buttons.month.prev.style.color="lightgray"):(this.buttons.month.prev.style.pointerEvents="auto",this.buttons.month.prev.style.color="black"),e.getFullYear()==this.date.year){for(let t=0;t<e.getMonth();t++)this.inputs.month.children.item(t).style.color="lightgray",this.inputs.month.children.item(t).setAttribute("disabled",!0);for(let t=e.getMonth();t<12;t++)this.inputs.month.children.item(t).style.color="black",this.inputs.month.children.item(t).removeAttribute("disabled")}else for(let e=0;e<12;e++)this.inputs.month.children.item(e).style.color="black",this.inputs.month.children.item(e).removeAttribute("disabled")}listeners(){const e=this.buttons,t=this.inputs;if(t.year.addEventListener("input",(()=>{if(t.year.value.length>3){let e;e=this.parent.dataset.control?new Date(this.parent.dataset.disabledTo):new Date(this.parent.disabledTo);let s=t.year.value.toString()+"-"+this.date.month.toString()+"-1";new Date(s)>e?this.date.year=parseInt(t.year.value):null!=this.parent.dataset.disabledTo||null!=this.parent.disabledTo?(this.date.year=e.getFullYear(),t.year.value=e.getFullYear().toString(),this.date.month=e.getMonth()+1,t.month.value=(e.getMonth()+1).toString()):this.date.year=parseInt(t.year.value)}this.redraw()})),e.month.prev.addEventListener("click",(()=>{this.date.month--,t.month.value=this.date.month.toString(),t.year.value=this.date.year.toString(),this.redraw()})),e.month.next.addEventListener("click",(()=>{this.date.month++,t.month.value=this.date.month.toString(),t.year.value=this.date.year.toString(),this.redraw()})),e.year.prev.addEventListener("click",(()=>{let e;e=this.parent.dataset.control?new Date(this.parent.dataset.disabledTo):new Date(this.parent.disabledTo),this.date.month<e.getMonth()+1&&(this.date.month=e.getMonth()+1,t.month.value=(e.getMonth()+1).toString()),this.date.year--,t.year.value=this.date.year.toString(),this.redraw()})),e.year.next.addEventListener("click",(()=>{this.date.year++,t.year.value=this.date.year.toString(),this.redraw()})),t.month.addEventListener("change",(e=>{const t=e.target;this.date.month=parseInt(t.value),this.redraw()})),null!=this.parent.dataset.listen){document.querySelector("[name="+CSS.escape(this.parent.name)+"]").addEventListener("click",(e=>{e.stopPropagation(),e.preventDefault(),this.parent.classList.contains("is-invalid")&&this.parent.isControlInvalid()}))}this.tbody.addEventListener("click",(e=>{const s=e.target,i=s.dataset.date;i&&!s.classList.contains("day-disabled")&&(this.parent.value=i,this.parent._close(),s.classList.contains("xdate-day-prev")&&(this.date.value=i,t.month.value=this.date.month.toString()),this.redraw(),this.parent.dispatchEvent(new Event("change")))})),this.redraw()}redraw(e){const t=this.date.calendar;let s=0,i="";const a=e||this.parent.value;let n;n=null==this.parent.dataset.disabledFrom?null:this.parent.disabledFrom;const r=e||this.parent.disabledTo;this.checkDisabledTo();let l=(new Date).toISOString().slice(0,10);for(let e=1;e<7;e++){i+="<tr>";for(let e=1;e<8;e++){let e=t[s],o=e.v>n||e.v<r;!1===e.a?i+=`<td><div class="xdate-day-number xdate-day-prev${o?" day-disabled":""}" data-date="${e.v}">${e.d}</div></td>`:e.v===a?i+=`<td><div class="xdate-day-number xdate-day-current current-day active${o?" day-disabled":""}" data-date="${e.v}">${e.d}</div></td>`:e.v===l?i+=`<td><div class="xdate-day-number xdate-day-current current-day ${o?" day-disabled":""}" data-date="${e.v}">${e.d}</div></td>`:i+=`<td><div class="xdate-day-number${o?" day-disabled":""}" data-date="${e.v}">${e.d}</div></td>`,s++}i+="</tr>"}this.tbody.innerHTML=i}}customElements.define("picker-date-simple",je,{extends:"input"});class He extends D{constructor(){super()}_init(){this.colorValue=this.dataset.colorvalue,this.style.backgroundColor=this.colorValue,this.style.color="transparent",this.style.cursor="pointer";var e=document.getElementById("tableID");if(null!=e)for(var t=0;t<e.rows.length;t++)for(var s=0;s<e.rows[t].cells.length;s++)e.rows[t].cells[s].style.cursor="pointer";this.listeners()}_validate(){if(console.log(this.colorValue),this.colorValue)return!0;this._validation.message=null,this._validation.validity=!1,!1===this.checkValidity()&&(this._validation.validity=!0,this._error(!1));return!1}_valid(){return!0}listeners(){var e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");function t(e){return"#"+s((e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/))[1])+s(e[2])+s(e[3])}function s(t){return isNaN(t)?"00":e[(t-t%16)/16]+e[t%16]}this.onkeydown=e=>{e.preventDefault()};var i=document.getElementById("tableID");if(null!=i)for(var a=0;a<i.rows.length;a++)for(var n=0;n<i.rows[a].cells.length;n++)i.rows[a].cells[n].onclick=function(){this.style.cursor="pointer";let e=this,s=document.querySelector('input[is="picker-color-simple"]');s.style.backgroundColor=e.style.backgroundColor,s.style.color="transparent","rgb"==e.style.backgroundColor.substr(0,3)?(t(e.style.backgroundColor),s.value=t(e.style.backgroundColor)):(e.style.backgroundColor,s.value=e.style.backgroundColor)}}set value(e){this.colorValue=e}get value(){return this.colorValue?this.colorValue:""}}customElements.define("picker-color-simple",He,{extends:"input"});var Ne=s(3681),Oe=s.n(Ne);class Pe extends D{constructor(){super()}_init(){this.picker=new Re(this._box.querySelector("div.xdaterange"),this),this.listeners()}_valid(){let{start:e,end:t}=this.parseRange();return!!(e&&t&&Oe()(t).isSameOrAfter(e))||(this._validation.message="Nevalidus datos intervalas",!1)}set value(e){super.value=e,l.dispatch(this,"pantera:change",null)}get value(){return super.value}parseRange(){let[e,t]=this.value.split(" - ");return{start:e,end:t}}listeners(){this.addEventListener("change",(()=>{let{start:e,end:t}=this.parseRange();e&&t&&this.picker.setRange(e,t)}))}}class Re{constructor(e,t){if(this.el=e,this.calendarsContainer=e.querySelector(".xdaterange-calendars-container"),this.calendarTemplate=this.calendarsContainer.querySelector(".xdaterange-calendar").cloneNode(!0),this.definedRangesElements=this.el.querySelectorAll(".xdaterange-ranges-item"),this.date=new Me.j({year:Number(e.dataset.year),month:Number(e.dataset.month)}),this.selectetRangeInfo=this.el.querySelector(".xdaterange-selected-month-info"),this.months=JSON.parse(this.el.dataset.months),this.selecting=!1,this.parent=t,this.buttons={month:{prev:e.querySelector(".xdaterange-prev-month"),next:e.querySelector(".xdaterange-next-month")},year:{prev:e.querySelector(".xdaterange-prev-year"),next:e.querySelector(".xdaterange-next-year")},apply:e.querySelector(".xdaterange-apply-btn"),cancel:e.querySelector(".xdaterange-cancel-btn")},this.parent.value){const{start:e,end:t}=this.parent.parseRange();this.startDate=e,this.endDate=t}this._handleRangeSelect=this.handleRangeSelect.bind(this),this.listeners()}listeners(){const e=this.buttons;e.month.prev.addEventListener("click",(()=>{this.date.month--,this.redraw()})),e.month.next.addEventListener("click",(()=>{this.date.month++,this.redraw()})),e.year.prev.addEventListener("click",(()=>{this.date.year--,this.redraw()})),e.year.next.addEventListener("click",(()=>{this.date.year++,this.redraw()})),e.apply.addEventListener("click",(()=>{let e=this.getRange();e&&(this.parent.value=e,this.parent._close())})),e.cancel.addEventListener("click",(()=>{this.parent._close()})),this.calendarsContainer.addEventListener("click",this.handleCalendarClick.bind(this)),this.initDefinedRangesListeners(),this.redraw()}redraw(){let e=this.date.current,t=this.date.next,s=e=>`${e.year}-${e.month}-${e.days}`,i=s(e),a=s(t),n=new Me.z(i,a).createCalendar();this.calendarsContainer.innerHTML="",n.forEach((e=>{let t=this.calendarTemplate.cloneNode(!0),s=t.querySelector("tbody.xdaterange-calendar-days");t.querySelector(".xdaterange-month").innerText=`${this.months[e.month]} ${e.year}`,s.innerHTML=this.render(e.calendar,null),this.calendarsContainer.appendChild(t)})),!this.selecting&&this.startDate&&this.endDate&&this.updateCells(this.endDate)}startRangeSelect(){if(this.selecting)return;this.getDayCells().forEach((e=>{e.dataset.date!==this.startDate&&e.classList.remove("xdate-range","xdate-range-end")})),this.el.addEventListener("mouseover",this._handleRangeSelect),this.selecting=!0,this.toggleActiveRangeElement()}stopRangeSelect(){if(this.selecting=!1,this.el.removeEventListener("mouseover",this._handleRangeSelect),Oe()(this.endDate).isBefore(this.startDate)){let e=this.startDate;this.startDate=this.endDate,this.endDate=e}this.updateSelectedRangeInfo()}setRange(e,t){this.startDate=e,this.endDate=t,this.date.value=e,this.updateSelectedRangeInfo(),this.redraw()}getRange(){if("false"==this.el.dataset.backwards&&this.startDate>this.endDate){let e=this.startDate;this.startDate=this.endDate,this.endDate=e}return null!=this.startDate&&null!=this.endDate&&`${this.startDate} - ${this.endDate}`}render(e,t){let s=0,i="",a=Boolean(this.parent.dataset.addBefore),n=(new Date).toISOString().slice(0,10);for(let r=1;r<7;r++){i+="<tr>";for(let r=1;r<8;r++){let r=e[s];!a&&Oe()(r.v).isBefore(Oe()().format("YYYY-MM-DD"))&&!1===r.a?i+=`<td><div class="xdate-day-number xdate-day-locked xdate-day-prev" data-date="${r.v}">${r.d}</div></td>`:!a&&Oe()(r.v).isBefore(Oe()().format("YYYY-MM-DD"))?i+=`<td><div class="xdate-day-number xdate-day-locked" data-date="${r.v}">${r.d}</div></td>`:!1===r.a?i+=`<td><div class="xdate-day-number xdate-day-prev" data-date="${r.v}">${r.d}</div></td>`:r.v===t?i+=`<td><div class="xdate-day-number xdate-day-current current-day active" data-date="${r.v}">${r.d}</div></td>`:r.v===n?i+=`<td><div class="xdate-day-number xdate-day-current current-day" data-date="${r.v}">${r.d}</div></td>`:i+=`<td><div class="xdate-day-number" data-date="${r.v}">${r.d}</div></td>`,s++}i+="</tr>"}return i}handleCalendarClick(e){e.stopImmediatePropagation();let t=e.target;const s=t.dataset.date;s&&!t.classList.contains("xdate-day-locked")&&(this.selecting?(this.endDate=s,this.stopRangeSelect()):(this.startDate=s,this.endDate=null,this.startRangeSelect()),t.classList.contains("xdate-day-prev")&&(t=this.getCellByDate(s),t||(this.date.value=s,this.redraw(),this.selecting&&this.updateCells()),t=this.getCellByDate(s)),t.classList.add("xdate-range-end"))}handleRangeSelect(e){let t=e.target.closest(".xdate-day-number");if(!t)return;let s=t.dataset.date;this.updateCells(s)}getDayCells(){return this.calendarsContainer.querySelectorAll(".xdate-day-number:not(.xdate-day-prev)")}getCellByDate(e){return this.calendarsContainer.querySelector(`.xdate-day-number:not(.xdate-day-prev)[data-date="${e}"]`)}updateCells(e){this.getDayCells().forEach((t=>{let s=t.dataset.date;s===this.startDate||s===this.endDate?t.classList.add("xdate-range-end"):s===e||Oe()(s).isBetween(this.startDate,e)||Oe()(s).isBetween(e,this.startDate)?(t.classList.remove("xdate-range-end"),t.classList.add("xdate-range")):t.classList.remove("xdate-range")}))}initDefinedRangesListeners(){this.definedRangesElements&&this.definedRangesElements.forEach((e=>{e.addEventListener("click",(()=>{let t=e.dataset.range,[s,i]=t.split(" - ");this.setRange(s,i),this.redraw(),this.toggleActiveRangeElement(e)}))}))}toggleActiveRangeElement(e){this.definedRangesElements.forEach((e=>e.classList.remove("active"))),e&&e.classList.add("active")}updateSelectedRangeInfo(){let e=this.getRange();e&&(this.selectetRangeInfo.innerText=e)}}customElements.define("picker-date-range-simple",Pe,{extends:"input"});class Fe extends HTMLElement{constructor(){super(),this._validation={message:null,default:null,error:!1,validity:!1,info:null},this._form=null,this._internals=this.attachInternals()}static get observedAttributes(){return["name","disabled","placeholder","value"]}connectedCallback(){this._form=this.closest("form"),setTimeout((()=>{this._init()}))}_validate(){const e=this._valid();return!1===e?(this._error(!1),!1):(this._error(!0),e)}_error(e){const t=this.parentNode.querySelector("label.is-invalid");let s;if(!1===e)return this._validation.error=!0,s=!0===this._validation.validity?"Validity error":this._validation.message||this._validation.default,t.classList.remove("d-none"),void(t.textContent=s);!0===this._validation.error&&(t.textContent=null,t.classList.remove("d-none"),this._validation.error=!1)}disconnectedCallback(){this._form&&(this._form=null)}attributeChangedCallback(e,t,s){"value"==e&&(this.value=s)}get form(){return this._form}get name(){return console.dir("esu"),this.getAttribute("name")}get type(){return this.localName}get validity(){return this._internals.validity}get validationMessage(){return this._internals.validationMessage}get willValidate(){return this._internals.willValidate}checkValidity(){return this._internals.checkValidity()}reportValidity(){return this._internals.reportValidity()}}Fe.formAssociated=!0;const Ue=Fe;class ze extends Ue{constructor(){super()}_init(){this._box=this.querySelector("div.box"),this._get=this.dataset.get,new Ve(this._box,this)}_valid(){return!0}set value(e){this._val=e}get value(){return this._val}}class Ve{constructor(e,t){const s=t.value?new Date(t.value):new Date;return this.date=new Me.j({year:s.getFullYear(),month:s.getMonth()+1}),this.el=e,this.inputs={year:e.querySelector("input.current-year"),month:e.querySelector("select.current-month")},this.tbody=e.querySelector("tbody.xcalendar-days"),this.parent=t,this.buttons={month:{prev:e.querySelector(".prev-month"),next:e.querySelector(".next-month")},year:{prev:e.querySelector(".prev-year"),next:e.querySelector(".next-year")}},this.calendar={years:e.querySelector(".current-year"),months:e.querySelector(".current-month"),days:Array.from(e.querySelectorAll(".xdate-day-number"))},this.listeners(),this}listeners(){const e=this.buttons,t=this.inputs;console.log(this.el),this.el.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation()})),e.month.prev.addEventListener("click",(e=>{this.date.month--,t.month.value=this.date.month.toString(),12==this.date.month&&(t.year.value=this.date.year.toString()),this.redraw()})),e.month.next.addEventListener("click",(e=>{this.date.month++,t.month.value=this.date.month.toString(),1==this.date.month&&(t.year.value=this.date.year.toString()),this.redraw()})),e.year.prev.addEventListener("click",(e=>{this.date.year--,t.year.value=this.date.year.toString(),this.redraw()})),e.year.next.addEventListener("click",(e=>{this.date.year++,t.year.value=this.date.year.toString(),this.redraw()})),t.month.addEventListener("change",(e=>{const t=e.target;this.date.month=parseInt(t.value),this.redraw()})),this.tbody.addEventListener("click",(e=>{const s=e.target,i=s.dataset.date;if(!i)return;if(this.parent._get)return void d.X.url.update(this.parent._get,i,!0);s.classList.contains("xdate-day-prev")&&(this.date.value=i,t.month.value=this.date.month.toString(),this.redraw());const a=this.tbody.querySelector("div.active");a&&a.classList.remove("active"),s.classList.add("active"),this.parent.value=i})),this.redraw()}redraw(e){const t=this.date.calendar;let s=0,i="";const a=e||this.parent.value;for(let e=1;e<7;e++){i+="<tr>";for(let e=1;e<8;e++){let e=t[s],n=e.v>undefined||e.v<undefined;!1===e.a?i+=`<td><div class="xdate-day-number xdate-day-prev${n?" day-disabled":""}" data-date="${e.v}">${e.d}</div></td>`:e.v===a?i+=`<td><div class="xdate-day-number xdate-day-current current-day active${n?" day-disabled":""}" data-date="${e.v}">${e.d}</div></td>`:i+=`<td><div class="xdate-day-number${n?" day-disabled":""}" data-date="${e.v}">${e.d}</div></td>`,s++}i+="</tr>"}this.tbody.innerHTML=i}}customElements.define("picker-date-inline",ze);class We extends D{constructor(){super(),this._regex=/^[1-2](0[0-9][0-9]|100)-(0[1-9]|1[0-2])$/g,this._keydown=[...he.SPECIAL,...he.NUM,...he.MINUS]}_init(){this._date=new Me.j(this.value),this._rendered={prev:this._box.querySelector(".xmonth-prev"),next:this._box.querySelector(".xmonth-next"),year:this._box.querySelector(".xmonth-year"),months:this._box.querySelectorAll(".xmonth-month")};const{control:e,listen:t,disabledFrom:s,disabledTo:i}=this.dataset;if(e){let t=document.querySelector(`[name="${e}"]`);this.controlEl=t,t.value&&this.disableFrom(t.value)}if(t){let e=document.querySelector(`[name="${t}"]`);this.listenEl=e,e.value&&(this.disableTo(e.value),this._date.year=parseInt(e.value.slice(0,4)),this._date.month=parseInt(e.value.slice(5,7)),this.updateMonths())}s&&this.disableFrom(s),i&&this.disableTo(i),this.listeners()}disableFrom(e){this.disabledFrom=e,this.listeners()}disableTo(e){this.disabledTo=e,this.listeners()}_valid(){this._validation.message=null;const e=this.dataset.submit,t=this.value;if(e){const s=this._date;return"first"===e&&t===s.dayFirst||"last"===e&&t===s.dayLast}return!!this._regex.test(t)||(this._regex.test(t)?void 0:(this._validation.message="Įvestas netinkamas datos formatas (YYYY-MM)",!1))}listeners(){if(this.classList.contains("listeners"))return;const e=this._rendered;this.addEventListener("click",(()=>{this.controlEl&&this.disabledFrom<this.controlEl.value&&(this.disabledFrom=this.controlEl.value),this.listenEl&&(this.disabledTo=this.listenEl.value),this.updateMonths()})),this.addEventListener("input",(()=>{const e=this.value;if(e.length<4)return;const t=e.split("-"),s=t[0],i=parseInt(t[1]);4===s.length&&(this._date.year=parseInt(s),this._rendered.year.innerText=this._date.year.toString()),i&&(this._date.year=parseInt(s),this._rendered.year.innerText=this._date.year.toString(),this.updateMonths())})),this.addEventListener("change",(()=>{const e=this.value;this.value=e})),e.prev.addEventListener("click",(e=>{e.preventDefault(),this._date.year--,this._rendered.year.innerText=this._date.year.toString(),this.updateMonths()})),e.next.addEventListener("click",(e=>{e.preventDefault(),this._date.year++,this._rendered.year.innerText=this._date.year.toString(),this.updateMonths()})),e.months.forEach((e=>{e.addEventListener("click",(t=>{let s=t.currentTarget;const i=Number(e.dataset.month);s.classList.contains("month-disabled")||(this._date.month=i,this.updateMonths(),this._close(),this._update())}))})),this.classList.add("listeners")}updateMonths(){this._rendered.months.forEach((e=>{let t=new Date(`${this._date.year}-${e.dataset.month}`);t.setHours(0,0,0,0);let s=new Date(this.disabledTo),i=new Date(this.disabledFrom);s.setHours(0,0,0,0),i.setHours(0,0,0,0),this.disabledTo&&t<=s&&e.classList.add("month-disabled"),this.disabledFrom&&t>=i&&e.classList.add("month-disabled"),this.disabledTo&&t>=s&&e.classList.remove("month-disabled"),this.disabledFrom&&t<=i&&e.classList.remove("month-disabled")}))}_update(e){this.controlEl&&this.controlEl.disableFrom(e),this.listenEl&&this.listenEl.disableTo(e);const t=this._rendered,s=this._date.month,i=this.dataset.submit;t.months.forEach((e=>{s.toString()!==e.dataset.month?e.classList.remove("active"):e.classList.add("active")})),i||(this.value=this._date.yearMonth),"first"===i?this.value=this._date.dayFirst:"last"===i&&(this.value=this._date.dayLast)}set value(e){super.value=e;const t=new Date(e);e&&this.listenEl&&t<new Date(this.listenEl.value)&&(this.listenEl.value=null),this.controlEl&&(this.controlEl.disableTo(e),new Date(this.controlEl.value)<t&&(this.controlEl.value=null)),l.dispatch(this,"pantera:change",null)}get value(){return super.value}}customElements.define("picker-date-month",We,{extends:"input"});const Ze=(e,t)=>{let s=[];for(let i=e;i<=t;i++)s.push(i);return s},Ye=(e,t)=>{let s=[];for(let i=0,a=e.length;i<a;i+=t){let a=e.slice(i,i+t);s.push(a)}return s};class Ke extends D{constructor(){super(),this._keydown=[...he.SPECIAL,...he.NUM]}_init(){this._date=new Me.j(this.value),"0"==this.dataset.futureyears&&(this._date.year-=4),this._boxInstance=new Xe(this._box,this)}_valid(){return 4===this.value.length||(this._validation.message="Nevalidi metų reikšmė",!1)}set value(e){super.value=e,this.dispatchEvent(new CustomEvent("pantera:change",{detail:this}))}get value(){return super.value}}class Xe{constructor(e,t){this._el=e,this._parent=t,this._rendered={prev:this._el.querySelector(".xyear-prev"),next:this._el.querySelector(".xyear-next"),range:this._el.querySelector(".xyear-current-range"),list:this._el.querySelector(".xyear-list")},this._listeners(),this._redraw()}_listeners(){const e=this._rendered,t=this._parent._date;e.prev.addEventListener("click",(e=>{e.preventDefault(),t.year-=9,this._redraw()})),e.next.addEventListener("click",(e=>{e.preventDefault(),t.year+=9,this._redraw()})),e.list.addEventListener("click",(s=>{const i=s.target,a=parseInt(i.dataset.year);if(!a)return;t.year=a,this._parent.value=a.toString();e.list.querySelectorAll(".xyear-year").forEach((e=>e.classList.remove("active"))),i.classList.add("active"),this._parent._close()}))}_redraw(){const e=this._parent._date.year,t=Ze(e-4,e+4);let s=Ye(t,3).reduce(((e,t)=>e+`\n                <tr> \n                    ${t.map((e=>`\n                        <td class="xyear-cell"> \n                            <div class="xyear-year" data-year="${e}">${e}</div> \n                        </td>\n                    `)).join("")} \n                </tr>\n            `),"");this._rendered.list.innerHTML=s,this._rendered.range.innerText=`${t[0]} - ${t[t.length-1]}`}}customElements.define("picker-date-year",Ke,{extends:"input"});class Je extends D{constructor(){super(),this._regex=/^[1-2](0[0-9][0-9]|100)-(0[1-9]|1[0-2])$/g,this._keydown=[...he.SPECIAL,...he.NUM,...he.MINUS],this.onMouseMove=e=>{let t=e.target.closest(".xdaterangemonth-month");t&&(this._rendered.months.forEach((e=>{e.classList.remove("range-end")})),t.classList.add("range-end"),t.addEventListener("click",(()=>{t.classList.contains("range-end")&&(this.end=this._date.yearMonth.toString(),this.end&&(t.classList.remove("range-start"),t.classList.remove("range-end"),this.value=this.start+" / "+this.end),console.log(this.start," <- start / end -> ",this.end)),this.updateMonths()})))}}_init(){this._date=new Me.j(this.value),this._rendered={prev:this._box.querySelector(".xdaterangemonth-prev"),next:this._box.querySelector(".xdaterangemonth-next"),year:this._box.querySelector(".xdaterangemonth-current-year"),months:this._box.querySelectorAll(".xdaterangemonth-month"),monthsWrap:this._box.querySelector(".xdaterangemonth-list")},this.listeners()}_valid(){return!0}listeners(){const e=this._rendered;this.addEventListener("input",(()=>{const e=this.value;if(e.length<4)return;const t=e.split("-"),s=t[0],i=parseInt(t[1]);4===s.length&&(this._date.year=parseInt(s),this._rendered.year.innerText=this._date.year.toString()),i&&(this._date.year=parseInt(s),this._rendered.year.innerText=this._date.year.toString(),this.updateMonths())})),e.prev.addEventListener("click",(e=>{e.preventDefault(),this._date.year--,this._rendered.year.innerText=this._date.year.toString(),this.updateMonths()})),e.next.addEventListener("click",(e=>{e.preventDefault(),this._date.year++,this._rendered.year.innerText=this._date.year.toString(),this.updateMonths()})),e.months.forEach((e=>{e.addEventListener("click",(t=>{let s=t.currentTarget;const i=Number(e.dataset.key);s.classList.add("range-start"),s.classList.contains("range-start")&&(this.start=this._date.yearMonth.toString(),s.classList.remove("range-start")),this._rendered.monthsWrap.addEventListener("mousemove",this.onMouseMove),this._date.month=i,this.updateMonths(),this._update()}))}))}updateMonths(){this._rendered.months.forEach((e=>{let t=new Date(`${this._date.y}-${e.dataset.key}`);this.start&&this.end&&t>=new Date(this.start)&&e.classList.add("text-success"),this.start&&this.end&&t<=new Date(this.end)&&e.classList.add("text-success"),this.start&&t<new Date(this.start)&&e.classList.remove("text-success"),this.end&&t>new Date(this.end)&&e.classList.remove("text-success")}))}_update(){const e=this._rendered,t=this._date.month;e.months.forEach((e=>{t.toString()!==e.dataset.key?e.classList.remove("text-primary"):e.classList.add("text-primary")}))}}customElements.define("picker-date-range-month",Je,{extends:"input"});class Ge extends Ue{constructor(){super()}_init(){const e=this.querySelectorAll("span");e.forEach((t=>{t.addEventListener("mouseover",(()=>{e.forEach((e=>{e.dataset.value<t.dataset.value?e.classList.add("checked"):e.classList.remove("checked")}))})),t.addEventListener("click",(()=>{e.forEach((e=>{e.dataset.value<t.dataset.value?e.classList.add("checked"):e.classList.remove("checked")})),this.value=t.dataset.value}))}))}_valid(){return!0}set value(e){this._val=e}get value(){return this._val}}customElements.define("picker-rating",Ge);class Qe extends D{constructor(){super(),this._regex=/^([0-1][0-9]|[2][0-3]):[0-5][0-9]$/,this._keydown=[...he.SPECIAL,...he.NUM,186]}_init(){if(this.value){const[e,t]=this.value.split(":");this._hours=e,this._minutes=t}new et(this._box,this)}_valid(){return!!this._regex.exec(this.value)||(this._validation.message="Įvestas netinkamas laiko formatas (hh:mm)",!1)}set value(e){super.value=e,l.dispatch(this,"pantera:change",null)}get value(){return super.value}set hours(e){this._hours=e,this.value=`${this._hours}:${this._minutes||"00"}`}get hours(){return this._hours}set minutes(e){this._minutes=e,this.value=`${this._hours||"00"}:${this._minutes}`}get minutes(){return this._minutes}}class et{constructor(e,t){this.el=e,this.parent=t,this.render(),this.listeners()}render(){this.rendered={hours:this.el.querySelectorAll("a.xtime-inline-item.hour"),minutes:this.el.querySelectorAll("a.xtime-inline-item.minute")}}listeners(){const e=e=>{this.rendered[e].forEach((t=>{this.parent[e]===t.dataset[e]&&this.toggleActive(this.rendered[e],t),t.addEventListener("click",(()=>{this.parent[e]=t.dataset[e],this.toggleActive(this.rendered[e],t),"minutes"===e&&this.parent._close()})),"hours"===e&&t.addEventListener("dblclick",(()=>{this.parent[e]=t.dataset[e],this.toggleActive(this.rendered[e],t),this.parent._close()}))}))};e("hours"),e("minutes")}toggleActive(e,t){e.forEach((e=>e.classList.remove("active"))),t.classList.add("active")}}customElements.define("picker-time-simple",Qe,{extends:"input"});class tt extends Ue{_init(){this.personalCode=document.querySelector("input[name='PersonalCode']"),this.picker=document.querySelector("picker-birthday[name='Birthday']"),this.dataset.noFutureDate?this._noFutureDate=!0:this._noFutureDate=!1,this.select={year:this.querySelector("select.year"),month:this.querySelector("select.month"),day:this.querySelector("select.day")},this._listeners(),this.dataset.legalAge&&(this._legalAge=parseInt(this.dataset.legalAge))}_listeners(){this.querySelectorAll("div.select-wrap select").forEach((e=>{e.addEventListener("mousewheel",(e=>(e.stopPropagation(),e.preventDefault(),e.returnValue=!1,!1)))})),this.picker&&this.personalCode.addEventListener("focusout",(()=>{this.personalCode.value&&this.parsePersonalCode()})),Object.keys(this.select).forEach((e=>{this.select[e].addEventListener("change",(()=>{this._update(e)}))}))}parsePersonalCode(){let e=parseInt(this.personalCode.value.substr(1,2)),t=parseInt(this.personalCode.value.substr(3,2))+1,s=parseInt(this.personalCode.value.substr(5,2));this.date=new Me.j({year:e,month:t});const i=this.date.day;for(let e=29;e<=31;++e){const t=this.select.day.querySelector("option[value='"+e.toString()+"']");i>=e?t.classList.remove("d-none"):t.classList.add("d-none")}let a=t-1,n=this.calcDecade(this.personalCode.value[0])+e.toString()+"-"+(a<10?"0":"")+a.toString()+"-"+(s<10?"0":"")+s.toString()+" 00:00:00";this.picker.value=n,document.querySelector('.year > option[value="'+this.calcDecade(this.personalCode.value[0])+e.toString()+'"]').selected=!0,document.querySelector('.day > option[value="'+s.toString()+'"]').selected=!0,document.querySelector('.month > option[value="'+a.toString()+'"]').selected=!0}calcDecade(e){return"5"===e||"6"===e?"20":"19"}_update(e){let t=parseInt(this.select.year.value),s=parseInt(this.select.month.value)+1,i=parseInt(this.select.day.value);this.date=new Me.j({year:t,month:s});const a=this.date.day;let n=this._disableDate(t,s);if(("month"===e||"year"===e)&&!n)for(let e=29;e<=31;++e){const t=this.select.day.querySelector("option[value='"+e.toString()+"']");a>=e?t.classList.remove("d-none"):t.classList.add("d-none")}let r=new Me.j,l=s-1;if(t===r.year&&s-1>=r.month+1){if("year"===e){this.value=t.toString()+"-1-1",this.select.month.value="1",this.select.day.value="1";for(let e=1;e<=31;++e){this.select.day.querySelector("option[value='"+e.toString()+"']").classList.remove("d-none")}}else if("month"===e){console.log(r.month),console.log(r.day),this.value=t.toString()+"-"+(r.month+1).toString()+"-1",this.select.month.value=(r.month+1).toString(),this.select.day.value="1";for(let e=1;e<=r.day;++e){this.select.day.querySelector("option[value='"+e.toString()+"']").classList.remove("d-none")}}}else this.value=t.toString()+"-"+(l<10?"0":"")+l.toString()+"-"+(i<10?"0":"")+i.toString()}_disableDate(e,t){let s=new Me.j;if(this._noFutureDate)if(e===s.year){for(let e=1;e<13;e++){const t=this.select.month.querySelector("option[value='"+e.toString()+"']");e>s.month+1&&t.classList.add("d-none")}if(t-1===s.month+1)for(let e=1;e<32;e++){const t=this.select.day.querySelector("option[value='"+e.toString()+"']");e>s.day&&t.classList.add("d-none")}else for(let e=1;e<32;e++){this.select.day.querySelector("option[value='"+e.toString()+"']").classList.remove("d-none")}}else{for(let e=1;e<13;e++){this.select.month.querySelector("option[value='"+e.toString()+"']").classList.remove("d-none")}for(let e=1;e<32;e++){this.select.day.querySelector("option[value='"+e.toString()+"']").classList.remove("d-none")}}return e===s.year&&t-1===s.month+1}_valid(){return this._legalAge,!0}set value(e){this._val=e}get value(){return this._val}}customElements.define("picker-birthday",tt);class st extends T.Z{constructor(){super(),this._regex=/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/g,this._ssl=!1,this._silent=!1}_init(){this.linkBtn=this.nextElementSibling,this.oninput=()=>{this._normalize(this.value)},this._normalize(this.value)}_normalize(e){if(!(e=(e=(e=e.toLocaleLowerCase()).replace(/\s/g,"")).replace(/\.\./g,".")).trim()||-1===e.indexOf("."))return this.linkBtn.href="javascript:;",void(this.linkBtn.target="");0===e.indexOf("https://")?this._ssl=!0:(this._ssl=!1,e=e.replace("http://",""),this._silent=!0,this.value=e,this._silent=!1),this.linkBtn.target="_blank",this.linkBtn.href=(!1===this._ssl?"http://":"")+e}_valid(){const e=this.value;return this._regex.lastIndex=0,!0===this._regex.test(e)||(this._validation.message="Neteisingas URL",!1)}get value(){return super.value}set value(e){super.value=e,!0!==this._silent&&this._normalize(e)}}customElements.define("control-text-url",st,{extends:"input"});class it extends D{constructor(){super(),this._regex=/^[1-2][0-9][0-9][0-9]-[0-1][0-9]-[0-3][0-9]\s([0-1][0-9]|[2][0-3]):[0-5][0-9]$/g,this._keydown=[...he.SPECIAL,...he.NUM,186,109,189,32]}_init(){let e=6e4*(new Date).getTimezoneOffset(),t=new Date(Date.now()-e).toISOString().slice(0,-1);this._val=t.slice(0,16).split("T").join(" ").toString(),new at(this._box,this),new nt(this._box,this)}_valid(){this._validation.message=null;let e=new Date(super.value.slice(0,10)),t=super.value.slice(8,10);return Date.prototype.isValid=function(){return this.getTime()==this.getTime()},!(!super.value.match(this._regex)||!e.isValid()||e.getDate().toString().padStart(2,"0")!=t)||(this._validation.message="Įvesta data nėra validi. (YYYY-MM-DD hh:mm)",!1)}set hours(e){this._hours=e,this._date||(this._date=(new Date).toISOString().slice(0,10)),this._val=this.value=`${this._date} ${this._hours.length<2?"0":""}${this._hours}:${this._minutes||(new Date).getMinutes().toString().padStart(2,"0")}`}get hours(){return this._hours}set minutes(e){this._minutes=e,this._date||(this._date=(new Date).toISOString().slice(0,10)),this._val=this.value=`${this._date} ${this._hours||(new Date).getHours().toString().padStart(2,"0")}:${this._minutes.length<2?"0":""}${this._minutes}`}get minutes(){return this._minutes}set date(e){this._date=e,this._date||(this._date=(new Date).toISOString().slice(0,10));let t=this.hours||(new Date).getHours().toString().padStart(2,"0"),s=this._minutes||(new Date).getMinutes().toString().padStart(2,"0");this._val=this.value=`${this._date} ${t}:${s}`}set value(e){super.value=e}get value(){return super.value}}class at{constructor(e,t){const s=t.value?new Date(t.value):new Date;this.date=new Me.j({year:s.getFullYear(),month:s.getMonth()+1}),this.el=e,this.inputs={year:e.querySelector("input.current-year"),month:e.querySelector("select.current-month")},this.tbody=e.querySelector("tbody.xcalendar-days"),this.parent=t,this.buttons={month:{prev:e.querySelector(".prev-month"),next:e.querySelector(".next-month")},year:{prev:e.querySelector(".prev-year"),next:e.querySelector(".next-year")}},this.calendar={years:e.querySelector(".current-year"),months:e.querySelector(".current-month"),days:Array.from(e.querySelectorAll(".xdate-day-number"))},this.listeners()}listeners(){const e=this.buttons,t=this.inputs;t.year.addEventListener("input",(()=>{t.year.value.length>3&&(this.date.year=t.year.value),this.redraw()})),e.month.prev.addEventListener("click",(()=>{this.date.month--,t.month.value=this.date.month.toString(),this.redraw()})),e.month.next.addEventListener("click",(()=>{this.date.month++,t.month.value=this.date.month.toString(),this.redraw()})),e.year.prev.addEventListener("click",(()=>{this.date.year--,t.year.value=this.date.year.toString(),this.redraw()})),e.year.next.addEventListener("click",(()=>{this.date.year++,t.year.value=this.date.year.toString(),this.redraw()})),t.month.addEventListener("change",(e=>{const t=e.target;this.date.month=parseInt(t.value),this.redraw()})),this.tbody.addEventListener("click",(e=>{const s=e.target,i=s.dataset.date,a=e.currentTarget.querySelector(".active");i&&(s.classList.contains("xdate-day-prev")&&(this.date.value=i,t.month.value=this.date.month.toString(),this.redraw()),this.parent.date=i,a&&a.classList.remove("active"),s.classList.add("active"))})),this.redraw()}redraw(){const e=this.date.calendar;let t=0,s="";const i=(new Date).toISOString().slice(0,10);for(let a=1;a<7;a++){s+="<tr>";for(let a=1;a<8;a++){let a=e[t];!1===a.a?s+=`<td><div class="xdate-day-number xdate-day-prev" data-date="${a.v}">${a.d}</div></td>`:a.v===i?s+=`<td><div class="xdate-day-number xdate-day-current current-day active" data-date="${a.v}">${a.d}</div></td>`:s+=`<td><div class="xdate-day-number" data-date="${a.v}">${a.d}</div></td>`,t++}s+="</tr>"}this.tbody.innerHTML=s}}class nt{constructor(e,t){this.el=e,this.parent=t,this.render(),this.listeners()}render(){this.rendered={hours:this.el.querySelectorAll("a.xtime-inline-item.hour"),minutes:this.el.querySelectorAll("a.xtime-inline-item.minute")}}listeners(){const e=e=>{this.rendered[e].forEach((t=>{this.parent[e]===t.dataset[e]&&this.toggleActive(this.rendered[e],t),t.addEventListener("click",(()=>{this.parent[e]=t.dataset[e],this.toggleActive(this.rendered[e],t)}))}))};e("hours"),e("minutes")}toggleActive(e,t){e.forEach((e=>e.classList.remove("active"))),t.classList.add("active")}}customElements.define("control-picker-datetime",it,{extends:"input"});class rt extends D{constructor(){super(),this._regex=/^([0-1][0-9]|[2][0-3]):[0-5][0-9]$/g,this._keydown=[...he.SPECIAL,...he.NUM,186]}_init(){new lt(this._box,this)}_valid(){return this._validation.message=null,!!this.value.match(this._regex)||(this._validation.message="Įvestas netinkamas laiko formatas (hh:mm)",!1)}set value(e){super.value=e}get value(){return super.value}}class lt{constructor(e,t){this.hours=(new Date).getHours(),this.minutes=(new Date).getMinutes(),this.el=e,this.inputs={hour:e.querySelector("input.current-hour"),minute:e.querySelector("input.current-minute")},this.parent=t,this.buttons={hour:{prev:e.querySelector(".prev-hour"),next:e.querySelector(".next-hour")},minute:{prev:e.querySelector(".prev-minute"),next:e.querySelector(".next-minute")}},this.parentValue(),this.listeners()}listeners(){const e=this.buttons,t=this.inputs;e.hour.prev.addEventListener("click",(()=>{this.hours--,this.hours<0&&(this.hours=0),t.hour.value=this.hours.toString(),this.parentValue()})),e.hour.next.addEventListener("click",(()=>{this.hours++,this.hours>23&&(this.hours=23),t.hour.value=this.hours.toString(),this.parentValue()})),e.minute.prev.addEventListener("click",(()=>{this.minutes--,this.minutes<0&&(this.minutes=0),t.minute.value=this.minutes.toString(),this.parentValue()})),e.minute.next.addEventListener("click",(()=>{this.minutes++,this.minutes>59&&(this.minutes=59),t.minute.value=this.minutes.toString(),this.parentValue()})),t.hour.addEventListener("input",(e=>{const t=e.target;this.hours=t.value,this.parentValue()})),t.minute.addEventListener("input",(e=>{const t=e.target;this.minutes=t.value,this.parentValue()}))}parentValue(){let e=this.hours.toString(),t=this.minutes.toString();this.inputs.hour.value=e,this.inputs.minute.value=t,this.parent.value=e.toString().padStart(2,"0")+":"+t.toString().padStart(2,"0")}}customElements.define("control-picker-time-quick",rt,{extends:"input"});var ot=s(5173),dt=s(9894);function ct(e){return(new DOMParser).parseFromString(e,"text/html").body.firstChild}function ht(e){return(new DOMParser).parseFromString(e,"text/html").body.firstChild}function ut(e){return 0===e.indexOf("#")?document.getElementById(e.slice(1)):document.querySelector(e)}class mt extends HTMLDivElement{constructor(){super(),this.rendered={button:HTMLLabelElement,input:HTMLInputElement,form:HTMLFormElement},this.input=!1,this.onlyAcceptable=!1}connectedCallback(){setTimeout((()=>{this.upload=new pt(this),this.drag=new vt(this),this.render()}),50)}render(){let e=this;this.limit=parseInt(this.dataset.limit),this.max=parseInt(this.dataset.maxSize),this.total=0,this.rendered.input=this.querySelector("input[type=file]"),this.rendered.button=this.rendered.input.closest("label"),this.rendered.form=this.closest("form"),this.readonly=!!this.dataset.readonly,this.addEventListener("contextmenu",this.onContext.bind(this)),this.dataset.name&&(this.input=!0,this.name=this.dataset.name,this.limit=1),this.dataset.callback&&(this.callback=window[this.dataset.callback]),this.dataset.onremove&&(this.onremove=window[this.dataset.onremove]),this.rendered.input&&(this.rendered.input.getAttribute("extension")?this.accepted=this.rendered.input.getAttribute("extension").split(","):this.rendered.input.getAttribute("accept")&&(this.accepted=this.rendered.input.getAttribute("accept").split(","),this.onlyAcceptable=Boolean(this.dataset.onlyAcceptable)),this.rendered.input.addEventListener("click",(t=>{e.querySelectorAll("div.dropzone-item").length>=this.limit&&t.preventDefault()})),this.rendered.input.addEventListener("change",(e=>{let t=[],s=e.currentTarget.files;for(let e=0;e<s.length;e++)t.push(s[e]);this.upload.upload(t)})));let t=Array.prototype.slice.call(e.querySelectorAll("div.dropzone-item"));t.forEach((e=>{new gt(this,e)})),void 0!==this.limit&&this.checkVisible(t.length)}onContext(e){let t=e.target.closest("a.xdropzone-item");if(!t)return;e.preventDefault();let s=t.querySelector("div.xdropzone-actions"),i=t.getBoundingClientRect(),a=e.clientY-i.top,n=e.clientX-i.left;this.clearContextMenus(),s.classList.add("xdropzone--context"),s.style.top=`${a}px`,s.style.left=`${n}px`,document.addEventListener("click",this.onContextOutsideClick.bind(this))}onContextOutsideClick(e){e.target.closest("a.xdropzone-item")||(this.clearContextMenus(),document.removeEventListener("click",this.onContextOutsideClick.bind(this)))}clearContextMenus(){this.rendered.content.querySelectorAll("div.xdropzone-actions").forEach((e=>{e.classList.remove("xdropzone--context"),e.removeAttribute("style")}))}checkLimit(e){return!(this.limit&&e>this.limit-this.querySelectorAll("div.dropzone-item").length)}checkSize(e){return!(this.max&&e/1024/1024>this.max)}checkVisible(e){let t=this.querySelector("div.dropzone-col");!this.readonly||t.classList.contains("d-none")?this.limit==e?t.classList.add("d-none"):this.limit!=e&&t.classList.contains("d-none")&&t.classList.remove("d-none"):t.classList.add("d-none")}highlight(e){!0!==e?this.classList.remove("xdropzone--dragover"):this.classList.add("xdropzone--dragover")}}class pt{constructor(e){var t;this.url="/upload/documents",this.items=[],this.me=e,this.progress=e.querySelector("label.dropzone-progress-item"),this.url=b.xw.zone+(e.dataset.uploadurl||this.url),this.data={refKey:e.dataset.refkey,refVal:e.dataset.refval,typeId:parseInt(e.dataset.typeid),clickable:null===(t=e.dataset.clickable)||void 0===t||t,preview:"126xAUTO"},e.dataset.extrauploadpost&&(this.data=Object.assign(Object.assign({},this.data),JSON.parse(e.dataset.extrauploadpost||"{}")))}upload(e){if(0!==e.length){for(let t=0;t<e.length;t++){if(!1===this.me.checkSize(e[t].size))return i.q.notify.show({title:"Viršytas failo dydis, maksimalus dydis "+this.me.max+" MB",message:"",type:"info"}),void(this.me.rendered.input.value=[]);if(this.me.onlyAcceptable&&e[t]&&!this.me.accepted.includes(e[t].type))return i.q.notify.show({title:"Netinkamas failo formatas, tinkami failo formatai: "+this.me.dataset.onlyAccept,message:"",type:"info"}),void(this.me.rendered.input.value=[])}if(!0===this.me.input&&(this.data.refKey="xinput",this.data.refVal=-999),this.me.checkLimit(e.length)){this.queue=e.length;for(let t=0;t<this.queue;t++)this.one(e[t])}else i.q.notify.show({title:"Viršytas failų limitas",message:null,type:"info"})}}one(e,t=!0){if(this.me.querySelectorAll("div.dropzone-item").length>=Number(this.me.dataset.limit))return;let s=this;const i=this.progress.cloneNode(!0);let n;this.me.appendChild(i),i.classList.remove("d-none"),n=!1===t?b.xw.zone+"/router/control_file_dropzone_simple/duplicateFile":this.url,new a.C.upload(n,e,this.data,(e=>{if("progress"===e.type);else if("complete"===e.type){this.queue--;let t=ht(e.html);i.remove(),this.me.appendChild(t),new gt(this.me,t.firstElementChild),s.items.push(e),void 0!==this.me.limit&&this.me.checkVisible(s.items.length)}else"error"===e.type||e.success;0===this.queue&&this.end()}))}end(){if(window.Pantera.run(),this.data.refVal>0||void 0===this.me.rendered.form||null===this.me.rendered.form)return this.me.callback&&this.me.callback(this.items,this.data),void(this.me.rendered.input.value="");let e="",t=this.me.rendered.form,s=this.me,i="_xdropzone";if(Array.prototype.slice.call(s.querySelectorAll("div.dropzone-col div.dropzone-item")).forEach(((t,s)=>{e=0!==s?e+","+t.dataset.pk:t.dataset.pk})),!0===this.me.input){return s.querySelector("input[name="+this.me.name+"]").value=e,void(this.me.rendered.button.style.display="none")}let a=t.querySelector(`input[name="${i}"]`);null===a&&(a=document.createElement("input"),a.name=i,a.type="hidden",t.appendChild(a)),a.value=e}}class vt{constructor(e){this.me=e,this.upload=e.upload,this.documentCards=e.querySelectorAll("div.dropzone-col[draggable=true]"),this.documentCards.forEach((e=>{e.addEventListener("dragstart",(t=>{t.dataTransfer.setData("text/plain",e.querySelector("div.dropzone-item").dataset.pk)}))})),e.addEventListener("dragleave",(()=>{this.me.highlight(!1)}),!1),e.addEventListener("dragover",(e=>{e.preventDefault(),e.stopPropagation(),this.me.highlight(!0)}),!1),e.addEventListener("drop",(t=>{if(t.preventDefault(),t.stopPropagation(),this.me.highlight(!1),e.classList.contains("xdropzone--disabled"))return;let s=this.collect(t);this.upload.upload(s)}),!1)}collect(e){let t,s=[];if(e.dataTransfer.items){t=e.dataTransfer.items;for(let e=0;e<t.length;e++)if("file"===t[e].kind){let i=t[e].getAsFile();s.push(i)}}else{t=e.dataTransfer.files;for(let e=0;e<t.length;e++)if("object"==typeof t[e]){let i=t[e];s.push(i)}}return s}}class gt{constructor(e,t){this.removeUrl="/upload/remove",this.me=e,this.el=t,"function"==typeof e.onremove&&(this.onremove=e.onremove);let s=t.querySelector("span.dropzone-item-action.dropzone-item-preview"),n=t.querySelector("a.dropzone-item-action.dropzone-item-remove"),r=t.querySelector("div.dropzone-item-data"),l=t.querySelector(".dropzone-item-crop");if(s)s.addEventListener("click",this.preview.bind(this)),r.addEventListener("click",this.preview.bind(this));else{t.querySelector("div.dropzone-item-meta").addEventListener("click",(e=>{if("I"!==e.target.tagName&&"A"!==e.target.tagName){t.querySelector("a.dropzone-item-download").click()}}))}if(n&&n.addEventListener("click",(s=>{s.preventDefault(),s.stopPropagation();let n=t.dataset.pk,r=e.upload.data,l={IsDeleted:1,refKey:r.refKey,refVal:r.refVal,typeId:r.typeId,pk:n};i.q.question.show({title:"Ar tikrai norite ištrinti failą?"},(e=>{!1!==e&&(t.dataset.extrauploadpost&&(l=Object.assign(Object.assign({},l),JSON.parse(t.dataset.extrauploadpost||"{}"))),t.dataset.unlink&&Boolean(t.dataset.unlink)&&(l.unlink=!0),this.removeUrl=b.xw.zone+(t.dataset.removeurl||this.removeUrl),new a.C.post(this.removeUrl,l,{json:!0},(e=>{let t=e;if(!0===t.success)return this.me.rendered.input.value="",this.el.parentElement.remove(),i.q.toast.show({message:"Ištrinta"}),void 0!==this.me.limit&&this.me.checkVisible(this.me.querySelectorAll("div.dropzone-item")),!0===this.me.input&&(this.me.rendered.button.style.display=""),void("function"==typeof this.onremove&&this.onremove());!1!==t.success||i.q.notify.error(dt.D.ajax,t.msg)})))}))})),l){let{refKey:e,refVal:t}=this.me.upload.data;l.addEventListener("click",(s=>{const i=s.currentTarget.closest("div.dropzone-item").dataset.pk;new ot.z(e,t,i)}))}}preview(e){if(e.target.closest("span.download")||e.target.classList.contains("download"))return;e.preventDefault(),e.stopPropagation();let{refKey:t,refVal:s}=this.me.upload.data,i=e.currentTarget.closest("div.dropzone-item").dataset.pk;new ot.z(t,s,i)}}customElements.define("dropzone-simple",mt,{extends:"div"});class ft{constructor(e,t,s){window.Pantera.plugins.cropper().then((()=>{let a=Object.assign({view_gallery:!0,crop:!0},s);t&&(a.input=t.getAttribute("name"));let n=`${b.xw.zone}/upload/gallery/dropzoneImage/${e}/${e}`;document.body.classList.add("crop-upload"),i.q.modal.show({url:n,title:"Gallery",data:a})}))}}class yt extends HTMLDivElement{constructor(){super(...arguments),this.url="/upload/documents",this.defaultImageParams={minWidth:0,maxWidth:Number.POSITIVE_INFINITY,minHeight:0,maxHeight:Number.POSITIVE_INFINITY,size:Number.POSITIVE_INFINITY},this.uploadFile=e=>{if("progress"===e.type);else if("complete"===e.type){const{progress:t,hidden:s}=this.rendered;let i=ht(e.html);t.classList.add("d-none"),this.prepend(i),new bt(this,i),s.value=e.path}else"error"===e.type||e.success}}connectedCallback(){setTimeout((()=>{this.classList.contains("dropzone-disabled")?this.addEventListener("click",(e=>{const t=e.target.closest(".dropzone-item");if(!t)return;const{pk:s}=t.dataset;new ot.z("dropzoneImage",0,+s,null,null,hidden)})):this.render()}))}render(){const e=this.querySelector("label"),t=this.querySelector("input"),s=this.querySelector("label.dropzone-progress-item"),i=this.querySelector("input[type=hidden]"),a=this.dataset.validationParams;if(this.hiddenInput=i,this.rendered={button:e,input:t,progress:s,hidden:i},this.itemType=this.dataset.itemType||"",this.url=b.xw.zone+this.url,a)try{let e=JSON.parse(a);this.imageParams=Object.assign(Object.assign({},this.defaultImageParams),e)}catch(e){console.warn("Blogi json parametrai",e)}t&&t.addEventListener("change",this.inputChanged.bind(this)),this.querySelector("div.dropzone-item")&&new bt(this,this.querySelector("div.dropzone-item"))}inputChanged(){const{input:e,button:t,progress:s,hidden:i}=this.rendered;0!==e.files.length&&(t.classList.add("d-none"),s.classList.remove("d-none"),new a.C.upload(this.url,e.files[0],{item_type:this.itemType},(e=>{i.value=e.pk;let t=ht(e.html);s.classList.add("d-none"),this.prepend(t),new bt(this,t),new ft(e.pk,i)})))}validateRatio(e,t){const{width:s,height:i}=e;return Math.floor(100*t)===Math.floor(s/i*100)}validateImageParams(e){let t=!0,s=e;const{width:i,height:a,size:n}=s,{minHeight:r,minWidth:l,maxHeight:o,maxWidth:d,size:c}=this.imageParams;return t=!!(+(r<a&&a<o)*+(l<i&&i<d)*+(n<c)),t}getImageParams(e){return new Promise((t=>{const s=new FileReader;let i={size:e.size};s.readAsDataURL(e),s.onload=e=>{const s=new Image;s.src=e.target.result,s.onload=function(){const{height:a,width:n}=s;t(Object.assign(Object.assign({},i),{width:n,height:a,src:e.target.result}))}}}))}}class bt{constructor(e,t){this.removeUrl="/upload/remove",this.me=e,this.el=t,this.el.classList.contains("dropzone-col")&&(this.el=this.el.querySelector("div.dropzone-item"));let s=t.querySelector("span.dropzone-item-action.dropzone-item-preview"),n=t.querySelector("a.dropzone-item-action.dropzone-item-remove"),r=t.querySelector("div.dropzone-item-data"),l=t.querySelector("a.dropzone-item-action.dropzone-item-crop");l&&l.addEventListener("click",this.openCropper.bind(this)),r&&r.addEventListener("click",this.preview.bind(this)),s&&s.addEventListener("click",this.preview.bind(this)),n&&n.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation();let s={IsDeleted:1,pk:this.el.dataset.pk};i.q.question.show({title:"Ar tikrai norite pašalinti nuotrauką?"},(e=>{!1!==e&&(t.dataset.extrauploadpost&&(s=Object.assign(Object.assign({},s),JSON.parse(t.dataset.extrauploadpost||"{}"))),t.dataset.unlink&&Boolean(t.dataset.unlink)&&(s.unlink=!0),this.removeUrl=b.xw.zone+(t.dataset.removeurl||this.removeUrl),new a.C.post(this.removeUrl,s,{json:!0},(e=>{let t=e;if(!0===t.success)return this.me.rendered.input.value="",this.el.remove(),i.q.toast.show({message:"Ištrinta"}),this.me.rendered.button.classList.remove("d-none"),this.me.rendered.hidden.value="",void("function"==typeof this.onremove&&this.onremove());!1!==t.success||i.q.notify.error(dt.D.ajax,t.msg)})))}))}))}openCropper(){new ft(parseInt(this.el.dataset.pk),this.me.hiddenInput)}preview(e){const t=e.target;if(t.closest("span.download")||t.classList.contains("download")||t.classList.contains("fa-crop"))return;e.preventDefault(),e.stopPropagation();let s=e.currentTarget.closest("div.dropzone-item").dataset.pk;new ot.z("dropzoneImage",s,s,null,null,this.me.hiddenInput)}}customElements.define("file-image",yt,{extends:"div"});class xt extends J.Z{_init(){this.switch=this.dataset.switch,this.hideBlocks();this.querySelectorAll(`[data-switch="${this.switch}"] input[type="radio"]`).forEach((e=>{e.checked&&this.setBlocks(e.value),e.onchange=()=>this.setBlocks(e.value)}))}setBlocks(e){this.hideBlocks(e),this.setActiveBlock(e)}hideBlocks(e){document.querySelectorAll(`[data-${this.switch}]:not(.radiogroup)`).forEach((t=>{if(this===t)return;if(e&&t.dataset.switch===e)return;t.style.display="none";let s=t.querySelectorAll("[name]");s&&s.forEach((e=>{e.disabled=!0}))}))}setActiveBlock(e){let t=document.querySelector(`[data-${this.switch}="${e}"]`);if(!t)return;t.classList.add("active"),t.style.removeProperty("display");let s=t.querySelectorAll("[name]");s&&s.forEach((e=>{e.disabled=!1}))}}customElements.define("radio-group-switcher",xt,{extends:"div"});class kt extends HTMLInputElement{constructor(){super(),this._validation={message:null,default:null,error:!1,validity:!1,info:null}}connectedCallback(){setTimeout((()=>{this._init()}))}_info(){this._validation.info}_validate(){this._validation.message=null,this._validation.validity=!1;let e=this.checkValidity();return!1===e?(this._validation.validity=!0,this._error(!1),!1):!0===e&&this.hasAttribute("maxlength")&&this.value.length>this.maxLength?(this._validation.message="Maksimalus lauko ilgis "+this.maxLength.toString(),this._error(!1),!1):(e=this._valid(),!1===e?(this._error(!1),!1):(this._error(!0),e))}_error(e){let t,s=this.parentNode.querySelector("label.is-invalid"),i=this.closest(".checkbox-wrap");if(i&&(s=i.querySelector("label.is-invalid")),!1===e)return this._validation.error=!0,t=!0===this._validation.validity?"Privalomas patvirtinimas":this._validation.message||this._validation.default,s.classList.remove("d-none"),void(s.textContent=t);!0===this._validation.error&&(s.textContent=null,s.classList.remove("d-none"),this._validation.error=!1)}}const _t=kt;class Lt extends _t{constructor(){super()}_init(){const e=document.querySelectorAll("input[name="+this.getAttribute("name")+"]:not(#"+this.id+")");this.addEventListener("change",(()=>{e.forEach((e=>{ut(e.dataset.toggle).classList.add("d-none")})),ut(this.dataset.toggle).classList.remove("d-none")}))}_valid(){return!0}}customElements.define("radio-toggle",Lt,{extends:"input"});class Et extends J.Z{constructor(){super(...arguments),this.onMouseDown=e=>{let t=e.target;this._offsetLeft||(this._offsetLeft=e.clientX-1.25*this.dotOne.offsetWidth),this._offsetWidth||(this._offsetWidth=this.track.offsetWidth),t.classList.contains("xslide-dot-circle")?(this.clickedDot=t.closest(".xslide-dot"),document.addEventListener("mousemove",this.onDotMove),document.addEventListener("mouseup",this.destroy),document.body.classList.add("user-select-none-all")):t.classList.contains("xslide-interval")&&(document.addEventListener("mousemove",this.onIntervalMove),document.addEventListener("mouseup",this.destroy),document.body.classList.add("user-select-none-all"))},this.onIntervalMove=e=>{let t=this.interval.offsetWidth,s=this.track.offsetWidth;const i=t/s*100;let a=(e.clientX-this._offsetLeft-t/2)/s*100,n=a+i;a<=0&&(a=0,n=i),n>=100&&(n=100,a=100-i),this.dotOne.style.left=this.interval.style.left=`${a}%`,this.dotTwo.style.left=`${n}%`,this.interval.style.right=100-n+"%",this.setInterval()},this.onDotMove=e=>{let t,s=e.clientX;t=s<this._offsetLeft?0:s>this._offsetLeft+this._offsetWidth?this._offsetWidth:s-this._offsetLeft,this.snapToStep?this.clickedDot.style.left=`${this.snapAmmount(t)}%`:this.clickedDot.style.left=t/this._offsetWidth*100+"%",this.setInterval()},this.destroy=()=>{document.removeEventListener("mousemove",this.onDotMove),document.removeEventListener("mousemove",this.onIntervalMove),document.removeEventListener("mouseup",this.destroy),document.body.classList.remove("user-select-none-all"),this.clickedDot=void 0,this.initialMousePos=void 0,this.setAttribute("data-from",this.intervalArr[1].toString()),this.setAttribute("data-to",this.intervalArr[0].toString());let e=new InputEvent("change");this.dispatchEvent(e)}}_init(){let e=this.querySelectorAll(".xslide-dot"),t=this;this.wrap=t.closest(".xslide-wrap"),this.maxVal=parseInt(t.dataset.maxVal),this.minVal=parseInt(t.dataset.minVal),this.maxValInput=this.wrap.querySelector("input.xslide-max"),this.minValInput=this.wrap.querySelector("input.xslide-min"),this.step=parseInt(t.dataset.step),this.interval=t.querySelector(".xslide-interval"),this.round=Math.pow(10,parseInt(t.dataset.round)),this.dotOne=e[0],this.dotOneCircle=this.dotOne.querySelector("div.xslide-dot-circle"),this.dotTwo=e[1],this.dotTwoCircle=this.dotTwo.querySelector("div.xslide-dot-circle"),this.dotOffsets=this.setInterval(),this.track=t.querySelector(".xslide-track"),this._offsetLeft=this.track.getBoundingClientRect().x,this._offsetWidth=this.track.offsetWidth,this.snapToStep="true"===this.dataset.snapToStep,this.intervalArr=[parseFloat(this.dotOne.style.left),parseFloat(this.dotTwo.style.left)],this.handleConnectedInputs(),t.addEventListener("mousedown",this.onMouseDown)}snapAmmount(e){let t=e/this._offsetWidth*100,s=Math.round(t/this.step)*this.step;return s>100&&(s=100),s<1&&(s=0),s}setInterval(){let e=parseFloat(this.dotOne.style.left),t=parseFloat(this.dotTwo.style.left),s=[e];e>t?s.push(t):s.unshift(t),this.interval.style.left=`${s[1]}%`,this.interval.style.right=100-s[0]+"%",this.intervalArr=s;let i=this.maxVal-this.minVal,a=i*s[1]/100,n=i*s[0]/100;return a=a%this.step<this.step/2?a-a%this.step+this.minVal:a+(this.step-a%this.step)+this.minVal,n=n%this.step<this.step/2?n-n%this.step+this.minVal:n+(this.step-n%this.step)+this.minVal,(100==s[1]||a>this.maxVal)&&(a=this.maxVal),(100==s[0]||n>this.maxVal)&&(n=this.maxVal),0==s[1]&&(a=this.minVal),0==s[0]&&(n=this.minVal),this.maxDotVal=n,this.minDotVal=a,parseInt(this.dotOne.style.left)<parseInt(this.dotTwo.style.left)?(this.dotOneCircle.innerText=a.toString(),this.dotTwoCircle.innerText=n.toString()):(this.dotOneCircle.innerText=n.toString(),this.dotTwoCircle.innerText=a.toString()),this.connectedMaxInput&&(this.connectedMaxInput.value=n.toString()),this.connectedMinInput&&(this.connectedMinInput.value=a.toString()),s}handleConnectedInputs(){const{connectedMinInput:e,connectedMaxInput:t}=this.dataset;if(t){let e=document.querySelector(`[name="${t}"]`);e&&(this.connectedMaxInput=e,this.connectedMaxInput.addEventListener("input",(e=>{let t=[this.dotOne,this.dotTwo].filter((e=>parseInt(e.style.left)>parseInt(this.dotOne.style.left)))[0]||this.dotTwo,s=e.currentTarget.value;t.style.left=s/this.maxVal*100+"%",this.setInterval()})))}if(e){let t=document.querySelector(`[name="${e}"]`);t&&(this.connectedMinInput=t,this.connectedMinInput.addEventListener("input",(e=>{let t=[this.dotOne,this.dotTwo].filter((e=>parseInt(e.style.left)<parseInt(this.dotOne.style.left)))[0]||this.dotOne,s=e.currentTarget.value;t.style.left=s/this.maxVal*100+"%",this.setInterval()})))}}}customElements.define("control-slider-range",Et,{extends:"div"});class wt extends HTMLInputElement{constructor(){super()}connectedCallback(){setTimeout((()=>{this._init()}))}_init(){this._boundSearch=this._search.bind(this),this.addEventListener("click",(()=>{new a.C.get(b.xw.zone+"/router/control_picker_icon/index",{},{},(()=>{this._listeners()}))}))}_listeners(){const e=document.querySelector(".icon-picker .icon-search input"),t=document.querySelectorAll('ul.icon-category-list [is="checkbox-simple"]'),s=document.querySelectorAll(".icon-picker ul.icon-list li.icon-list-item i");this.search=e,this.categories=t,this.icons=s;document.querySelector("ul.icon-category-list").addEventListener("click",this._boundSearch),e.addEventListener("search-changed",this._boundSearch),this.icons.forEach((e=>e.addEventListener("click",(()=>{this._iconClickHandler(e)}))))}_search(){const e=this.search.value,t=Array.prototype.slice.call(this.categories).reduce(((e,t)=>(e instanceof HTMLInputElement&&(e=!0===t.checked?e.name:""),!0===t.checked?`${e}${t.name};`:e)));document.querySelector("h1.icon-cat-name").innerHTML="Pasirinktos kategorijos: "+t;const s=t=>{let s=t.classList[1];return e&&-1===s.indexOf(e)?(t.closest("li").classList.add("d-none"),!1):(t.closest("li").classList.remove("d-none"),!0)};if(""==t)this.icons.forEach(s);else{let e=t.split(";");this.icons.forEach((t=>{e.includes(t.classList[2])?s(t):t.closest("li").classList.add("d-none")}))}}_iconClickHandler(e){this.value=e.dataset.icon,i.q.modal.close()}}customElements.define("control-picker-icon",wt,{extends:"input"});class St extends Ce{_init(){this.submit()}_valid(){return!0}get value(){return!0===this.checked?this.getAttribute("value"):"0"}set value(e){this.setAttribute("value",e),this._value=e}submit(){this.addEventListener("change",(e=>{let t=e.target.dataset.url,s=e.target.dataset.name,i=e.target.value,a="";0==e.target.value?(a="/router/control_checkbox_star/removeLink",i=e.target.getAttribute("value")):-1==e.target.value&&(a="/router/control_checkbox_star/addLink");let n=this;new O._(a,{url:t,name:s,value:i},{json:!0},(e=>{e.Id?n.value=e.Id:n.value=-1}))}))}}customElements.define("checkbox-star",St,{extends:"input"});class qt extends D{constructor(){super(...arguments),this.onClickListItem=e=>{let t=e.target.closest(".xselect-list-item");t&&([].slice.call(t.parentElement.children).map((e=>e.classList.remove("xselect-list-item--selected"))),this.value=t.dataset.value,t.classList.add("xselect-list-item--selected"))},this.onInput=e=>{let t=8==e.which||46==e.which,s=function(e){let t="";window.getSelection?t=window.getSelection():document.getSelection&&(t=document.getSelection());if(""==t)return!1;return!0}();if(!t&&!s)return this.value&&this.regExp.test(this.value)?(e.preventDefault(),!1):void 0},this.onKeyUp=e=>{let t=this.value.replace(/[^\d:]/gm,"").replace("::",":"),s=t.split(":"),i=parseInt(s[0]),a=parseInt(s[1]),n=8==e.which||46==e.which;if(i&&s[0].length>2){let e=t.slice(0,2),s=t.slice(2);t=`${e}:${s}`,i=parseInt(e)}this.value=t,!n&&/^\d{2}$/.test(this.value)&&(this.value=`${t}:`),1==this.value.length&&parseInt(this.value)>2&&(this.value=this.value.padStart(2,"0")+":"),a&&(this.value=`${i.toString().padStart(2,"0")}:${a}`)}}_init(){this.wrap=this.closest(".pantera-control"),this.listContent=this.wrap.querySelector(".xselect-list-content"),this.listContent.addEventListener("click",this.onClickListItem),this.regExp=new RegExp("^([01]?[0-9]|2[0-3]):[0-5][0-9]$"),this.addEventListener("keyup",this.onKeyUp),this.addEventListener("keydown",this.onInput)}_valid(){return!!this.regExp.test(this.value)}}customElements.define("control-picker-time-select",qt,{extends:"input"});class Ct extends HTMLIFrameElement{constructor(){super(),setTimeout((()=>{this._init()}),200)}_init(){this.contentDocument.designMode="on",this.toolbar=new Tt(this),this.textarea=this.previousElementSibling}update(){this.textarea.value=this.value}get value(){return this.contentWindow.document.body.innerHTML}}class Tt{constructor(e){this.iframe=e,this.content=this.iframe.contentWindow.document,document.querySelector("div.textarea-custom-toolbar").querySelectorAll("button[data-command]").forEach((e=>{e.addEventListener("click",(()=>{this.click(e.dataset.command)}))}))}click(e){this.content.execCommand(e,!1,""),this.iframe.update()}}customElements.define("textarea-iframe",Ct,{extends:"iframe"});class At extends HTMLDivElement{connectedCallback(){setTimeout((()=>{this._init()}))}_init(){this.comparisonOpDiv=this.querySelector("input#comparison_sign_select"),this.valueOneInput=this.querySelector("input#filter_money_value_one"),this.valueTwoInput=this.querySelector("input#filter_money_value_two"),this.outputDiv=this.querySelector("input#control-filter-money-input"),this.valueTwoDiv=this.querySelector("div#filter-money-value-two-div"),this.columnName=this.outputDiv.name,this.valueOneInput.addEventListener("pantera:input",this.formSql.bind(this)),this.valueTwoInput.addEventListener("pantera:input",this.formSql.bind(this)),this.operand="=",this.comparisonOpDiv.addEventListener("pantera:change",(e=>{this.operand=e.detail.id,"BETWEEN"===this.operand?this.valueTwoDiv.classList.remove("d-none"):this.valueTwoDiv.classList.add("d-none"),this.formSql()}))}formSql(){let e,t;e=Number.isNaN(parseInt(this.valueOneInput.value))?"0":this.valueOneInput.value,t=Number.isNaN(parseInt(this.valueTwoInput.value))?"0":this.valueTwoInput.value,"true"===this.outputDiv.dataset.only_operand?"="===this.operand?this.outputDiv.value="="+e:"<"===this.operand?this.outputDiv.value="<"+e:">"===this.operand?this.outputDiv.value=">"+e:"BETWEEN"===this.operand?(parseInt(e)>parseInt(t)&&([e,t]=[t,e]),this.outputDiv.value=" BETWEEN "+e+" AND "+t):this.outputDiv.value="":"="===this.operand?this.outputDiv.value=this.columnName+"="+e:"<"===this.operand?this.outputDiv.value=this.columnName+"<"+e:">"===this.operand?this.outputDiv.value=this.columnName+">"+e:"BETWEEN"===this.operand?(parseInt(e)>parseInt(t)&&([e,t]=[t,e]),this.outputDiv.value=this.columnName+" BETWEEN "+e+" AND "+t):this.outputDiv.value=""}}customElements.define("control-filter-money",At,{extends:"div"});class It extends HTMLDivElement{constructor(){super(),this._placement="bottom-start",this._foutsideClick=this._outsideClick.bind(this)}connectedCallback(){setTimeout((()=>{this._box=this.nextElementSibling,this._init()}))}_init(){if(!0!==("TD"===this.parentElement.nodeName))this.addEventListener("dblclick",(()=>{new a.C.post(b.xw.zone+"/router/control_directedit/show",{_dataset:this.dataset.dataset},{json:!1},(e=>{this._box.innerHTML=e,this._show()}))}));else{this.closest("td").addEventListener("dblclick",(e=>{let t=e.target;this._box.contains(t)||new a.C.post(b.xw.zone+"/router/control_directedit/show",{_dataset:this.dataset.dataset},{json:!1},(e=>{this._box.innerHTML=e,this._show()}))}))}}_show(){this._box.classList.remove("d-none"),this._popper=(0,A.fi)(this,this._box,{placement:this._placement,modifiers:[{name:"offset",options:{offset:[0,10]}}]}),setTimeout((()=>{const e=this._box.querySelector("input");e&&(e.focus(),e.selectionStart=e.value.length),document.addEventListener("click",this._foutsideClick)}),100)}_close(){this._box.classList.add("d-none"),this._popper&&this._popper.destroy(),document.removeEventListener("click",this._foutsideClick),this.dispatchEvent(new CustomEvent("pantera:closed"))}_outsideClick(e){let t=e.target;this._box.contains(t)||t instanceof It&&t===this||this._close()}}customElements.define("control-direct-edit",It,{extends:"div"});class Dt extends HTMLInputElement{connectedCallback(){setTimeout((()=>this._init()))}_init(){this.wrapper=this.closest("div.pantera-control"),this.box=this.wrapper.querySelector("div.filter-number.card");let e=this.box.querySelectorAll('input[type="radio"]'),t=this.box.querySelectorAll("div.filter-number-input-wrap"),s=this.box.querySelectorAll(".filter-number-input-wrap > input"),i="=";this.value="=",e.forEach((e=>e.addEventListener("click",(()=>{t.forEach((t=>{if(t.classList.contains(e.value)){switch(e.value){case"equals":this.value="="+t.querySelector("input").value,i="=";break;case"between":this.value=s[1].value+".."+s[2].value;break;case"moreThan":this.value=">"+t.querySelector("input").value,i=">";break;case"lessThan":this.value="<"+t.querySelector("input").value,i="<"}t.classList.remove("d-none")}else t.classList.add("d-none")}))})))),s.forEach((e=>{"between"===e.name?e.addEventListener("input",(()=>{this.value=s[1].value+".."+s[2].value})):e.addEventListener("input",(()=>{this.value=i+e.value}))}))}}customElements.define("control-filter-number",Dt,{extends:"input"});var $t=s(8981);class Mt extends HTMLDivElement{connectedCallback(){s.e(647).then(s.bind(s,3647)).then((({tpl:e})=>{this.templates=e,setTimeout((()=>this._init()))}))}_init(){this.getControls(),this.getValuesFromInputs(),this.onPopup(),this.addEventListener("click",(e=>{const t=e.target.closest(".dd-button-subtract");if(!t)return;e.stopPropagation();switch(t.closest(".dd-button").querySelector("input.dd-button-control").dataset.part){case"y":["y","m","d"].map((e=>this[e]=""));break;case"m":["m","d"].map((e=>this[e]=""));break;case"d":this.d=""}}))}onClickDatePart(){const e=({target:t})=>{let s=t.closest("[data-set]");if(!s)return;const{set:i,value:a}=s.dataset;this[i]=a,document.removeEventListener("click",e)};document.addEventListener("click",e)}getValuesFromInputs(){Object.keys(this.dateControls).map((e=>{const t=this.dateControls[e];let s=parseInt(t.value);switch(t.dataset.part){case"y":this.year=s;break;case"m":this.month=s;break;case"d":this.day=s}}))}onPopup(){this.addEventListener("click",(({target:e})=>{if(this.classList.contains("popup-open"))return;const t=e.closest(".dd-button"),s=e.closest(".dd-button-subtract");if(!t||s)return;const i=t.previousElementSibling;let a=!0;if(i.classList.contains("dd-button")&&(a=i.classList.contains("dd-button-active")),!a)return;this.classList.add("popup-open"),this.onClickDatePart(),this.renderPopperBox(t);const n=t.querySelector("input.dd-button-control");let r=this.popperBoxContentTpl(n.dataset.part);r&&(this.popperBox.innerHTML=r),setTimeout((()=>{const e=({target:t})=>{t.closest(".picker-date-dropdown-popup")||(this.destroyPopper(),document.removeEventListener("click",e),this.classList.remove("popup-open"))};document.addEventListener("click",e)}))}))}popperBoxContentTpl(e){let t;switch(e){case"y":void 0===this.year&&(this.year=(new Date).getFullYear()),t=this.templates.year({title:"Pasirinkite metus",year:this.year});break;case"m":void 0===this.month&&(this.month=(new Date).getMonth()),t=this.templates.month({month:this.month});break;case"d":void 0===this.day&&(this.day=(new Date).getDate()),t=this.templates.day({year:this.year,month:this.month,day:this.day})}return t}destroyPopper(){this.popper&&this.popper.destroy(),this.popperBox&&(document.body.removeChild(this.popperBox),this.popperBox=void 0)}renderPopperBox(e){this.destroyPopper();const t=document.createElement("div");t.classList.add("picker-date-dropdown-popup"),t.innerHTML="laba diena",document.body.appendChild(t),this.popperBox=t,this.popper=new $t.default(e,this.popperBox,{positionFixed:!0})}getControls(){this.control=this.querySelector("input.picker-date-dropdown-control");const e=[...this.querySelectorAll("input.dd-button-control")];this.dateControls=e.reduce(((e,t)=>{let s=new Object;return s[t.dataset.part]=t,Object.assign(Object.assign({},e),s)}),{})}setPartValue(e,t,s){this[s]=t;let i=this.dateControls[e];i&&(i.value=`${t}`,i.nextElementSibling.innerHTML=`${t}`,i.closest(".dd-button").classList.toggle("dd-button-active",!!t)),t&&(this.popperBox.innerHTML=this.popperBoxContentTpl(e));let a=[];["year","month","day"].map((e=>this[e]?a.push(`${this[e]}`.padStart(2,"0")):null)),this.control.value=a.join("-")}set y(e){this.setPartValue("y",e,"year")}set m(e){this.setPartValue("m",e,"month")}set d(e){this.setPartValue("d",e,"day")}}customElements.define("control-picker-date-dropdown",Mt,{extends:"div"});class jt extends J.Z{constructor(){super(...arguments),this.customNumberFilter=e=>{const t=this.getActiveTab().dataset.extra,s=e.target.closest(".spin").querySelector('input[is="number-spin"]'),i=parseInt(s.value),a=e.target.closest(".spin-container").previousElementSibling.querySelector('input[is="radio-simple"]'),n=new Date;let r,l,o;switch(t){case"relative_year":{const e=n.getFullYear()-i;l=this.dateFormated(new Date(e,n.getMonth(),n.getDate())),o=this.dateFormated(n)}break;case"relative_month":{let e=n.getMonth()-i,t=n.getFullYear();for(;e<=0;)e+=12,t-=1;l=this.dateFormated(new Date(t,e,n.getDate())),o=this.dateFormated(n)}break;case"relative_week":{const e=new Date(n.getTime());l=this.dateCalc(7,i,n),o=this.dateFormated(e)}break;case"relative_day":l=this.dateCalc(1,i,n),o=this.dateFormated(n)}r=`${l}..${o}`,a.value=r},this.setFilterText=()=>{if(this.filterToday.classList.contains("d-none")){const e=this.simpleFilter(),t=this.getActiveTab().dataset.extra;this.filterText.innerHTML="simple_range"===t?`Pasirinkta filtruoti pagal ${e.join("..")}`:`Pasirinkta filtruoti pagal ${e.join(",")}`}else{const e=this.getActiveTab().querySelector('input[is="radio-simple"]:checked');this.filterText.innerHTML=`Pasirinkta filtruoti pagal ${e.value}`}}}_init(){const e=[].slice.call(this.querySelector(".filter-date-views").children);this.views=e,this.input=document.querySelector(`input[name="${this.dataset.name}"]`),this.filterText=this.querySelector("div.filter-date-text"),this.switch=this.querySelector(".filter-date-header input[type=checkbox]"),this.submit=this.querySelector(".filter-date-footer a"),this.filterToday=this.querySelector("div.filter-date-today"),this.simpleContainers=this.querySelectorAll("div.filter-date-custom div.tab-pane");const t=this.querySelectorAll(".spin"),s=this.querySelectorAll('input[is="radio-simple"]');console.dir(s),this.switch.addEventListener("change",(()=>{e.forEach((e=>{e.classList.toggle("d-none")}))})),this.cloneTemplates(),this.submit.addEventListener("click",this.save.bind(this));for(let e=0;e<t.length;e++)t[e].addEventListener("change",this.customNumberFilter),t[e].addEventListener("change",this.setFilterText);s.forEach((e=>{e.addEventListener("click",this.setFilterText)})),this.simpleContainers.forEach((e=>{e.addEventListener("change",this.setFilterText)})),this.observerSetup()}save(){const e=this.getActiveTab(),t=e.dataset.extra;let s=[];if("simple_range"===t){e.querySelectorAll('input[type="hidden"].picker-date-dropdown-control').forEach((e=>{s.push(e.value)})),this.filter(t,s.join(".."))}else if(0!=this.simpleFilter().length)s=this.simpleFilter(),this.filter(t,s.join(","));else if("relative_year"===t){const s=e.querySelector("input[type=radio]:checked");console.log(s.value),this.filter(t,s.value)}else if("relative_month"===t){const s=e.querySelector("input[type=radio]:checked");this.filter(t,s.value)}else if("relative_week"===t){const s=e.querySelector("input[type=radio]:checked");this.filter(t,s.value)}else if("relative_day"===t){const s=e.querySelector("input[type=radio]:checked");this.filter(t,s.value)}}filter(e,t){this.input.value=t,this.input._close()}getActiveTab(){for(let e=0;e<this.views.length;e++){let t=this.views[e];if(!t.classList.contains("d-none"))return t.querySelector("div.tab-content > div.active")}}cloneTemplates(){[...this.querySelectorAll("a[data-clone]")].map((e=>e.addEventListener("click",(({currentTarget:e})=>{const t=e.dataset.clone;document.getElementById(t).render()}))))}dateCalc(e,t,s){const i=this.daysToMs(t*e),a=new Date(s.getTime()-i);return this.dateFormated(a)}dateFormated(e){return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`}daysToMs(e){return 24*e*60*60*1e3}observerSetup(){new MutationObserver((()=>{if(document.body.lastElementChild.classList.contains("picker-date-dropdown-popup")){const e=document.querySelector(".picker-date-dropdown-popup");this.insertAdjacentElement("afterend",e)}})).observe(document.body,{childList:!0});new MutationObserver((()=>{this.filterToday.classList.contains("d-none")||this.setFilterText()})).observe(this.filterToday,{attributes:!0,attributeFilter:["class"]});const e=this.querySelectorAll("a.nav-submenu-link"),t=new MutationObserver((()=>{this.setFilterText()}));e.forEach((e=>{t.observe(e,{attributes:!0,attributeFilter:["class"]})}));const s=this.querySelectorAll('input[type="hidden"].picker-date-dropdown-control'),i=this.querySelectorAll("span.dd-button-value"),a=new MutationObserver((()=>{i.forEach((e=>{e.innerHTML=e.innerHTML.padStart(2,"0")})),this.setFilterText()}));s.forEach((e=>{a.observe(e,{attributes:!0,attributeFilter:["value"]})}));const n=new MutationObserver((()=>{this.setFilterText()}));this.simpleContainers.forEach((e=>{n.observe(e,{subtree:!0,attributes:!0,attributeFilter:["value"]})}))}simpleFilter(){const e=this.getActiveTab(),t=e.dataset.extra,s={1:["01","02","03"],2:["04","05","06"],3:["07","08","09"],4:["10","11","12"]};let i=[];if("simple_year"===t){e.querySelectorAll("input[type=checkbox]:checked").forEach((e=>{i.push(e.value)}))}else if("simple_month"===t){e.querySelectorAll("input[type=checkbox]:checked").forEach((e=>{const t=e.closest("div.row").previousElementSibling.querySelector("input").value;i.push(t+"-"+e.value)}))}else if("simple_quarter"===t){e.querySelectorAll("input[type=checkbox]:checked").forEach((e=>{const t=e.closest("div.parent_el").querySelector("input").value;s[e.value].forEach((e=>{i.push(t+"-"+e)}))}))}else if("simple_range"===t){e.querySelectorAll('input[type="hidden"].picker-date-dropdown-control').forEach((e=>{i.push(e.value)}))}return i}}customElements.define("control-filter-date-box",jt,{extends:"div"});class Bt extends D{constructor(){super(...arguments),this._loaded=!1}_init(){}_show(){!1!==this._loaded?super._show():new a.C.post(b.xw.zone+"/router/control_filter_date/box",{name:this.getAttribute("name"),relative:this.dataset.relative||!1},{},(e=>{const t=ct(e);this._box.append(t),this._loaded=!0,this._show()}))}_valid(){return!0}set value(e){this._value=e,this.setAttribute("value",this._value),this.dispatchEvent(new CustomEvent("pantera:change",{bubbles:!0}))}get value(){return this._value}}customElements.define("control-filter-date",Bt,{extends:"input"});class Ht extends Ce{constructor(){super(...arguments),this.elements=[],this.parentsArr=[]}connectedCallback(){setTimeout((()=>this._init()))}_init(){const e=this.dataset.controls.split(","),t=this.closest("form");e.forEach((e=>{null===t.querySelector("[name="+e+"]")?console.warn("Checkbox/Display komponentui nepavyko rasti "+e+" elemento."):this.elements.push(t.querySelector("[name="+e+"]"))})),this.addEventListener("change",(e=>{1!=+this.value?(this.elements.map((e=>{1==e.required&&(e.disabled=!0);let t=e.closest("div.pantera-control");t.classList.add("d-none"),this.addIfNotExist(t.parentElement)})),this.parentsArr.map((e=>{this.checkIfParentEmpty(e)&&e.classList.add("d-none")}))):(this.elements.map((e=>{e.required&&(e.disabled=!1);let t=e.closest("div.pantera-control");t.classList.remove("d-none"),this.addIfNotExist(t.parentElement)})),this.parentsArr.map((e=>{this.checkIfParentEmpty(e)||e.classList.remove("d-none")})))}))}_valid(){return 1!=this.required||0!=this.checked}addIfNotExist(e){this.parentsArr.includes(e)||this.parentsArr.push(e)}checkIfParentEmpty(e){let t=e.getElementsByClassName("pantera-control").length;return e.querySelectorAll(".pantera-control.d-none").length===t}get value(){return!0===this.checked?"1":"0"}set value(e){super.value=e}}customElements.define("checkbox-display",Ht,{extends:"input"});const Nt={"text-simple":j,"text-ipaddress":B,"text-mail":H,"text-name":N,"text-captcha":P,"text-password":R,"select-simple":U,select_tree:Z,"select-autocomplete":K,"select-autocomplete-expand":X,"select-remote":se,"select-mega":ae,"select-options":ne,"select-multi":Q,"select-multiappend":ee,"number-phone":ue,"number-simple":me,"number-money":pe,"number-spin":ge,"number-percents":ve,"code-car":fe,"code-company":ye,"code-iban":ke,"code-person":Le,"code-post":we,"code-vat":Se,"checkbox-simple":Te,"checkbox-value":Ae,"checkbox-switch-simple":Ie,"checkbox-switch-inside":De,"checkbox-switch-material":$e,"picker-color-simple":He,"picker-date-simple":je,"picker-date-month":We,"picker-date-year":Ke,"picker-date-range-month":Je,"code-ip":_e,"picker-date-inline":ze,"picker-date-range-simple":Pe,"picker-rate":Ge,"picker-time-simple":Qe,"picker-date-birthday":tt,control_text_url:st,"control-picker-datetime":it,"control-picker-time-quick":rt,"control-picker-date-quarter":M,"dropzone-simple":mt,"radio-group-switcher":xt,"radio-toggle":Lt,"select-model-switcher":G,"control-slider-range ":Et,"file-image":yt,"control-picker-icon":wt,"checkbox-star":St,"control-picker-time-select":qt,"textarea-iframe":Ct,control_filter_money:At,"control-direct-edit":It,"control-filter-number":Dt,"control-picker-date-dropdown":Mt,"control-filter-date":Bt,"checkbox-display":Ht};var Ot=s(5156),Pt=s(3379),Rt=s.n(Pt),Ft=s(6739),Ut={insert:"head",singleton:!1};Rt()(Ft.Z,Ut);Ft.Z.locals;class zt{constructor(e,t){this._initDrag=e=>{e.stopPropagation();let t=e.target,s=t.closest(this.handle||this.item);if(this.onInitDrag&&this.onInitDrag({target:t,handle:s}),s){document.body.classList.add("user-select-none-all"),this.dragItem=t.closest(this.item||this.handle);let s=this.dragItem.getBoundingClientRect();this.dragItem.classList.add("xsort--drag"),this.dragItem.style.width=`${s.width}px`;const{clientX:i,clientY:a}=e,{top:n,left:r}=s,l=a-n,o=i-r;this.mousePosCache={clientX:i,clientY:a},this.deltaClickOffset={top:l,left:o},this._setDragItemPos({top:a,left:i}),this.createPlaceholder(this.dragItem),document.addEventListener("mousemove",this._onDrag),document.addEventListener("mouseup",this._stopDrag)}},this.createPlaceholder=e=>{let t,s=e.getBoundingClientRect().height;this.tableRowPlaceholder?t=this.tableRowPlaceholder:(t=document.createElement("div"),t.classList.add("xsort-placeholder")),t.style.height=`${s}px`,this.placeholder=t,this.setPlaceholder(e)},this.setPlaceholder=e=>{let t=e.nextElementSibling;"North"==this.mouseDirY&&(t=e);let s=e.closest(this.parent),i=this.el.contains(s);if(s&&i){let e=this.placeholder.cloneNode(!!this.tableRowPlaceholder);s.insertBefore(e,t),this.placeholder.remove(),this.placeholder=e,this.onSetPlaceholder&&this.onSetPlaceholder(e)}},this._onDrag=e=>{const t=e.target,{clientX:s,clientY:i}=e,a=t.closest(this.item);a&&!t.classList.contains("xsort-placeholder")&&(this.calcMouseDirection({clientX:s,clientY:i}),this.setPlaceholder(a)),this._setDragItemPos({top:i,left:s}),this.onDrag&&this.onDrag({target:t,closestItem:a})},this.calcMouseDirection=({clientX:e,clientY:t})=>{const s=this.mousePosCache.clientX,i=this.mousePosCache.clientY;let a,n;return e>s&&t==i?a="East":e<s&&t==i&&(a="West"),e==s&&t>i?n="South":e==s&&t<i&&(n="North"),this.mousePosCache.clientX=e,this.mousePosCache.clientY=t,this.mouseDirY=n,{x:a,y:n}},this._setDragItemPos=({top:e,left:t})=>{let s=e-this.deltaClickOffset.top,i=t-this.deltaClickOffset.left;this.dragItem.style.top=`${s}px`,this.dragItem.style.left=`${i}px`},this._stopDrag=()=>{document.removeEventListener("mousemove",this._onDrag),document.removeEventListener("mouseup",this._stopDrag),document.body.classList.remove("user-select-none-all"),this.dragItem.classList.remove("xsort--drag"),this.dragItem.style.top="",this.dragItem.style.left="",this.dragItem.style.width="",this.dragItem.remove(),this.placeholder.outerHTML=this.dragItem.outerHTML,this.onDragStop&&this.onDragStop({item:this.dragItem})},this.el=e,this.nesting=t.nesting||!1,this.parent=t.parent,this.parentEl=document.querySelector(t.parent),this.item=t.item,this.handle=t.handle;let s=this.el.closest("table");return s&&this.createRowPlaceholder(s),e.addEventListener("mousedown",this._initDrag),this}on(e){Object.keys(e).map((t=>{"function"==typeof e[t]&&(this[t]=e[t])}))}createRowPlaceholder(e){let t=e.querySelector("tr").children.length+1,s=document.createElement("tr");s.classList.add("xsort-placeholder"),s.innerHTML=`<td colspan="${t}" class="xsort-placeholder-td"></td>`,this.tableRowPlaceholder=s}}class Vt{constructor(e){this.details=[];let t=this;if(t.el=e,t.current_page=1,t.render(e),t.ajax=new Zt(t),e.pantera=this,t.cache_id=t.el.dataset.cacheId,t.ajax.ls&&t.ajax.ls._activeRow){let e=this.rendered.tbody.querySelector(`tr.xtable-content-row[data-pk="${t.ajax.ls._activeRow}"]`);e&&(e.classList.add("active"),e.dataset.controls&&this.controlHandler(JSON.parse(e.dataset.controls)))}t.listeners=new Wt(t)}render(e){let t=e.querySelector("table.tm"),s=t.querySelector("thead"),i={table:t,headers:s.querySelector("tr"),filters:s.querySelector("tr"),tbody:t.querySelector("tbody"),thead:s,tbodyWrap:e.querySelector("div.xtable-body"),summary:t.querySelector("tfoot"),paginator:e.querySelector("div.tfoot"),caption:e.querySelector("div.module-top"),actions:e.querySelector("div.module-top-right div.dropdown-menu"),extraFilters:e.querySelector("div.xtable-filters-extra"),clearFiltersBtn:e.querySelector("a.xtable-filters-clear"),headerFilters:{bullets:[]}};i.tbody.querySelector(".xgrid_row-sorticon")&&this.sortable(i),this.rendered=i,this.dataset=e.dataset.dataset;let a=this.rendered.headers.querySelectorAll("th");if(a.forEach((e=>{e.style.width||e.width||(e.style.width=e.clientWidth.toString()+"px")})),this.cols=a.length,e.dataset.control){e.dataset.control.split(",").forEach((e=>{this.details.push(document.querySelector("#"+e))}))}let n=i.caption.querySelector("a.xtable-reset");n&&n.addEventListener("click",(()=>{let e={};if(i.caption.querySelector("div.search input").value="",this.listeners.active._search="",this.listeners.extraFilters.container){this.listeners.extraFilters.reset(),e=this.listeners.extraFilters.serialize(this.listeners.extraFilters.form),this.ajax.filter(Object.assign(Object.assign({},e),this.listeners.active)),Object.keys(this.ajax.state).filter((e=>0===e.indexOf("extra"))).length>0?this.listeners.extraFilters.extra.classList.add("active"):this.listeners.extraFilters.extra.classList.remove("active")}else this.ajax.filter(this.listeners.active)}))}getCheckedValues(e=!1,t=","){let s=[];return this.rendered.tbody.querySelectorAll("td.xcheckbox input:checked").forEach((e=>{let t=e.closest("tr");s.push(t.dataset.pk)})),!0===e?s:s.join(t)}filter(e,t){let s={};s[e]=t,this.ajax.filter(s)}reload(){this.ajax.page(this.current_page)}controlHandler(e){if(e)if(e.id){let t=document.querySelector("#"+e.id);if(!t)return;t.refresh(e.url)}else Object.keys(e).forEach((t=>{let s=document.querySelector("#"+t);if(!s)return;let i=s.pantera;i&&i.ajax.filter({_control:e[t]})}))}sortable(e){const t=this;new zt(e.tbody,{parent:".table-model-body",item:"tr.xtable-content-row",nesting:!1,handle:"i.xgrid_row-sorticon"}).on({onDragStop:s=>{let i=s.item.dataset.pk||document.querySelector(".dragging").dataset.pk,n=e.tbody.querySelector("tr[data-pk='"+i+"']"),r=n.previousElementSibling,l=n.nextElementSibling,o=n.querySelector("i.xgrid_row-sorticon").dataset.sortindex,d=r?r.querySelector("i.xgrid_row-sorticon").dataset.sortindex:-1,c=l?l.querySelector("i.xgrid_row-sorticon").dataset.sortindex:99999,h=n.querySelector("i.xgrid_row-sorticon").dataset.sort,u={current:o,next:c,prev:d,model:t.dataset,sort_params:h};new a.C.post(b.f.zone+"/actions/xtable/sortorder",u,{},(()=>{document.querySelectorAll("#content div.table-model").forEach((function(e){e.pantera.reload&&e.pantera.reload()}))}))},onDrag:()=>{},onInitDrag:()=>{},onSetPlaceholder:()=>{}})}}class Wt{constructor(e){this.active={},this.event={outside:MouseEvent},this.me=e,this.checkboxes(),this.filters(),this.sort(),this.body(),this.footer(),this.sql_helper(),this.extraFilters=this.extra_filters(),this.archive(),this.clear_filters(),window.onresize=()=>{this.rerender_td_withs()}}checkboxes(){this.me.rendered.caption.querySelectorAll("a.table-export-type").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation();let s=t.target.dataset.export||"excel",i=Object.assign(Object.assign({_dataset:this.me.dataset},this.me.ajax.state),{export:s});"javascript:;"==e.href?Ot._.download(b.xw.zone+"/xtable/export",i):Ot._.download(e.href,i)}))}));let e=this.me.rendered.headers.querySelector("[data-checkbox] input");if(!e)return;e.addEventListener("change",(e=>{e.stopPropagation();let t=e.target.checked;this.me.rendered.tbody.querySelectorAll("div.xtable-checkbox input").forEach((e=>{e.checked=t})),this.toggle_checkbox_actions(t)}));let t=Array.prototype.slice.call(this.me.rendered.actions.querySelectorAll("a[data-url]")),s=Array.prototype.slice.call(this.me.el.querySelectorAll(".table-checkbox-action")),n=t.concat(s);this.checkboxActions=s,this.toggle_checkbox_actions(!1),n.forEach((e=>{e.addEventListener("mousedown",(t=>{if(1!==t.which)return!1;let s=e.dataset.url||e.href,n=!!e.dataset.get,r=e.classList.contains("action"),l=this.me.getCheckedValues(),o=!!e.dataset.modal,d=!("xaction"!==e.dataset.type&&!e.classList.contains("table-checkbox-action")),c=e.dataset.question;if(""==l&&!r)return i.q.notify.show({title:null,message:"Prašome pažymėti bent vieną eilutę",type:"info"}),!0!==o&&!0!==d||(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()),!1;if(!0===o||!0===d)return e.dataset.post=JSON.stringify({checked:l}),!1;if(c){let e=JSON.parse(c);return i.q.question.show(e,(e=>{!1!==e&&(n?new a.C.get(s,{checked:l},{json:!0},null):new a.C.post(s,{checked:l},{json:!0},null))})),!1}n?new a.C.get(s,{checked:l},{json:!0},null):new a.C.post(s,{checked:l},{json:!0},null)}))}))}filters(){let e=this.me,t=e.rendered.caption.querySelector("div.search input");if(t){t.addEventListener("keyup",(s=>{13===s.which&&(this.active._search=t.value,e.ajax.filter(this.active))})),e.rendered.caption.querySelector("div.search span.search-clear").addEventListener("click",(()=>{t.value="",this.active._search="",e.ajax.filter(this.active)}))}if(this.me.rendered.caption)try{let t=this.me.rendered.caption.querySelectorAll("div.xtable-filters > div");t.length&&t.forEach((t=>{t.classList.contains("filter-bullet")?e.rendered.headerFilters.bullets.push(new Kt(t,e)):t.classList.contains("dropdown")&&new Yt(t,e)}))}catch(e){console.error(e),console.error("tikriausiai nera caption")}if(this.me.rendered.extraFilters=this.me.el.querySelector(".module-top-filter-card"),e.rendered.filters){let t=e.rendered.filters.querySelectorAll("input");e.rendered.filters.querySelectorAll("select").forEach((t=>{t.addEventListener("change",(()=>{this.active[t.name]=t.value,e.ajax.filter(this.active)}))})),t.forEach((e=>{let t=e.closest("th"),s=e.name,i=t.querySelector("a.clear"),a=e.closest(".form-group");i&&console.log("clear yra"),["keyup","keypress","blur","change"].forEach((t=>{e.addEventListener(t,(()=>{this.active[e.name]=e.value,e.value.length>0?a.classList.add("has-value"):a.classList.remove("has-value")}))})),["xdate","xdaterange","xtime","xmonth"].includes(e.dataset.type)?e.addEventListener("change",(()=>{let t=e.value;this.active[s]=t,this.me.ajax.filter(this.active)})):e.addEventListener("keyup",(t=>{let i=t.keyCode?t.keyCode:t.which,a=e.value;13===i&&(this.active[s]=a,this.me.ajax.filter(this.active))}))}))}}sort(){let e=this.me.rendered.headers.querySelectorAll("th[data-sort]"),t="sort-asc",s="sort-desc";e.forEach((i=>{i.addEventListener("mousedown",(a=>{a.preventDefault(),e.forEach((e=>{e!==i&&(e.classList.remove(t),e.classList.remove(s))}));let n,r=parseInt(i.dataset.sort);return i.classList.contains(t)?(i.classList.remove(t),i.classList.add(s),n="desc"):i.classList.contains(s)?(i.classList.remove(s),n="restore"):(i.classList.add(t),n="asc"),this.me.ajax.sort(r,n),!1}))}))}body(){let e=this.me,t=e.rendered.tbody,s=t.querySelectorAll("td.xexpand"),i=t.querySelectorAll("tr");i.forEach((t=>{t.addEventListener("click",(s=>{let n=s.target;if("A"==n.nodeName||"I"==n.nodeName||"LABEL"==n.nodeName||"INPUT"==n.nodeName||"SPAN"==n.nodeName||"BUTTON"==n.nodeName)return;let r=n.closest("td");if(r&&r.classList.contains("xcheckbox")){let e=r.querySelector('input[type="checkbox"]');e&&this.toggle_checkbox_actions(!e.checked)}else if(!(r&&(r.classList.contains("xexpand")||r.querySelectorAll("button").length>0)||n.closest("div")&&n.closest("div").classList.contains("xmega"))){if(e.ajax.cache_ls({_activeRow:t.dataset.pk}),e.details&&e.details.forEach((s=>{s.pantera.filter(e.el.dataset.key,t.dataset.pk)})),t.dataset.controls&&e.controlHandler(JSON.parse(t.dataset.controls)),t.dataset.url){if(s.ctrlKey||s.shiftKey||"_blank"===t.dataset.target)return void window.open(t.dataset.url,"_blank");if(e.el.dataset.updateDom)return void d.X.content.update(t.dataset.url,{targetId:e.el.dataset.updateDom.split(","),collapseOnUpdate:!0,updateurl:!0});{h.R.start();let s,a=e.el.dataset.loadTarget;if(a){let e=document.querySelector(a);e&&(s={target:e})}return d.X.content.load(t.dataset.url,s),void l(i,t)}}!t.dataset.modal||r.dataset.directEdit||n.dataset.directEdit||new a.C.post(t.dataset.modal,{},{json:!1}),l(i,t),e.el.dispatchEvent(new CustomEvent("rowclick",{detail:{pk:t.dataset.pk,element:t,values:t.dataset.rowValues?JSON.parse(t.dataset.rowValues):{}}}))}function l(e,t){e.forEach((e=>{e.classList.remove("active")})),t.classList.add("active")}}))})),s.forEach((t=>{t.addEventListener("mousedown",(()=>{let s=t.closest("tr").nextElementSibling,i=t.querySelector("i");if(!i.classList.contains("fa-chevron-down"))return i.classList.remove("fa-chevron-up"),i.classList.add("fa-chevron-down"),s.style.display="none",void t.closest("tr").classList.remove("expanded");i.classList.remove("fa-chevron-down"),i.classList.add("fa-chevron-up"),t.closest("tr").classList.add("expanded"),t.classList.contains("expanded")?s.style.display="":(t.classList.add("expanded"),h.R.start(),new a.C.post(t.dataset.url,{},{json:!1},((s,i)=>{if("modal"==i)return;let a=document.createElement("tr"),n=document.createElement("td");n.colSpan=e.cols,n.innerHTML=s,a.appendChild(n),t.parentElement.insertAdjacentElement("afterend",a),Qi(),h.R.stop()})))}))})),t.querySelectorAll("td.xcheckbox").forEach((e=>{let t=e.querySelector("input");e.addEventListener("click",(e=>{if("TD"!=e.target.tagName)return;let s=t.checked;t.checked=!1===s}))}))}footer(){let e=this.me;if(this.rerender_td_withs(),!e.rendered.paginator)return;let t=e.rendered.paginator.querySelectorAll("ul.paginator-center a");0!==t.length&&t.forEach((t=>{t.addEventListener("click",(()=>{let s=parseInt(t.dataset.page);e.ajax.page(s)}))}));let s=e.rendered.paginator.querySelector("div.paginator-right input[type=hidden]");s&&s.addEventListener("pantera:change",(t=>{let s=t.target;if("Visi"===s.value)e.ajax.perpage(150);else{let t=parseInt(s.value);e.ajax.perpage(t)}}))}extra_filters(){return new Xt(this.me.rendered.extraFilters,this.me)}sql_helper(){let e,t,s=this.me.el.querySelector("div.xtable-sql");function i(s){let a=s.target.classList.contains("xtable-sql-query"),n=s.target.classList.contains("xtable-sql"),r=s.target.closest(".xtable-sql");a||n||r||(e&&e.destroy(),t&&(t.style.display="none"),document.removeEventListener("click",i))}s&&(t=s.querySelector("div.xtable-sql-query"),e&&e.destroy(),s.addEventListener("click",(()=>{let n={_dataset:s.closest("div.xtable").dataset.dataset};s.classList.contains("default")||(n=Object.assign(Object.assign({},n),this.me.ajax.state)),new a.C.post(b.xw.zone+"/xtable/format_sql",n,{json:!0},(a=>{s.querySelector(".xtable-sql-query").innerHTML=a.sql;let n=document.createElement("textarea");n.value=t.innerHTML.replace(/<br\s*\/?>/gm,"\n").replace(/<[^>]*>?/gm,"").replace("&lt;","<").replace("&gt;",">"),document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),document.addEventListener("click",i),t.style.display="block",e=(0,A.fi)(s.querySelector(".xtooltip"),t,{modifiers:[{name:"offset",options:{offset:[0,5]}},{name:"preventOverflow",options:{boundary:document.getElementById("content")}}]})}))})))}archive(){if(!this.me.rendered.caption)return;let e=this.me.rendered.caption.querySelector("div.module-top-right input[name='archive']");e&&e.addEventListener("change",(()=>{this.me.ajax.filter({_archive:e.checked});let t=document.querySelector('[data-itemId="1"]');t&&(t.classList.contains("d-none")?t.classList.remove("d-none"):t.classList.add("d-none"))}))}clear_filters(){if(window)return;let e,t;const s=this.me.rendered.caption.querySelectorAll("div.xfilter");this.me.rendered.filters&&(e=this.me.rendered.filters.querySelectorAll("input"),t=this.me.rendered.filters.querySelectorAll("select"));let i=this.me.rendered.caption.querySelectorAll("input"),a=this.me.rendered.caption.querySelectorAll("select");this.me.rendered.clearFiltersBtn&&this.me.rendered.clearFiltersBtn.addEventListener("click",(()=>{this.me.ajax.clear_state(),this.me.el.dataset.cache="[]",s.length&&s.forEach((e=>{e.classList.remove("active")})),e.forEach((e=>{"checkbox"===e.type?e.checked=!1:e.value&&(e.value=null,e.closest("div.form-group").classList.remove("has-value"))})),i.forEach((e=>{"checkbox"===e.type?e.checked=!1:e.value&&(e.value=null,e.closest("div.form-group").classList.remove("has-value"))})),t.forEach((e=>e.value=null)),a.forEach((e=>e.value=null)),this.me.rendered.headerFilters.bullets.forEach((e=>{e.restore()})),this.extraFilters.reset()}))}rerender_td_withs(){document.querySelectorAll(".xtable.with-scrollbar").forEach((e=>{let t=e.pantera;if(void 0===t)return;let s,i=[],a=t.rendered.tbody,n=0,r=t.rendered.table.querySelectorAll("thead .headers th");r.forEach((function(e,t){i[t]="auto"===e.style.width?"auto":e.offsetWidth.toString()+"px",(0===t||parseInt(i[t])>n)&&(n=parseInt(e.style.width)||e.offsetWidth,s=e)})),-1===i.indexOf("auto")&&s&&(s.style.width="auto",r.forEach((function(e,t){i[t]="auto"===e.style.width?"auto":e.offsetWidth.toString()+"px"}))),t.rendered.tbody.querySelectorAll("tr").forEach((e=>{e.querySelectorAll("td").forEach(((e,t)=>{e.style.width=i[t]}))})),a.style.display="block",a.scrollHeight>a.offsetHeight?a.classList.add("tbody_scrollable"):a.classList.remove("tbody_scrollable"),a.scrollTop=0}))}toggle_checkbox_actions(e){this.checkboxActions.forEach((t=>{t.classList.toggle("d-none",!e)}))}}class Zt{constructor(e){this.url=b.xw.zone+"/xtable/body",this.state={},this.ls={},this.me=e,this.state=JSON.parse(e.el.dataset.cache),this.ls=JSON.parse(localStorage.getItem(e.el.dataset.cacheId))}filter(e){let t={_dataset:this.me.dataset,_type:"filter"},s=this.me;this.cache(Object.assign(Object.assign({},t),e));let i=Object.keys(this.state).filter((function(e){return 0!==e.indexOf("_")}));a.C.json.load(this.url,this.state,(function(e){if(s.rendered.tbody.innerHTML=e.body,s.rendered.summary.innerHTML=e.summary,s.rendered.paginator.innerHTML=e.paginator,s.rendered.clearFiltersBtn&&s.rendered.clearFiltersBtn.classList.toggle("d-none",0===i.length),0==e.total)return s.rendered.summary.style.display="none",void(s.rendered.paginator.style.display="none");if(s.rendered.summary.style.display="",s.rendered.paginator.style.display="",s.listeners.body(),s.listeners.footer(),Qi(),s.ajax.ls&&s.ajax.ls._activeRow){let e=s.rendered.tbody.querySelector(`tr[data-pk="${s.ajax.ls._activeRow}"]`);e&&e.classList.add("active")}s.listeners.sql_helper()}))}sort(e,t){let s={_dataset:this.me.dataset,_type:"sort",_orderBy:e,_orderDir:t},i=this.me;h.R.start(i.el),this.cache(s),a.C.json.load(this.url,this.state,(function(e){i.rendered.tbody.innerHTML=e.body,i.rendered.paginator.innerHTML=e.paginator,i.listeners.body(),i.listeners.footer(),h.R.stop(),Qi()}))}page(e){let t=this.me,s={_dataset:this.me.dataset,_type:"page",_page:e};this.cache(s),a.C.json.load(this.url,this.state,(function(s){t.current_page=e,t.rendered.tbody.innerHTML=s.body,t.rendered.paginator.innerHTML=s.paginator,t.listeners.body(),t.listeners.footer(),Qi(),t.rendered.table&&t.rendered.table.dispatchEvent(new CustomEvent("pagination"))})),delete this.state._page}perpage(e){let t=this.me,s={_dataset:this.me.dataset,_type:"page",_perpage:e};this.cache(s),a.C.json.load(this.url,this.state,(function(s){t.rendered.tbody.innerHTML=s.body,console.log(s),t.rendered.paginator.innerHTML=s.paginator,console.log(e),console.log(t.rendered.paginator.querySelector('div[data-value="Visi"]')),150==e&&t.rendered.paginator.querySelector('div[data-value="Visi"]').classList.add("xselect-list-item--selected"),t.listeners.body(),t.listeners.footer(),Qi()}))}cache(e){let t=Object.assign(Object.assign({},this.state),e);for(let e in t)null!==t[e]&&void 0!==t[e]&&""!==t[e]||delete t[e];this.state=t}cache_ls(e){let t=Object.assign(Object.assign({},this.ls),e);for(let e in t)null!==t[e]&&void 0!==t[e]&&""!==t[e]||delete t[e];this.ls=t;let s=Object.assign({},t);Object.keys(s).length>0?localStorage.setItem(this.me.cache_id,JSON.stringify(s)):localStorage.removeItem(this.me.cache_id)}clear_state(){this.state={},this.filter({})}}class Yt{constructor(e,t){this.el=e,this.table=t;let s=e.querySelector("div.dropdown-menu"),i=s.dataset.name,a={};s.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation();let n,r=t.target,l="";if(r.classList.contains("xfilter-label"))n=r.querySelector("input");else{n=r.closest("label.xfilter-label").querySelector("input")}n.checked=!n.checked;let o=s.querySelectorAll("input:checked");0===o.length?e.classList.remove("active"):e.classList.add("active"),o.forEach((e=>{l=l+e.dataset.value+","})),l=l.substr(0,l.length-1),a[i]=l,this.table.ajax.filter(a)}))}search(e){console.log("neveikia"+e)}}class Kt{constructor(e,t){this.el=e,this.table=t,this.defaults=[];let s=this,i=e.querySelectorAll('input[type="radio"]');i.forEach((e=>{e.addEventListener("click",(()=>{let t="bullet_"+e.name,a=e.value,n={};n[t]=a,s.table.ajax.filter(n),i.forEach((t=>{t==e?e.closest("label").classList.add("active"):t.closest("label").classList.remove("active")})),Qi()}))}))}restore(){this.el.querySelectorAll('a.xfilter-bullet-btn[href="javascript:;"]').forEach((e=>{this.defaults.includes(e)?e.classList.add("active"):e.classList.remove("active")}))}}class Xt{constructor(e,t){null!==e&&(this.container=e.querySelector("div.xtable-extra-filters-content"),null!==this.container&&(this.form=this.container.parentElement,this.extra=t.rendered.caption.querySelector("i.fa-filter").parentElement,this.el=e,this.table=t,this.submitBtn=e.querySelector("button.xtable-extra-filters-filter-btn"),this.resetFiltersBtn=e.querySelector("button.xtable-extra-filters-clear-filters-btn"),this.el.addEventListener("keydown",(e=>{if("Enter"===e.key){this.el.dispatchEvent(new CustomEvent("pantera:change",{detail:{}}));let e=this.serialize(this.form);this.table.ajax.filter(e),Object.keys(this.table.ajax.state).filter((e=>0===e.indexOf("extra"))).length>0?this.extra.classList.add("active"):this.extra.classList.remove("active")}})),this.submitBtn.addEventListener("click",(()=>{this.el.dispatchEvent(new CustomEvent("pantera:change",{detail:{}}));let e=this.serialize(this.form);this.table.ajax.filter(e),Object.keys(this.table.ajax.state).filter((e=>0===e.indexOf("extra"))).length>0?this.extra.classList.add("active"):this.extra.classList.remove("active")})),this.resetFiltersBtn.addEventListener("click",(()=>{this.reset()}))))}reset(){if(null===this.container)return;let e=this.container.querySelectorAll("input");for(let t=0,s=e.length;t<s;++t){let s=e[t];if("xselect"===s.dataset.type){s.value="";let e=s.parentElement;e.querySelector(".xselect-display-text")?e.querySelector(".xselect-display-text").textContent="":e.querySelector(".xselect-display-values").innerHTML=""}else{if("checkbox"===s.type){s.checked=!1;continue}if("hidden"===s.type)continue;s.value=""}}}serialize(e){let t={},s=e.querySelectorAll("input");for(let e=0;e<s.length;e++){let i=s[e];if(!i.name||i.disabled||"file"===i.type||"reset"===i.type||"submit"===i.type||"button"===i.type)continue;let a=i.closest("fieldset"),n="extra_"+i.name;if(!a||!a.disabled)if("select-multiple"===i.type)for(let e=0;e<i.options.length;e++)i.options[e].selected&&(t[n]=i.options[e].value);else"checkbox"!==i.type&&"radio"!==i.type?t[n]=i.value:"checkbox"===i.type&&(!0===i.checked?t[n]=i.value:t[n]=null)}return t}}class Jt{constructor(e){this.details=[];let t=this;if(t.el=e,t.current_page=1,t.render(e),t.ajax=new Qt(t),e.classList.contains("xtable-sortable")&&new ts({table:t}),e.pantera=this,t.cache_id=t.el.dataset.cacheId,t.ajax.ls&&t.ajax.ls._activeRow){let e=this.rendered.tbody.querySelector(`tr.xtable-content-row[data-pk="${t.ajax.ls._activeRow}"]`);e&&(e.classList.add("active"),e.dataset.controls&&this.controlHandler(JSON.parse(e.dataset.controls)))}t.listeners=new Gt(t)}render(e){let t={table:e,tbody:e.querySelector("div.content"),tbodyWrap:e.querySelector("div.xtable-body"),summary:e.querySelector("div.summary"),paginator:e.querySelector("div.tfoot"),caption:e.querySelector("div.module-top"),extraFilters:e.querySelector("div.xtable-filters-extra"),clearFiltersBtn:e.querySelector("a.xtable-filters-clear"),headerFilters:{bullets:[]}};if(this.rendered=t,this.dataset=e.dataset.dataset,e.dataset.control){e.dataset.control.split(",").forEach((e=>{this.details.push(document.querySelector("#"+e))}))}}filter(e,t){let s={};s[e]=t,this.ajax.filter(s)}reload(){this.ajax.page(this.current_page)}controlHandler(e){if(e){if(e.id){let t=document.querySelector("#"+e.id);if(!t)return;return t.pantera?void t.pantera.refresh(e.url):void setTimeout((function(){t.pantera.refresh(e.url)}),50)}Object.keys(e).forEach((t=>{let s=document.querySelector("#"+t);if(!s)return;let i=s.pantera;i&&i.ajax.filter({_control:e[t]})}))}}}class Gt{constructor(e){this.active={},this.event={outside:MouseEvent},this.me=e,this.filters(),this.sort(),this.body(),this.footer(),this.sql_helper(),this.extraFilters=this.extra_filters(),this.archive(),this.clear_filters(),window.onresize=()=>{this.rerender_td_withs()}}filters(){let e=this.me,t=e.rendered.caption.querySelector("div.search input");if(t){t.addEventListener("keyup",(s=>{13===s.which&&(this.active._search=t.value,e.ajax.filter(this.active))})),e.rendered.caption.querySelector("div.search span.search-clear").addEventListener("click",(()=>{t.value="",this.active._search="",e.ajax.filter(this.active)}))}}sort(){console.dir("sort")}body(){console.dir("body")}footer(){let e=this.me;if(this.rerender_td_withs(),!e.rendered.paginator)return;let t=e.rendered.paginator.querySelectorAll("ul.paginator-center a");0!==t.length&&t.forEach((t=>{t.addEventListener("click",(()=>{let s=parseInt(t.dataset.page);e.ajax.page(s)}))}));let s=e.rendered.paginator.querySelector("div.paginator-right input[type=hidden]");s&&s.addEventListener("pantera:change",(t=>{let s=t.target,i=parseInt(s.value);e.ajax.perpage(i)})),e.rendered.paginator.querySelectorAll("a.table-export-type").forEach((t=>{t.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation();let s=t.target.dataset.export,i=Object.assign(Object.assign({_dataset:this.me.dataset},e.ajax.state),{export:s});Ot._.download(b.xw.zone+"/xlist/export",i)}))}))}extra_filters(){return new es(this.me.rendered.extraFilters,this.me)}sql_helper(){let e,t,s=this.me.el.querySelector("div.xtable-sql");function i(s){let a=s.target.classList.contains("xtable-sql-query"),n=s.target.classList.contains("xtable-sql"),r=s.target.closest(".xtable-sql");a||n||r||(e&&e.destroy(),t&&(t.style.display="none"),document.removeEventListener("click",i))}s&&(t=s.querySelector("div.xtable-sql-query"),e&&e.destroy(),s.addEventListener("click",(()=>{let n={_dataset:s.closest("div.xtable").dataset.dataset};s.classList.contains("default")||(n=Object.assign(Object.assign({},n),this.me.ajax.state)),new a.C.post(b.xw.zone+"/xlist/format_sql",n,{json:!0},(a=>{s.querySelector(".xtable-sql-query").innerHTML=a.sql;let n=document.createElement("textarea");n.value=t.innerHTML.replace(/<br\s*\/?>/gm,"\n").replace(/<[^>]*>?/gm,"").replace("&lt;","<").replace("&gt;",">"),document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),document.addEventListener("click",i),t.style.display="block",e=(0,A.fi)(s.querySelector(".xtooltip"),t,{modifiers:[{name:"offset",options:{offset:[0,5]}},{name:"preventOverflow",options:{boundary:document.getElementById("content")}}]})}))})))}archive(){if(!this.me.rendered.caption)return;let e=this.me.rendered.caption.querySelector("div.module-top-right input[name='archive']");e&&e.addEventListener("change",(()=>{this.me.ajax.filter({_archive:e.checked})}))}clear_filters(){if(window)return;const e=this.me.rendered.caption.querySelectorAll("div.xfilter");let t=this.me.rendered.caption.querySelectorAll("input"),s=this.me.rendered.caption.querySelectorAll("select");this.me.rendered.clearFiltersBtn&&this.me.rendered.clearFiltersBtn.addEventListener("click",(()=>{this.me.ajax.clear_state(),this.me.el.dataset.cache="[]",e.length&&e.forEach((e=>{e.classList.remove("active")})),undefined.forEach((e=>{"checkbox"===e.type?e.checked=!1:e.value&&(e.value=null,e.closest("div.form-group").classList.remove("has-value"))})),t.forEach((e=>{"checkbox"===e.type?e.checked=!1:e.value&&(e.value=null,e.closest("div.form-group").classList.remove("has-value"))})),undefined.forEach((e=>e.value=null)),s.forEach((e=>e.value=null)),this.me.rendered.headerFilters.bullets.forEach((e=>{e.restore()})),this.extraFilters.reset()}))}rerender_td_withs(){document.querySelectorAll(".xtable.with-scrollbar").forEach((e=>{let t=e.pantera;if(void 0===t)return;let s,i=[],a=t.rendered.tbody,n=0,r=t.rendered.table.querySelectorAll("thead .headers th");r.forEach((function(e,t){i[t]="auto"===e.style.width?"auto":e.offsetWidth.toString()+"px",(0===t||parseInt(i[t])>n)&&(n=parseInt(e.style.width)||e.offsetWidth,s=e)})),-1===i.indexOf("auto")&&s&&(s.style.width="auto",r.forEach((function(e,t){i[t]="auto"===e.style.width?"auto":e.offsetWidth.toString()+"px"}))),t.rendered.tbody.querySelectorAll("tr").forEach((e=>{e.querySelectorAll("td").forEach(((e,t)=>{e.style.width=i[t]}))})),a.style.display="block",a.scrollHeight>a.offsetHeight?a.classList.add("tbody_scrollable"):a.classList.remove("tbody_scrollable"),a.scrollTop=0}))}}class Qt{constructor(e){this.url=b.xw.zone+"/xlist/body",this.state={},this.ls={},this.me=e,this.state=JSON.parse(e.el.dataset.cache),this.ls=JSON.parse(localStorage.getItem(e.el.dataset.cacheId))}filter(e){let t={_dataset:this.me.dataset,_type:"filter"},s=this.me;this.cache(Object.assign(Object.assign({},t),e));let i=Object.keys(this.state).filter((function(e){return 0!==e.indexOf("_")}));a.C.json.load(this.url,this.state,(function(e){if(s.rendered.tbody.innerHTML=e.body,s.rendered.paginator.innerHTML=e.paginator,s.rendered.clearFiltersBtn&&s.rendered.clearFiltersBtn.classList.toggle("d-none",0===i.length),0!=e.total){if(s.rendered.paginator.style.display="",s.listeners.body(),s.listeners.footer(),Qi(),s.ajax.ls&&s.ajax.ls._activeRow){let e=s.rendered.tbody.querySelector(`tr[data-pk="${s.ajax.ls._activeRow}"]`);e&&e.classList.add("active")}s.listeners.sql_helper()}else s.rendered.paginator.style.display="none"}))}sort(e,t){let s={_dataset:this.me.dataset,_type:"sort",_orderBy:e,_orderDir:t},i=this.me;h.R.start(i.el),this.cache(s),a.C.json.load(this.url,this.state,(function(e){i.rendered.tbody.innerHTML=e.body,i.rendered.paginator.innerHTML=e.paginator,i.listeners.body(),i.listeners.footer(),h.R.stop(),Qi()}))}page(e){let t=this.me,s={_dataset:this.me.dataset,_type:"page",_page:e};this.cache(s),a.C.json.load(this.url,this.state,(function(s){t.current_page=e,t.rendered.tbody.innerHTML=s.body,t.rendered.paginator.innerHTML=s.paginator,t.listeners.body(),t.listeners.footer(),Qi()})),delete this.state._page}perpage(e){let t=this.me,s={_dataset:this.me.dataset,_type:"page",_perpage:e};this.cache(s),a.C.json.load(this.url,this.state,(function(e){t.rendered.tbody.innerHTML=e.body,t.rendered.paginator.innerHTML=e.paginator,t.listeners.body(),t.listeners.footer(),Qi()}))}cache(e){let t=Object.assign(Object.assign({},this.state),e);for(let e in t)null!==t[e]&&void 0!==t[e]&&""!==t[e]||delete t[e];this.state=t}cache_ls(e){let t=Object.assign(Object.assign({},this.ls),e);for(let e in t)null!==t[e]&&void 0!==t[e]&&""!==t[e]||delete t[e];this.ls=t;let s=Object.assign({},t);Object.keys(s).length>0?localStorage.setItem(this.me.cache_id,JSON.stringify(s)):localStorage.removeItem(this.me.cache_id)}clear_state(){this.state={},this.filter({})}}class es{constructor(e,t){if(null===e)return;if(this.container=e.querySelector("div.xtable-extra-filters-content"),null===this.container)return;this.form=this.container.parentElement,this.extra=t.el.querySelector("a.xtable-extra-collapse");let s=this;this.el=e,this.table=t,this.submitBtn=e.querySelector("button.xtable-extra-filters-filter-btn"),this.resetFiltersBtn=e.querySelector("button.xtable-extra-filters-clear-filters-btn"),this.submitBtn.addEventListener("click",(()=>{let e=this.serialize(this.form);this.table.ajax.filter(e),Object.keys(this.table.ajax.state).filter((e=>0===e.indexOf("extra"))).length})),this.resetFiltersBtn.addEventListener("click",(()=>{s.reset()}))}reset(){if(null===this.container)return;let e=this.container.querySelectorAll("input");for(let t=0,s=e.length;t<s;++t){let s=e[t];if("xselect"===s.dataset.type)s.value="",s.parentElement.querySelector(".xselect-display-text").textContent="";else{if("checkbox"===s.type){s.checked=!1;continue}if("hidden"===s.type)continue;s.value=""}}}serialize(e){let t={},s=e.querySelectorAll("input");for(let e=0;e<s.length;e++){let i=s[e];if(!i.name||i.disabled||"file"===i.type||"reset"===i.type||"submit"===i.type||"button"===i.type)continue;let a=i.closest("fieldset"),n="extra_"+i.name;if(!a||!a.disabled)if("select-multiple"===i.type)for(let e=0;e<i.options.length;e++)i.options[e].selected&&(t[n]=i.options[e].value);else"checkbox"!==i.type&&"radio"!==i.type?t[n]=i.value:"checkbox"===i.type&&(!0===i.checked?t[n]=i.value:t[n]=null)}return t}}class ts{constructor({table:e,parent:t}){console.dir("eeeeee"),this.scrollParent=document.querySelector(t||"#content-wrap"),this.onMousedown=this.onMousedown.bind(this),this.onHover=this.onHover.bind(this),this.onScroll=this.onScroll.bind(this),this.onMouseup=this.onMouseup.bind(this),this.deltaScroll=0,this.table=e,this.table.rendered.tbody.addEventListener("mousedown",this.onMousedown.bind(this));let s=document.createElement("tr");s.classList.add("xtable-placeholder"),s.innerHTML='<td colspan="8"></td>',this.placeholder=s,this.rows=[]}onMousedown(e){if(e.target.classList.contains("xgrid_row-sorticon")){const t=e.target.closest("tr"),s=t.querySelectorAll("td"),i=this.table.rendered.tbody.querySelectorAll("tr");document.body.classList.add("user-select-none-all"),this.placeholder.querySelector("td").setAttribute("colspan","99"),this.placeholder.style.height=t.getBoundingClientRect().height.toString()+"px";let a=document.createElement("div");a.classList.add("xtable-pseudo-row"),s.forEach((e=>{let t=document.createElement("div");["class","style"].forEach((s=>{e.getAttribute(s)&&t.setAttribute(s,e.getAttribute(s))})),t.style.width=e.offsetWidth.toString()+"px",t.innerHTML=e.innerHTML,a.innerHTML+=t.outerHTML})),this.table.el.querySelector("div.xtable-body").append(a),this.rows=[],i.forEach((e=>{this.rows.push({id:e.dataset.pk,el:e,bounds:{top:e.getBoundingClientRect().top,bottom:e.getBoundingClientRect().bottom}})})),document.addEventListener("mousemove",this.onHover.bind(this)),document.addEventListener("mouseup",this.onMouseup.bind(this)),this.scrollParent.addEventListener("scroll",this.onScroll.bind(this))}}onScroll(e){this.deltaScroll=e.currentTarget.scrollTop}onHover(e){const t=e.clientY,s=this.table.rendered.tbody.querySelector("tr.xtable-placeholder");s&&s.remove(),this.rows.forEach((e=>{const s=e.el,i=e.bounds.top-this.deltaScroll,a=e.bounds.bottom-this.deltaScroll;t<a&&t>=i&&s.parentNode.insertBefore(this.placeholder,s.nextElementSibling)}))}onMouseup(){document.body.classList.remove("user-select-none-all"),document.removeEventListener("mouseup",this.onMouseup.bind(this)),document.removeEventListener("mousemove",this.onHover.bind(this)),this.scrollParent.removeEventListener("scroll",this.onScroll.bind(this)),this.deltaScroll=0}}s(1458);class ss extends HTMLDivElement{constructor(){super(...arguments),this.rendered={brand:HTMLDivElement,list:HTMLDivElement,search:HTMLDivElement,settings:HTMLDivElement,toggle:HTMLAnchorElement,links:NodeList}}connectedCallback(){setTimeout((()=>this.render()),200)}render(){this.rendered={brand:this.querySelector("div.xnavigation-brand"),list:this.querySelector("div.xnavigation-list"),search:this.querySelector("div.xnavigation-search"),settings:this.querySelector("div.xnavigation-settings"),toggle:this.querySelector("a.xsidebar-toggle"),links:this.querySelectorAll("a.xnavigation-link, a.xnavigation-group-empty")},this.rendered.toggle.addEventListener("click",(()=>{let e=this.classList.contains("open"),t=this.classList.contains("mobile-closed");e?this.classList.remove("open"):this.classList.add("open"),window.matchMedia("(max-width:576px)").matches&&(this.classList.add("open"),t?this.classList.remove("mobile-closed"):this.classList.add("mobile-closed"))}));let e=Array.prototype.slice.call(this.rendered.list.querySelectorAll("div.xnavigation-group > a"));this.groups=e,e.forEach((e=>{"javascript:;"==e.href&&e.addEventListener("click",(()=>{e.classList.toggle("active")}))})),this.dataset.pageReload||this.rendered.list.addEventListener("click",this.toggleActiveModules.bind(this));let t=this.rendered.search.querySelector("input"),s=t.previousElementSibling;t.addEventListener("keyup",(e=>{let s=t.value;if(t.previousElementSibling.classList.toggle("d-none",0==s.length),this.filter(s),13===e.which){let e=new Event("click"),t=this.rendered.list.querySelector("a.xnavigation-group-link:not(.d-none)"),s=t.nextElementSibling;if(null===s)return void t.dispatchEvent(e);s.querySelector("a:not(.d-none)").dispatchEvent(e)}else 27===e.which&&(t.value="",this.filter(""))})),s&&s.addEventListener("click",(()=>{t.value="",this.filter(""),t.focus()}))}toggleActiveModules(e){let t=e.target.closest("a")||e.target,s=t.classList;("A"==t.tagName&&s.contains("xnavigation-link")||s.contains("xnavigation-group-empty"))&&(this.rendered.links.forEach((e=>{e.classList.remove("active")})),t.classList.add("active"))}filter(e){let t=this.groups;e=e.toLowerCase();for(let s=0;s<t.length;s++){let i=t[s],a=i.textContent.trim().toLowerCase(),n=i.nextElementSibling;if(null===n){-1!==i.textContent.toLowerCase().indexOf(e)?i.classList.remove("d-none"):i.classList.add("d-none");continue}let r=n.querySelectorAll("li > a"),l=0,o=!1;-1!==a.indexOf(e)&&(o=!0);for(let t=0;t<r.length;t++){let s=r[t],i=s.textContent.trim().toLowerCase();-1!==i.indexOf(e)||""==i||o?(l--,s.classList.remove("d-none")):(l++,s.classList.add("d-none"))}l==r.length?i.classList.add("d-none"):i.classList.remove("d-none"),e.length>1?i.classList.add("active"):i.classList.remove("active")}}toggle(e){this.el.classList.contains("open")!==e&&this.rendered.toggle.dispatchEvent(new Event("click"))}}customElements.define("element-nav-sidebar",ss,{extends:"div"});class is extends HTMLAnchorElement{connectedCallback(){setTimeout((()=>this.render()),100)}render(){this.wrap=this.closest(".xmega-link-wrap"),this.post=this.dataset.param,this.openDetails=this.openDetails.bind(this),this.mouseover=this.mouseover.bind(this),this.listener=this.listener.bind(this),this.close=this.close.bind(this),this.dataset.onhover?this.addEventListener("mouseover",this.mouseover.bind(this)):this.addEventListener("mousedown",this.openDetails.bind(this))}openDetails(){if(this.classList.contains("open"))return;this.classList.contains("loaded")&&(this.classList.add("open"),document.addEventListener("mousedown",this.listener.bind(this),!1));let e=this.dataset.url,t=void 0!==this.wrap.dataset.param?{_param:this.wrap.dataset.param}:{};new a.C.post(e,t,{json:!1},(e=>{let t=document.createElement("div");t.classList.add("xmega-link-details"),this.detailsBox=t,this.detailsBox.innerHTML=e,document.body.appendChild(this.detailsBox),"true"==this.dataset.mouseleave&&this.detailsBox.addEventListener("mouseleave",this.close.bind(this)),this.classList.add("open","loaded"),this.popper=(0,A.fi)(this,this.detailsBox,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,8]}}]}),document.addEventListener("mousedown",this.listener.bind(this),!1),Qi()}))}mouseover(){let e;this.addEventListener("mouseleave",(()=>{this.classList.remove("open")})),e=setTimeout((()=>{this.openDetails()}),500),this.addEventListener("mouseleave",(()=>clearTimeout(e)))}listener(e){let t=e.target,s=t.closest(".xmega-link-details")||t;this.wrap.contains(t)||this.detailsBox&&this.detailsBox.isEqualNode(s)||this.close()}close(){this.classList.remove("open"),this.popper&&(this.popper.destroy(),this.popper=null),this.detailsBox&&(document.body.removeChild(this.detailsBox),this.detailsBox=null),document.removeEventListener("mousedown",this.listener.bind(this))}}customElements.define("element-link-mega",is,{extends:"a"});class as extends HTMLAnchorElement{constructor(){super(),this._placement="bottom-start",this._loaded=!1,this._foutsideClick=this._outsideClick.bind(this)}connectedCallback(){setTimeout((()=>{this._init()}))}_init(){this._box=this.parentElement.querySelector("div.box"),this.addEventListener("click",(()=>{!0!==this._loaded?(this._loaded=!0,new a.C.post(this.dataset.url,{},{json:!1},(e=>{let t=document.createRange().createContextualFragment(e);this._box.append(t),this._show()}))):this._show()}))}_show(){this._box.classList.remove("d-none"),this._popper=(0,A.fi)(this,this._box,{placement:this._placement}),setTimeout((()=>{document.addEventListener("click",this._foutsideClick)}),100)}_close(){this._box.classList.add("d-none"),this._popper&&this._popper.destroy(),document.removeEventListener("click",this._foutsideClick)}_outsideClick(e){let t=e.target;this._box.contains(t)||this._close()}}customElements.define("dropdown-remote",as,{extends:"a"});class ns extends HTMLDivElement{connectedCallback(){setTimeout((()=>this._init()))}_init(){this.urlHelper=new F.q,this.items=this.querySelectorAll(".dropdown-item"),this._listeners()}_listeners(){this.items.forEach((e=>{e.dataset.get&&e.addEventListener("click",(()=>{let t=JSON.parse(e.dataset.get),s=Object.keys(t);this.urlHelper.update(s[0],t[`${s[0]}`],!0)}))}))}}customElements.define("element-web-dropdown-simple",ns,{extends:"div"});var rs=s(1689);class ls extends HTMLDivElement{constructor(){super(...arguments),this.onLinkClick=e=>{let t=e.currentTarget,s=parseInt(t.dataset.slideTo);this.setActiveLink(),this.goToSlide(s)},this.setActiveLink=()=>{this.slideLinks.map((e=>e.classList.remove("active"))),this.slideLinks[this.carousel.selectedScrollSnap()].classList.add("active")}}connectedCallback(){setTimeout((()=>this._init()))}_init(){this.carouselWrap=document.querySelector(".embla"),this.carouselViewport=this.carouselWrap.querySelector(".embla__viewport"),this.carousel=(0,rs.Z)(this.carouselViewport,{loop:!0}),this.slideLinks=[].slice.call(this.querySelectorAll("[data-slide-to]")),this.slideLinks.map((e=>e.addEventListener("click",this.onLinkClick))),this.carousel.on("select",this.setActiveLink)}goToSlide(e){this.carousel.scrollTo(e)}}customElements.define("news-dashboard",ls,{extends:"div"});class os{constructor(e,t){this.classes={activeFolder:"xsort-drag-active-folder",dragItem:"xsort-drag-item",hidden:"d-none",sort:{before:"xsort-drag-before",after:"xsort-drag-after",inside:"xsort-drag-inside"},icons:{openFolder:["fas","fa-folder-open"],closedFolder:["fas","fa-folder"],item:["far","fa-file"]}},this.el=e,this.parent=t.parent,this.item=t.item,this.static=t.static,this.maxDepth=t.maxDepth,this.onChangeCallback=t.onChange,this.beforeChange=t.beforeChange,this.bindMethods(),this.initFolding(),e.addEventListener("mousedown",(t=>{const s=t.target;if(!s.closest(this.item)||s.closest("button"))return;t.preventDefault();let i=setTimeout((()=>{this._initDrag(t)}),150);e.addEventListener("mouseup",(()=>{clearTimeout(i)}))})),e.addEventListener("contextmenu",(e=>{this.dragItem&&e.preventDefault()}))}bindMethods(){this.onDrag=this._onDrag.bind(this),this.stopDrag=this._stopDrag.bind(this)}_initDrag(e){if(0!==e.button)return;let t=e.target,s=t.closest(this.item);if(!t.matches("i.fold")&&(document.body.classList.add("user-select-none-all"),s)){this.dragTarget=s;let t=s.querySelector(".xtree-node-title").textContent,i=document.createElement("div");i.classList.add(this.classes.dragItem),i.textContent=t,this.el.appendChild(i),this.dragItem=i;let a=s.getBoundingClientRect();this.dragItem.classList.add("xsort--drag"),this.dragItem.style.width=`${a.width}px`;const{clientX:n,clientY:r}=e,{top:l,left:o}=a,d=r-l,c=n-o;this.deltaClickOffset={top:d,left:c},this._setDragItemPos({top:r,left:n}),setTimeout((()=>{this.generateHitAreas(),document.addEventListener("mousemove",this.onDrag),document.addEventListener("mouseup",this.stopDrag),document.addEventListener("scroll",(0,f.Z)(this.generateHitAreas.bind(this),100))}))}}_onDrag(e){let{clientX:t,clientY:s,offsetX:i,offsetY:a,pageX:n,pageY:r,screenX:l,screenY:o}=e;const d=this.findHoveredArea(t,s);if(this.removeDropHint(),this._setDragItemPos({top:s,left:t}),!d||this.dragTarget.contains(d.node))return void(this.hoveredArea=null);if(d.node.dataset.folder&&!d.node.dataset.item){let e=d.node.querySelector(this.parent);e&&setTimeout((()=>{e.classList.contains(this.classes.hidden)&&(e.classList.remove(this.classes.hidden),this.generateHitAreas())}),100)}else if(this.static&&"inside"===d.position)return void(this.hoveredArea=d);if(this.maxDepth){let e=this.getDepth(this.dragTarget)+this.getParentDepth(d.node);if(d.node.dataset.item&&"inside"==d.position&&e++,e>this.maxDepth&&"before"!=d.position)return void(this.hoveredArea=null)}d.node.classList.add(this.classes.sort[d.position]);let c=d.node.parentElement.closest("li");c&&c.classList.add(this.classes.activeFolder),this.hoveredArea=d}getDepth(e){if(!e.dataset.folder)return 0;let t=[];return Array.from(e.children).map((e=>{"UL"==e.nodeName&&Array.from(e.children).map((e=>{let s=1;e.dataset.folder&&(s+=this.getDepth(e)),t.push(s)}))})),Math.max(...t,0)}getParentDepth(e){let t=0,s=e.closest("li[data-folder]");for(;s;)t++,s=s.parentElement.closest("li[data-folder]");return t}_setDragItemPos({top:e,left:t}){let s=e-this.deltaClickOffset.top,i=t-this.deltaClickOffset.left;this.dragItem.style.top=`${s}px`,this.dragItem.style.left=`${i}px`}_stopDrag(e){if(0===e.button&&(document.removeEventListener("mousemove",this.onDrag),document.removeEventListener("mouseup",this.stopDrag),document.body.classList.remove("user-select-none-all"),this.dragItem.remove(),this.hoveredArea)){if(this.beforeChange&&"function"==typeof this.beforeChange){let e=this.dragTarget.dataset.xsortId,t=this.dragTarget.parentElement.closest("li"),s=this.dragTarget.nextElementSibling,i={id:e,el:this.dragTarget};s&&(i.nextId=s.dataset.xsortId),t&&(i.parentId=t.dataset.xsortId),this.beforeChange(i).then((e=>{e&&this.onConfirm()}))}else this.onConfirm();this.removeDropHint()}}onConfirm(){let e=this.hoveredArea.node,t=this.dragTarget.parentElement;if("after"===this.hoveredArea.position){let t=e.parentElement,s=e.nextElementSibling;s?t.insertBefore(this.dragTarget,s):t.appendChild(this.dragTarget)}else if("inside"===this.hoveredArea.position){let t=!!e.dataset.folder,s=!!e.dataset.item;if(t){let t=e.querySelector("ul.xsortable");if(t.prepend(this.dragTarget),s){t.classList.remove("d-none");let s=e.querySelector("i.fold");this.setIcon("openFolder",s)}}else{if(this.static)return;let t=document.createElement("ul");t.classList.add("xsortable","ml-20"),e.appendChild(t),e.dataset.folder="true",t.appendChild(this.dragTarget);let s=e.querySelector("i.fold");this.setIcon("openFolder",s)}}else if("before"===this.hoveredArea.position){e.parentElement.insertBefore(this.dragTarget,e)}if(0!==t.childElementCount||this.static){if(0===t.childElementCount&&this.static){let e=t.parentElement;e.dataset.item="true",e.querySelector("ul").classList.add(this.classes.hidden);let s=e.querySelector("i.fold");this.setIcon("closedFolder",s)}}else{let e=t.parentElement;delete e.dataset.folder,t.remove();let s=e.querySelector("i.fold");this.setIcon("item",s)}this.initFolding(),this.handleChangeCallback(),this.dragItem=null,this.dragTarget=null}generateHitAreas(){let e=[];const t=this.el.querySelectorAll("li[data-top]"),s=t=>{let i=-1;return t.forEach((t=>{const a=t.querySelector(".xtree-node-title").textContent,n=t.getBoundingClientRect(),r=Math.round(n.top);0===e.length&&e.push({top:r,bottom:0,node:t,position:"before",name:a}),e.push({top:r,bottom:0,node:t,position:"inside",name:a}),i=r;let l=null,o=this.getDirectDescendant(t,`ul:not(.${this.classes.hidden})`);o&&(l=Array.prototype.slice.call(o.children),l&&(i=s(l))),e.push({top:i,bottom:0,node:t,position:"after",name:a})})),i};s(t),this.hitAreas=this.calculatePositions(e)}calculatePositions(e){let t=-1,s=[],i=[];e.forEach((e=>{e.top!==t&&s.length&&(s.length&&this.generateHitAreasForGroup(i,s,t,e.top),t=e.top,s=[]),s.push(e)}));const a=this.getTreeDimensions();return this.generateHitAreasForGroup(i,s,t,a.bottom),i}generateHitAreasForGroup(e,t,s,i){let a=t.length,n=Math.round((i-s)/a),r=s,l=0;for(;l<a;){let s=t[l];e.push({top:r,bottom:r+n,node:s.node,position:s.position,name:s.name}),r+=n,l+=1}}findHoveredArea(e,t){let s=this.getTreeDimensions();if(e<s.left||t<s.top||e>s.right||t>s.bottom)return null;let i=0,a=this.hitAreas.length;for(;i<a;){let e=i+a>>1,s=this.hitAreas[e];if(t<s.top)a=e;else{if(!(t>s.bottom))return s;i=e+1}}return null}removeDropHint(){this.hitAreas.forEach((e=>{Object.values(this.classes.sort).forEach((t=>{e.node.classList.remove(t)})),e.node.classList.remove(this.classes.activeFolder)}))}initFolding(){let e=this.el.querySelectorAll("li[data-fold]");0==e.length&&(e=this.el.querySelectorAll("li[data-folder]:not(.xlistener)")),e.forEach((e=>{const t=e.querySelector("i.fold"),s=e.querySelector("ul.xsortable");t.classList.add("xlistener"),t.addEventListener("click",(e=>{e.stopImmediatePropagation(),s.classList.toggle(this.classes.hidden);const i=s.classList.contains(this.classes.hidden)?"closedFolder":"openFolder";this.setIcon(i,t)}))}))}getTreeDimensions(){const e=this.el.getBoundingClientRect();return{top:Math.round(e.top),left:Math.round(e.left),right:Math.round(e.left)+Math.round(e.width),bottom:Math.round(e.top)+Math.round(e.height)}}getDirectDescendant(e,t){return Array.prototype.slice.call(e.children).find((e=>e.matches(t)))}setIcon(e,t){Object.keys(this.classes.icons).filter((t=>t!==e)).forEach((e=>{this.classes.icons[e].forEach((e=>t.classList.remove(e)))})),this.classes.icons[e].forEach((e=>t.classList.add(e)))}handleChangeCallback(){if(!this.onChangeCallback)return;let e=this.dragTarget.dataset.xsortId,t=this.dragTarget.parentElement.closest("li"),s=this.dragTarget.nextElementSibling,i={id:e,el:this.dragTarget};s&&(i.nextId=s.dataset.xsortId),t&&(i.parentId=t.dataset.xsortId),this.onChangeCallback(i)}}var ds=s(821);class cs extends HTMLDivElement{connectedCallback(){setTimeout((()=>{this.initItems(),this.initSearch(),this._init()}),150)}initItems(){const e=Array.from(this.querySelectorAll("div.xtree-content > ul > div > li"));this.items=e.map((e=>this._collect(e)))}_collect(e){const t=e.children[0],s=e.children[1],i={id:Number(e.dataset.id),parent:Number(e.dataset.parent||0),text:t.textContent.toLocaleLowerCase(),real:t.textContent,childrens:[],li:e,div:t,i:t.querySelector("i.fold")};let a=Array.from(s?s.querySelectorAll(":scope > li"):[]);return i.childrens=a.map((e=>this._collect(e))),i}initSearch(){const e=this.querySelector("input.search-control");e&&e.addEventListener("search-changed",(()=>{this.items.forEach((t=>{!e.value&&t.i.classList.contains("fa-folder-open")&&t.i.dispatchEvent(new Event("click")),this._search(t,e.value)}))}))}_search(e,t,s=!1){let i=s||-1!==W(e.text,t),a=!1;e.childrens.forEach((e=>{!0===this._search(e,t,i)&&(a=!0)})),!0===a&&(i=!0);const n=e.li,r=e.div.querySelector(":scope > div > a > span.xtree-node-title");return!1===i?(n.style.display="none",r.innerHTML=e.real):(t&&e.i.classList.contains("fa-folder")&&e.i.dispatchEvent(new Event("click")),r.innerHTML=V(e.real,t),n.style.display=""),i}}class hs extends cs{constructor(){super(...arguments),this.classes={active:"active"}}_init(){this.static="true"===this.dataset.static,this.clickableFolders="true"===this.dataset.clickableFolders,this.url=this.dataset.url,this._listeners(),this.dataset.edit&&new os(this,{parent:"ul.xsortable",item:"li[data-xsort-id]",static:this.static,maxDepth:this.dataset.maxDepth?+this.dataset.maxDepth:null,onChange:this.changeHandler.bind(this)})}_listeners(){this._clickListener()}_clickListener(){const e=this.clickableFolders?"li[data-xsort-id]:not(.xlistener)":"li[data-xsort-id][data-item]:not(.xlistener)",t=this.querySelectorAll(e);t.forEach((e=>{e.querySelector("div.xtree-type-model").classList.add("xlistener"),e.querySelector("div.xtree-type-model").addEventListener("click",(s=>{if(!s.target.closest("button")&&(this.clickableFolders||!e.dataset.folder))if(t.forEach((e=>e.querySelector("div.xtree-type-model").classList.remove(this.classes.active))),e.querySelector("div.xtree-type-model").classList.add(this.classes.active),this.url){let t=this.url.replace("@pk",e.dataset.xsortId);d.X.content.load(t)}else this._onClick&&this._onClick(e.dataset.xsortId)}))}))}changeHandler({id:e,nextId:t,parentId:s}){this._clickListener(),new O._(b.xw.zone+"/router/element_tree_model/sort",{id:e,nextId:t,parentId:s,_param:this.dataset.param},{json:!0},(e=>{if(!e.success)return;(new ds.X).show({message:"Sėkmingai išsaugota",position:"top-right",type:"success"})}))}}customElements.define("element-tree-model",hs,{extends:"div"});class us extends HTMLDivElement{connectedCallback(){setTimeout((()=>this._init()))}_init(){this._search(),new os(this,{parent:"ul.xsortable",item:"li[data-xsort-id]",onChange:this.changeHandler.bind(this)})}changeHandler({id:e,nextId:t,parentId:s}){new O._(b.xw.zone+"/router/element_tree_menu/sort",{id:e,nextId:t,parentId:s,_param:this.dataset.param},{json:!0},(e=>{if(!e.success)return;(new ds.X).show({message:"Sėkmingai išsaugota",position:"top-right",type:"success"})}))}_search(){const e=this.querySelector("input.search-control"),t=this.querySelectorAll("span.xtree-node-title");e.addEventListener("search-changed",(()=>{const s=e.value.toLowerCase();t.forEach((e=>{let t=e.dataset.name,i=t.toLowerCase().indexOf(s);if(s&&i>=0){let a=t.substring(0,i),n=t.substring(i,i+s.length),r=t.substring(i+s.length);t=`${a}<span class='highlight'>${n}</span>${r}`,e.innerHTML=t}else e.innerHTML!==t&&(e.innerHTML=t)}))}))}}customElements.define("element-tree-menu",us,{extends:"div"});var ms=s(6455),ps=s.n(ms);class vs extends cs{_init(){new os(this,{parent:"ul.xsortable",item:"li[data-xsort-id]",static:Boolean(this.dataset.static),maxDepth:this.dataset.maxDeep?Number(this.dataset.maxDeep):null,beforeChange:this.beforeChange.bind(this),onChange:this.onChange.bind(this)})}beforeChange({el:e}){if("true"===this.dataset.canDrag){const t=new S.A;return new Promise((s=>{t.show({title:"Ar tikrai norite keisti?",text:e.textContent.trim()},(e=>{s(e)}))}))}return ps().fire({icon:"error",title:"Veiksmas atšauktas",text:"Jums nesuteikta teisė modifikuoti meniu struktūrą"}),new Promise((e=>{e(!1)}))}onChange({id:e,nextId:t,parentId:s}){new O._(`/${b.xw.lang}${b.xw.zone}${this.dataset.urlSort}`,{id:e,nextId:t,parentId:s,_param:this.dataset.param},{json:!0},(e=>{if(!e.success)return;(new ds.X).show({message:"Sėkmingai išsaugota",position:"top-right",type:"success"})}))}}customElements.define("element-tree-tvs",vs,{extends:"div"});class gs extends cs{_init(){new os(this,{parent:"ul.xsortable",item:"li[data-xsort-id]",static:Boolean(this.dataset.static),maxDepth:this.dataset.maxDeep?Number(this.dataset.maxDeep):null,beforeChange:this.beforeChange.bind(this),onChange:this.onChange.bind(this)})}beforeChange({el:e}){if("true"===this.dataset.canDrag){const t=new S.A;return new Promise((s=>{t.show({title:"Ar tikrai norite keisti?",text:e.textContent.trim()},(e=>{s(e)}))}))}return ps().fire({icon:"error",title:"Veiksmas atšauktas",text:"Jums nesuteikta teisė modifikuoti meniu struktūrą"}),new Promise((e=>{e(!1)}))}onChange({id:e,nextId:t,parentId:s}){new O._(`/${b.xw.lang}${b.xw.zone}${this.dataset.urlSort}`,{id:e,nextId:t,parentId:s,_param:this.dataset.param},{json:!0},(e=>{if(!e.success)return;(new ds.X).show({message:"Sėkmingai išsaugota",position:"top-right",type:"success"})}))}}customElements.define("element-tree-subpage",gs,{extends:"div"});class fs extends cs{constructor(){super(...arguments),this.classes={active:"active"}}_init(){this.static="true"===this.dataset.static,this.clickableFolders="true"===this.dataset.clickableFolders,this.url=this.dataset.url,this.current=this.querySelector("div.xtree-trail-wrap a.xtree-trail-item"),this.current&&this.current.addEventListener("click",(()=>{this.updateContent(this.current.getAttribute("href"))})),this._listeners(),this.dataset.edit&&new os(this,{parent:"ul.xsortable",item:"li[data-xsort-id]",static:this.static,maxDepth:this.dataset.maxDepth?+this.dataset.maxDepth:null,onChange:this.changeHandler.bind(this)})}_listeners(){this._clickListener()}_clickListener(){const e=this.clickableFolders?"li[data-xsort-id]:not(.xlistener)":"li[data-xsort-id][data-item]:not(.xlistener)",t=this.querySelectorAll(e);t.forEach((e=>{e.querySelector("div.xtree-type-model").classList.add("xlistener"),e.querySelector("div.xtree-type-model").addEventListener("click",(s=>{if(!s.target.closest("button")&&(this.clickableFolders||!e.dataset.folder))if(t.forEach((e=>e.querySelector("div.xtree-type-model").classList.remove(this.classes.active))),e.querySelector("div.xtree-type-model").classList.add(this.classes.active),this.url){let t=this.url.replace("@pk",e.dataset.xsortId);this.updateContent(t)}else this._onClick&&this._onClick(e.dataset.xsortId)}))}))}updateContent(e){d.X.content.update(e,{targetId:["permisions","data","tree"],collapseOnUpdate:!0,updateurl:!0})}changeHandler({id:e,nextId:t,parentId:s}){this._clickListener(),new O._(b.xw.zone+"/router/element_tree_registry/sort",{id:e,nextId:t,parentId:s,_param:this.dataset.param},{json:!0},(e=>{if(0==e.success)return console.log(e),void i.q.notify.json(e);(new ds.X).show({message:"Sėkmingai išsaugota",position:"top-right",type:"success"})}))}}customElements.define("element-tree-registry",fs,{extends:"div"});class ys extends HTMLDivElement{connectedCallback(){setTimeout((()=>this._init()))}_init(){new os(this,{parent:"ul.xsortable",item:"li[data-xsort-id]",onChange:this.changeHandler.bind(this)}),this.contentHelper=new w.t}changeHandler({id:e,nextId:t,parentId:s}){new O._(b.xw.zone+"/router/element_tree_internal/sort",{id:e,nextId:t,parentId:s,_param:this.dataset.param},{json:!0},(e=>{if(!e.success)return;(new ds.X).show({message:"Sėkmingai išsaugota",position:"top-right",type:"success"})}))}_listener(){this.select=document.querySelector("input.element-tree-internal-select"),this.select.addEventListener("change",(()=>{let e=`${b.xw.zone}/router/element_tree_internal/load?TreeId=`;this.contentHelper.update(e+this.select.value,{targetId:"element-tree-internal",updateurl:!1})}))}}customElements.define("element-tree-internal",ys,{extends:"div"});class bs{constructor(){return this.renderEvents=e=>{const t=e;this.clearEventRows(),t&&Object.keys(t).forEach((e=>{const s=e,i=t[e],a=this.eventsSlots[s];let n="day"===this.calendar.view?this.calendar.date.value:s,r=new Date(n+" "+this.timeData.timeFrom),l=new Date(n+" "+this.timeData.timeTo),o="",d="",c="";const h=i.reduce(((t,s)=>{let i=new Date(s.dateFrom+" "+s.timeFrom),a=new Date(s.dateTo+" "+s.timeTo);if(a.toISOString()==r.toISOString())return t;const n=i>l&&a>l;if(i<r&&a<=r)o+=this.eventCard(s);else if(n)d+=this.eventCard(s);else{let t=this.calcCardOffsets(s,e);c=this.eventCard(s,t)}return t+=c}),"");try{a.innerHTML=h,o&&this.renderExtra("early",o,a),d&&this.renderExtra("late",d,a)}catch(e){console.warn({rowId:s,eventArr:i,eventRow:a,eventsRows:this.eventsSlots}),console.warn(e)}}))},this.onClickEvents=e=>{let t=e.target.closest(".table-resource-event");if(!t)return;const{eventId:s}=t.dataset;new a.C.post(`${this.calendar.dataset.controllerUrl}/edit/${s}?dataset=${this.calendar.data}`)},this.eventCard=({eventId:e,fullname:t,timeFrom:s,timeTo:i,dateFrom:a,dateTo:n,inputUserFullname:r,showInputUserName:l,color:o},d)=>`\n        <div\n            class="table-resource-event"\n            data-event-id="${e}"\n            style="${d?Object.keys(d).reduce(((e,t)=>`${t}:${d[t]<0?0:d[t]}px;${e}`),""):""}"\n        >\n\t\t\t<div class="table-resource-event-content" \n\t\t\tstyle="background-color:${o};">\n\t\t\t\t<div class="table-resource-event-title">${t},\n\t\t\t\t${l?`<span class="table-resource-event-title">Rezervavo ${r}</span>`:""}</div>\n\t\t\t\t<div class="table-resource-event-date">${a} ${s} - ${n} ${i}</div>\n\t\t\t</div>\n        </div>\n    `,this}init(e){if(null==e.date)return;this.calendar=e,this.calendarWrap=e.querySelector("div.table-resource-content"),this.eventsUrl=`${e.controllerUrl}/events_${this.calendar.view}?dataset=${this.calendar.data}`,this.resourceSelect=this.calendar.querySelector('.xselect[is="select-simple"]'),this.eventsWrap=this.calendar.querySelector(".table-resource-event-wrap"),this.updateLayout(),window.addEventListener("resize",this.updateLayout.bind(this)),window.addEventListener("resize",this.recalcCardOffsets.bind(this)),this.getTimes(),this.initEvents();const t=({target:e})=>{let t=e.closest("div.table-resource-event");if(!t)return;let s=t.dataset.eventId,i=this.calendar.querySelectorAll(`div.table-resource-event[data-event-id="${s}"]`);if(i.length<2)return;let a=()=>{i.forEach((e=>{e.classList.remove("table-resource-event--hovered"),e.removeEventListener("mouseleave",a)}))};i.forEach((e=>{e.classList.add("table-resource-event--hovered"),e.addEventListener("mouseleave",a)}))};["week","month"].includes(this.calendar.view)?this.calendar.addEventListener("mousemove",t):this.calendar.removeEventListener("mousemove",t);let s=new xs;const i=({target:e})=>{let t=e.closest("div.table-resource-event"),i="month"!==this.calendar.view;t&&!i?t.closest(".table-resource-extra-wrap")?s.content="":s.content=t.innerHTML:s.content=""};return"month"==this.calendar.view?document.addEventListener("mousemove",i):document.removeEventListener("mousemove",i),document.addEventListener("mousemove",(({target:e})=>{const t=e.closest(".table-resource-extra"),s=e.closest(".table-resource-event");if(t){ks(t.querySelector(".table-resource-extra-list"),this.calendar)}else{if(!s)return;ks(s.querySelector(".table-resource-event-content"),this.eventsWrap)}})),this}timeToMinutes(e){let t=e.split(":");return 60*+t[0]+ +t[1]}minutesToTime(e){let t=Math.floor(e/60),s=(e-60*t).toString().padStart(2,"0");return`${t.toString().padStart(2,"0")}:${s}`}initEvents(){this.fetchEvents().then((e=>{this.getEventsSlots(),this.updateLayout(),this.renderEvents(e),this.eventsWrap.addEventListener("click",this.onClickEvents)})).catch((e=>console.error(e)))}getEventsSlots(){const e=this.calendar.querySelector(".table-resource-event-wrap");this.eventsWrap=e,this.eventsEarlyCol=this.calendar.querySelector(".table-extra-early"),this.eventsLateCol=this.calendar.querySelector(".table-extra-late");const t=[].slice.call(this.eventsWrap.children);this.eventsSlots=t.reduce(((e,t)=>{let s={};return s[t.dataset.resourceId]=t,Object.assign(Object.assign({},e),s)}),{})}renderExtra(e,t,s){let i=document.createElement("div");const{resourceId:a}=s.dataset;i.classList.add("table-resource-extra-wrap","table-resource-"+e),i.innerHTML=t,i.innerHTML=`\n\t\t\t\t\t<div class="table-resource-extra">\n\t\t\t\t\t\t<a class="table-resource-extra-btn">\n\t\t\t\t\t\t\t+${i.childElementCount}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<div class="table-resource-extra-list">\n\t\t\t\t\t\t\t<h5 class="mx-2">\n\t\t\t\t\t\t\t\tNematomos rezervacijos:\n\t\t\t\t\t\t\t</h5>\n\t\t\t\t\t\t\t${i.innerHTML}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`,("late"==e?this.eventsLateCol:this.eventsEarlyCol).querySelector(`[data-resource-id="${a}"]`).appendChild(i)}recalcCardOffsets(){let e=[].slice.call(this.eventsWrap.children),t=new RegExp(/\d{4}-\d{2}-\d{2}/),s=new RegExp(/\d{2}:\d{2}/);this.getTimes(),e.map((e=>{if(!e.children)return;[].slice.call(e.children).map((i=>{if(i.classList.contains("table-resource-extra-wrap"))return;let a=i.querySelector(".table-resource-event-date").innerText.split(" - "),n=a[0].match(s)[0],r=a[0].match(t)[0],l=a[1].match(t)[0],o=a[1].match(s)[0],d=this.calcCardOffsets({timeFrom:n,timeTo:o,dateFrom:r,dateTo:l},e.dataset.resourceId),c=Object.keys(d).reduce(((e,t)=>`${t}:${d[t]<0?0:d[t]}px;${e}`),"");i.setAttribute("style",c)}))}))}calcCardOffsets(e,t){const{timeFrom:s,timeTo:i,interval:a,minuteInPx:n}=this.timeData;let r={top:0,right:0,bottom:0,left:0};if("day"==this.calendar.view){let t=new Date(this.calendar.date.value),l=new Date(e.dateFrom),o=new Date(e.dateTo);l>=t&&(r.left=(this.timeToMinutes(e.timeFrom)-this.timeToMinutes(s))*n),o<=t&&(r.right=(this.timeToMinutes(i)-this.timeToMinutes(e.timeTo)+a)*n)}else if(["week","month"].includes(this.calendar.view)){let l=new Date(t),o=new Date(e.dateFrom),d=new Date(e.dateTo);o>=l&&(r.top=(this.timeToMinutes(e.timeFrom)-this.timeToMinutes(s))*n),d<=l&&(r.bottom=(this.timeToMinutes(i)-this.timeToMinutes(e.timeTo)+a)*n)}return r}clearEventRows(){[].slice.call(this.eventsWrap.children).forEach((e=>e.innerHTML="")),(this.eventsEarlyCol||this.eventsLateCol)&&([].slice.call(this.eventsLateCol.querySelectorAll("[data-resource-id]")).forEach((e=>e.innerHTML="")),[].slice.call(this.eventsEarlyCol.querySelectorAll("[data-resource-id]")).forEach((e=>e.innerHTML="")))}fetchEvents(){return new Promise((e=>{let t=this.calendar.date.value;if("month"==this.calendar.view){const e=parseInt(t.toString().substr(5,2)),s=parseInt(t.toString().substr(0,4)),i=new Date(s,e,0).getDate(),a=`${t.toString().substr(0,7)}-01`,n=`${t.toString().substr(0,7)}-${i}`;t=`${a} - ${n}`}const s=window.location.search,i=new URLSearchParams(s);let n=`${this.eventsUrl}&date=${t}&search=${this.search}&page=${i.get("page")}&perpage=${i.get("perpage")}`;if(this.resourceSelect){n+=`&resourceId=${this.resourceSelect.querySelector('input[data-type="xselect"]').value}`}new a.C.get(n,{},{json:!0},(t=>{if(!t.success)throw new Error("Blogas eventu response");e(t.date)}))}))}updateLayout(){const e=this.calendar.querySelector(".table-timeslot"),t=e.querySelector("thead").offsetHeight;return this.eventsWrap.style.marginTop=`${t}px`,this.eventsWrap.style.height=`calc(100% - ${t}px)`,this.eventsWrap.offsetWidth!=e.scrollWidth&&"day"==this.calendar.view&&(this.eventsWrap.style.width=`${e.scrollWidth}px`),this}getTimes(){this.eventsWrap=this.calendar.querySelector("div.table-resource-event-wrap");const{startTime:e,endTime:t,interval:s}=this.calendar.dataset;let i=parseInt(s)/60,a=this.timeToMinutes(t)-i,n=this.minutesToTime(a);if("day"==this.calendar.view){let t=this.calendar.querySelector(".table-timeslot thead tr");if(t){const s=this.eventsWrap.children[0].offsetWidth,a=t.childElementCount||1;this.cellDimention=s/a;let r=this.cellDimention/i;this.timeData={timeFrom:e,timeTo:n,interval:i,minuteInPx:r}}}else{let t=this.calendar.querySelector(".table-timeslot tbody");if(!t)return;const s=this.eventsWrap.children[0].offsetHeight,a=t.childElementCount||1;this.cellDimention=s/a;let r=this.cellDimention/i;this.timeData={timeFrom:e,timeTo:n,interval:i,minuteInPx:r}}}get date(){return this.calendar.date.value}get search(){return this.calendar.search?this.calendar.search.input.value:""}}class xs{constructor(){if(this.onMouseMove=({clientX:e,clientY:t})=>{this.mouse={pageX:e,pageY:+t+20},this.show&&this.instance.scheduleUpdate()},this.mouse={pageX:0,pageY:0},this.cardWrap=document.querySelector("div.table-resource-event-hover"),!this.cardWrap){let e=document.createElement("div");e.classList.add("table-resource-event-hover"),document.body.appendChild(e),this.cardWrap=e}const e={getBoundingClientRect:()=>({top:this.mouse.pageY,right:this.mouse.pageX,bottom:this.mouse.pageY,left:this.mouse.pageX,width:0,height:0}),clientWidth:0,clientHeight:0};new $t.default(e,this.cardWrap,{onCreate:({instance:e})=>{this.instance=e,document.addEventListener("mousemove",this.onMouseMove)},positionFixed:!0})}set content(e){this.show=!!e,this.cardWrap.classList.toggle("d-none",!this.show),this.cardWrap.innerHTML=e}}function ks(e,t){const{left:s,width:i,bottom:a}=t.getBoundingClientRect(),{left:n,width:r,bottom:l}=e.getBoundingClientRect();n+r>s+i&&(e.style.left="auto",e.style.right="0"),l>a&&(e.classList.contains("table-resource-event-content")?(e.style.top="auto",e.style.bottom="0"):(e.style.top="auto",e.style.bottom="100%"))}class _s extends HTMLDivElement{constructor(){super(...arguments),this.addDay=1,this.add=!1,this.onMouseUpDay=e=>{if(null!=this.target&&!0===this.isSelecting){let t=e.target;this.is_empty_cell(t)||(t=this.lastTarget);let s=this.target.dataset.x,a=Number(this.target.dataset.y),n=Number(t.dataset.y),r=!1;Number(t.dataset.y)>=Number(this.target.dataset.y)?n+=Number(this.dataset.interval):a+=Number(this.dataset.interval),this.isSelecting=!1,this.tds.forEach((e=>{(this.target.dataset.y<=e.dataset.y&&e.dataset.y<=t.dataset.y||this.target.dataset.y>=e.dataset.y&&e.dataset.y>=t.dataset.y)&&(e.dataset.start&&(a>n?a=e.dataset.start:n=e.dataset.start),e.dataset.end&&(a>n?n=e.dataset.end:a=e.dataset.end),null!=e.dataset.event&&(r=!0)),e.classList.contains("element-calendar-events-table-td")||e.classList.remove("cell--selected")})),this.target=null,this.tds=null,!r&&a&&n?new O._(`${this.dataset.controllerUrl}/add/${s}/${a}/${n}?dataset=${this.data}`):i.q.notify.show({title:"Dėmesio",message:"Šiuo laiku rezervacija negalima",type:"info"}),document.removeEventListener("mouseup",this.onMouseUpDay),this.removeEventListener("mousemove",this.onMouseMoveDay)}},this.onMouseDownDay=e=>{this.target=e.target,document.addEventListener("mouseup",this.onMouseUpDay),null!=this.target.dataset.x&&null==this.target.dataset.event?(this.target.classList.add("cell--selected"),this.isSelecting=!0,this.tds=this.table.querySelectorAll(`[data-x='${this.target.dataset.x}']`),this.addEventListener("mousemove",this.onMouseMoveDay),document.addEventListener("mouseup",this.onMouseUpDay)):this.target=null},this.onMouseMoveDay=e=>{if(!0===this.isSelecting){let t=e.target;this.is_empty_cell(t)||(t=this.lastTarget),null!=this.lastTarget&&t.dataset.y==this.lastTarget.dataset.y||(this.tds.forEach((e=>{t.dataset.y<=e.dataset.y&&e.dataset.y<=this.target.dataset.y||t.dataset.y>=e.dataset.y&&e.dataset.y>=this.target.dataset.y?e.classList.contains("element-calendar-events-table-td")||e.classList.add("cell--selected"):e.classList.contains("element-calendar-events-table-td")||e.classList.remove("cell--selected")})),this.is_empty_cell(t)&&(this.lastTarget=t))}},this.onMouseUpWeek=e=>{if(null!=this.target&&!0===this.isSelecting){let t=e.target;this.is_empty_cell(t)||(t=this.lastTarget);let s=this.event.value?this.event.value:-1,a=Number(this.target.dataset.y)+Number(this.target.dataset.x),n=Number(t.dataset.y),r=!1;this.isSelecting=!1,this.dataset.twoDate?n+=Number(t.dataset.x):n+=Number(this.target.dataset.x),Number(t.dataset.y)>=Number(this.target.dataset.y)?n+=Number(this.dataset.interval):a+=Number(this.dataset.interval),this.tds.forEach((e=>{(Number(this.target.dataset.y)+Number(this.target.dataset.x)<=Number(e.dataset.y)+Number(e.dataset.x)&&Number(e.dataset.y)+Number(e.dataset.x)<=Number(t.dataset.y)+Number(t.dataset.x)||Number(this.target.dataset.y)+Number(this.target.dataset.x)>=Number(e.dataset.y)+Number(e.dataset.x)&&Number(e.dataset.y)+Number(e.dataset.x)>=Number(t.dataset.y)+Number(t.dataset.x))&&(e.dataset.start&&(a>n?a=e.dataset.start:n=e.dataset.start),e.dataset.end&&(a>n?n=e.dataset.end:a=e.dataset.end),this.dataset.twoDate?null!=e.dataset.event&&(r=!0):Number(this.target.dataset.x)==Number(t.dataset.x)&&null!=e.dataset.event&&(r=!0)),e.classList.contains("element-calendar-events-table-td")||e.classList.remove("cell--selected")})),this.target=null,this.tds=null,r?i.q.notify.show({title:"Dėmesio",message:"Šiuo laiku rezervacija negalima",type:"info"}):new O._(`${this.dataset.controllerUrl}/add/${s}/${a}/${n}?dataset=${this.data}`),document.removeEventListener("mouseup",this.onMouseUpWeek),this.removeEventListener("mousemove",this.onMouseMoveWeek)}},this.onMouseDownWeek=e=>{this.target=e.target,null!=this.target.dataset.x&&null==this.target.dataset.event?(this.target.classList.add("cell--selected"),this.isSelecting=!0,this.tds=this.table.querySelectorAll(".element-calendar-events-table-empty-td,.element-calendar-events-table-td"),this.addEventListener("mousemove",this.onMouseMoveWeek),document.addEventListener("mouseup",this.onMouseUpWeek)):this.target=null},this.onMouseMoveWeek=e=>{if(!0===this.isSelecting){let t=e.target;if(this.is_empty_cell(t)||(t=this.lastTarget),this.dataset.twoDate){if(null!=this.lastTarget&&t.dataset.y!=this.lastTarget.dataset.y&&t.dataset.x!=this.lastTarget.dataset.x)return void(this.lastTarget=t)}else if(null==this.lastTarget||t.dataset.x!=this.target.dataset.x)return void(this.lastTarget=t);this.tds.forEach((e=>{Number(t.dataset.y)+Number(t.dataset.x)<=Number(e.dataset.y)+Number(e.dataset.x)&&Number(e.dataset.y)+Number(e.dataset.x)<=Number(this.target.dataset.y)+Number(this.target.dataset.x)||Number(t.dataset.y)+Number(t.dataset.x)>=Number(e.dataset.y)+Number(e.dataset.x)&&Number(e.dataset.y)+Number(e.dataset.x)>=Number(this.target.dataset.y)+Number(this.target.dataset.x)?e.classList.contains("element-calendar-events-table-td")||e.classList.add("cell--selected"):e.classList.contains("element-calendar-events-table-td")||e.classList.remove("cell--selected")})),this.lastTarget=t}}}connectedCallback(){this.addEventListener("dom-rendered",this._init.bind(this))}_init(){this.eventsWrap=this.querySelector("div.table-resource-event-wrap"),this.classList.forEach((e=>{"element-calendar-events-add"==e&&(this.add=!0)})),this.controllerUrl=this.dataset.controllerUrl,0==this.add?(this.contentHelper=new w.t,this.urlHelper=new F.q,this._query(),"week"==this.view?this.addDay=7:"month"==this.view&&(this.addDay=31),this._addListener()):(this._queryDates(),this._addDateListener()),this.eventsRenderer=new bs,this.eventsRenderer.init(this)}_query(){this.table=this.querySelector("div#element-calendar-events-table"),this.table.style.userSelect="none",this.view=this.dataset.view||"",this.event=this.querySelector("input#element-resources-event-id"),this.date=this.querySelector("input#element-calendar-events-date"),this.next=this.querySelector("a.calendar-events-btn-next"),this.prev=this.querySelector("a.calendar-events-btn-prev"),this.data=this.dataset.data;let e=this.querySelector("div.element-calendar-events-search");e&&(this.search={search:e,button:e.querySelector("a.search-button"),input:e.querySelector("input.search-control"),clear:e.querySelector("span.search-clear")})}_queryDates(){this.dateFrom=document.querySelector("input[name='DateFrom']"),null==this.dateFrom?this.dateFrom=document.querySelector("input[name='Date']"):this.dateTo=document.querySelector("input[name='DateTo']"),this.timeFrom=document.querySelector("input[name='TimeFrom']"),this.timeTo=document.querySelector("input[name='TimeTo']"),this.todayDate=new Date;let e=this.todayDate.getMinutes(),t=e%(Number(this.dataset.interval)/60);0!=t&&this.todayDate.setMinutes(e-t+Number(this.dataset.interval)/60),this.hour=this.todayDate.getHours(),this.today=this.formatDate(this.todayDate)}_addListener(){let e={view:this.dataset.view},t="";if(this.search&&(t=this.search.input.value),["week","month"].includes(this.view)?this.date.addEventListener("pantera:change",(()=>{e.date=this.date.value.replace(" - ","|"),e.resourceId=this.event.value;let t=this.urlHelper.formatQueryString(e);this._event(t)})):this.date.addEventListener("change",(()=>{let e=this.date.value;this._event(`date=${e}&search=${t}`)})),this.event&&this.event.addEventListener("pantera:change",(()=>{e.resourceId=this.event.value,e.date=this.date.value.replace(" - ","|");let t=this.urlHelper.formatQueryString(e);this._event(t)})),this.next.addEventListener("click",(()=>{let t=this._get_date(1*this.addDay),s=t;null!=this.event&&(e.resourceId=this.event.value),e.date=t.slice(0,10);let i=this.urlHelper.formatQueryString(e);"day"==this.view&&this._event(i),this.date.value=s})),this.prev.addEventListener("click",(()=>{let t=this._get_date(-1*this.addDay),s=t;null!=this.event&&(e.resourceId=this.event.value),e.date=t.slice(0,10);let i=this.urlHelper.formatQueryString(e);"day"==this.view&&this._event(i),this.date.value=s})),null!=this.search&&(this.search.button.addEventListener("click",(()=>{this._event(`date=${this.date.value}&search=${this.search.input.value}`)})),this.search.input.addEventListener("search-changed",(e=>{e.preventDefault(),this.search.button.click()})),this.search.clear.addEventListener("click",(()=>{let e=this.formatDate(new Date);this._event(`date=${e}`),this.search.input.value="",this.date.value=e}))),this.dataset.edit)if(this.dataset.addBefore)this._addMouseEvents();else{this._addBefore()&&this._addMouseEvents()}}_addMouseEvents(){"day"==this.view?this.addEventListener("mousedown",this.onMouseDownDay):["week","month"].includes(this.view)&&this.addEventListener("mousedown",this.onMouseDownWeek)}_removeMouseEvents(){"day"==this.view?this.removeEventListener("mousedown",this.onMouseDownDay):["week","month"].includes(this.view)&&(this.removeEventListener("mousedown",this.onMouseDownWeek),this.removeEventListener("mouseup",this.onMouseUpWeek))}_addBefore(){let e,t=new Date;return 10==this.date.value.length?e=new Date(this.date.value.substr(0,10)):this.date.value.length>10?e=new Date(this.date.value.substr(10,20)):(e=new Date(this.date.value+"-01"),e.setMonth(e.getMonth()+1,0)),t.getTime()-t.getTime()%864e5<=e.getTime()}_event(e,t=!1){document.getElementById("element-calendar-events-table").parentElement;let s=`${b.xw.zone}/router/element_calendar_resources_events/load?`;this.contentHelper.update(s+e+"&dataset="+this.data,{targetId:"element-calendar-events-table",updateurl:t,callback:()=>{if(this.table=this.querySelector("div#element-calendar-events-table"),this.table.style.userSelect="none",!this.dataset.addBefore&&this.dataset.edit){this._addBefore()?this._addMouseEvents():this._removeMouseEvents()}this.eventsRenderer.initEvents()}})}_get_date(e){let t=new Date(this.date.value?this.date.value.slice(0,10):(new Date).toISOString().slice(0,10));if(t.setDate(t.getDate()+e),"week"==this.view){let e=t,s=this.formatDate(t);return e.setDate(t.getDate()+6),s+" - "+this.formatDate(e)}if("month"==this.view){let t=parseInt(this.date.value.substr(5,2)),s=parseInt(this.date.value.substr(0,4)),i=t+e/Math.abs(e);return i<=0&&(i=12,s--),i>12&&(i=1,s++),`${s}-${i.toString().padStart(2,"0")}`}return this.formatDate(t)}_addDateListener(){this.lockHours(),null!=this.dateTo&&this.dateTo.addEventListener("change",(()=>{this.dateTo.value<this.dateFrom.value&&(this.dateFrom.value=this.dateTo.value),this.lockHours()})),this.dateFrom.addEventListener("change",(()=>{null!=this.dateTo&&this.dateTo.value<this.dateFrom.value&&(this.dateTo.value=this.dateFrom.value),this.lockHours()})),this.timeFrom.addEventListener("pantera:change",(()=>{this.dateFrom.value==this.today&&this.setTime(this.timeFrom)})),this.timeTo.addEventListener("pantera:change",(()=>{null!=this.dateTo&&this.dateTo.value==this.today&&this.setTime(this.timeTo)}))}lockHours(){this.dataset.addbefore||(this.dateFrom.value==this.today?(this.checkTime(this.timeFrom),this.setTime(this.timeFrom),null==this.dateTo&&(this.setTime(this.timeTo),this.checkTime(this.timeTo))):(this.reset(this.timeFrom),null==this.dateTo&&this.reset(this.timeTo)),null!=this.dateTo&&this.dateTo.value==this.today?(this.checkTime(this.timeTo),this.setTime(this.timeTo)):null!=this.dateTo&&this.reset(this.timeTo))}checkTime(e){e.parentElement.querySelector(".xtime-inline-list").querySelectorAll("a").forEach((e=>{Number(e.dataset.hours)<this.hour?e.style.pointerEvents="none":e.style.pointerEvents="auto"}))}reset(e){e.parentElement.querySelector(".xtime-inline-list").querySelectorAll("a").forEach((e=>{e.style.pointerEvents="auto"}))}setTime(e){let t=Number(e.value.slice(0,2));Number(e.value.slice(3,5))+60*t<this.todayDate.getMinutes()+60*this.todayDate.getHours()&&(e.value=this.formatTime(this.todayDate))}formatDate(e){let t=""+(e.getMonth()+1),s=""+e.getDate(),i=e.getFullYear();return t.length<2&&(t="0"+t),s.length<2&&(s="0"+s),[i,t,s].join("-")}formatTime(e){let t=""+e.getHours(),s=""+e.getMinutes();return t.length<2&&(t="0"+t),s.length<2&&(s="0"+s),[t,s].join(":")}is_empty_cell(e){return e instanceof HTMLTableCellElement&&!e.classList.contains("element-calendar-events-table-header")&&!e.classList.contains("element-calendar-events-table-locked")}}class Ls extends HTMLDivElement{connectedCallback(){let e=new Event("dom-rendered");this.parentElement.dispatchEvent(e)}}customElements.define("element-calendar-events",_s,{extends:"div"}),customElements.define("dom-rendered-indicator",Ls,{extends:"div"});class Es extends HTMLDivElement{connectedCallback(){setTimeout((()=>this._init()))}load(e){new a.C.get(`${this.controllerUrl}/load/${this.pk}${window.location.search}`,e,{},(e=>{this.dynamicContentEl.innerHTML=e,this.bodyListeners()}))}_init(){this.pk=Number(this.dataset.pk),this.controllerUrl=this.dataset.controllerUrl,this.dynamicContentEl=this.querySelector(".table-resource-dynamic-content"),this.listeners(),this.bodyListeners()}listeners(){this.addEventListener("click",(e=>{let t=e.target;if(t.closest(".time-cell")){let e=t.closest("tr[data-user]"),s=Number(e.dataset.user),i=e.querySelector(".resource-name");this.addReservation(t.dataset.from,t.dataset.to,{id:s,name:i.innerText})}})),document.addEventListener("click",(e=>{let t=e.target;if(t.closest(".confirm-reservation-btn")){let e=t.closest("[data-id]"),s=Number(e.dataset.id);this.confirmReservation(s)}else if(t.closest(".deny-reservation-btn")){let e=t.closest("[data-id]"),s=Number(e.dataset.id);this.denyReservation(s)}})),this.search()}initLimitInputs(){this.querySelectorAll(".interval-limit-input").forEach((e=>{let t=e.closest("[data-time]").dataset.time;t&&e.addEventListener("change",(0,f.Z)((()=>{this.addIntervalLimit(t,Number(e.value))}),200))}))}bodyListeners(){this.initTooltips(),this.initLimitInputs()}addReservation(e,t,s){i.q.question.show({title:"Rezervacijos patvirtinimas",html:`Ar norite rezervuoti laiką (${s.name}):<br> <b>${e} - ${t}</b>`},(n=>{n&&new a.C.post(`${this.controllerUrl}/add_reservation/${this.pk}`,{timeFrom:e,timeTo:t,userId:s.id},{json:!0},(e=>{e.success||i.q.error.show({text:e.msg,title:"Dėmesio"}),this.load()}))}))}addIntervalLimit(e,t){new a.C.post(`${this.controllerUrl}/limit_interval/${this.pk}`,{allowed:t,time:e},{json:!0},(()=>{this.load()}))}initTooltips(){this.dynamicContentEl.querySelectorAll("td[data-json]").forEach((e=>{const t=JSON.parse(e.dataset.json),s=`\n                <div data-id="${t.id}">   \n                    <div>\n                        <b>${t.userName}</b>\n                    </div>\n                    <div>\n                        ${t.timeFrom} - ${t.timeTo}\n                    </div>\n                    <div class="alert alert-simple alert-sm alert-${t.color} mt-2 mb-2">\n                        <div class="alert-simple-text">\n                            ${t.status}\n                        </div>\n                    </div>\n                    ${t.actions.confirm?'<a href="javascript:;" class="btn btn-sm btn-circle btn-success confirm-reservation-btn" title="Patvirtinti">\n                            <i class="fas fa-check"></i>\n                            </a>':""}\n                    ${t.actions.deny?'<a href="javascript:;" class="btn btn-sm btn-circle btn-danger btn-outlined deny-reservation-btn" title="Atmesti">\n                            <i class="fas fa-times"></i>\n                            </a>':""}\n                </div>`;i.q.tooltip.init(e,{content:s,showOn:"hover",hoverable:!0})}))}confirmReservation(e){i.q.question.show({title:"Pertraukos patvirtinimas",text:"Ar tikrai norite patvirtinti pertrauką?"},(t=>{t&&new a.C.post(`${this.controllerUrl}/confirm_reservation/${e}`,null,{json:!0},(()=>{this.load()}))}))}denyReservation(e){i.q.question.show({title:"Pertraukos rezervacijos atmetimas",text:"Ar tikrai norite atmesti pertraukos rezervaciją?"},(t=>{t&&new a.C.post(`${this.controllerUrl}/deny_reservation/${e}`,null,{json:!0},(()=>{this.load()}))}))}search(){let e=this.querySelector(".user-search-input");e.addEventListener("search-changed",(()=>{d.X.url.urlParams({search:e.value},!0),this.load()}))}}customElements.define("element-calendar-breaks",Es,{extends:"div"});class ws extends HTMLDivElement{constructor(){super()}refresh(e){const t=this;h.R.start(t),new a.C.get(e,{},{xloadingbar:!1},(function(e){t.innerHTML=e,h.R.stop(),Qi()}))}}customElements.define("element-card-ajax",ws,{extends:"div"});class Ss extends HTMLDivElement{connectedCallback(){setTimeout((()=>this._init()))}_init(){this.year=Number(this.dataset.year),this.month=Number(this.dataset.month),this.date=new Me.j({year:this.year,month:this.month}),this.contentHelper=new w.t,this.urlHelper=new F.q,this.controllerUrl=this.dataset.controllerUrl,this._tableListeners(),this._search(),this._filters(),this.topSortFilters(),new qs(this)}_load(e){let t=location.search.substring(1),s={};t&&(s=JSON.parse('{"'+t.replace(/&/g,'","').replace(/=/g,'":"')+'"}',((e,t)=>""===e?t:decodeURIComponent(t))));const i=Object.assign(s,e),a=this.urlHelper.formatQueryString(i,!1);this.urlHelper.urlParams(i,!1),this.contentHelper.update(`${this.controllerUrl}/load?${a}`,{targetId:"vacations-table-container",updateurl:!1,callback:()=>{this._tableListeners()}})}topSortFilters(){this.extraSort=this.querySelectorAll("input[name=HaveVacations]"),this.extraSort.forEach((e=>{e.addEventListener("click",(e=>{let t=[];t[e.target.name]=e.target.value,this._load(t),this.updateSortFilters()}))}))}updateSortFilters(){this.extraSort.forEach((e=>{e.checked?e.parentElement.classList.add("active"):e.parentElement.classList.remove("active")}))}_filters(){this.filter=this.querySelector("div.module-top-filter-card"),this.filterInputs=this.filter.querySelectorAll("input"),this.btnFilterCommit=this.filter.querySelector(".courses-filter-commit"),this.btnFilterClear=this.filter.querySelector(".courses-filter-clear"),this.filterButton=this.querySelector("#filterButton > a"),this.btnFilterClear.addEventListener("click",(()=>{this.filterButton.classList.remove("active");let e=[];this.filter.querySelectorAll(".xselect-display-text").forEach((e=>{e.innerText=""})),this.filterInputs.forEach((t=>{t.name&&t.value&&("checkbox"==t.type?t.checked=!1:t.value="",e[t.name]=t.value)})),this._load(e)})),this.btnFilterCommit.addEventListener("click",(()=>{let e=[];this.filterInputs.forEach((t=>{t.name&&t.value&&(0==t.checked&&"checkbox"==t.type||(e[t.name]=t.value))})),Object.keys(e).length>0?this.filterButton.classList.add("active"):this.filterButton.classList.remove("active"),this._load(e)}))}_search(){const e=this.querySelector("input.search-control");e.addEventListener("search-changed",(()=>{this._load({search:e.value})}))}_tableListeners(){this.querySelector("a.vacation-btn-prev").addEventListener("click",(()=>{this.date.month--,this._load({year:this.date.year,month:this.date.month})})),this.querySelector("a.vacation-btn-next").addEventListener("click",(()=>{this.date.month++,this._load({year:this.date.year,month:this.date.month})})),this._initEventCells()}_initEventCells(){this.querySelectorAll("td[data-event]").forEach((e=>{e.addEventListener("click",(()=>{const t=e.dataset.event;new O._(`${this.controllerUrl}/edit/${t}`)}))}))}}class qs{constructor(e){this.table=e,this.onMouseDown=e=>{const{target:t}=e,s=t.closest("td");if(s&&(this.row=s.closest("tr"),this.firstIndex=s.cellIndex,0!==s.cellIndex&&!s.hasChildNodes())){s.classList.add("selected-td"),this.lastIndex=this.firstIndex,this.notEmptyLeftIndex=1,this.notEmptyRightIndex=this.row.cells.length-1;for(let e=this.firstIndex;e<this.row.cells.length;e++)if(this.row.cells[e].hasChildNodes()){this.notEmptyRightIndex=e;break}for(let e=this.firstIndex;e>0;e--)if(this.row.cells[e].hasChildNodes()){this.notEmptyLeftIndex=e;break}document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp),document.body.classList.add("user-select-none-all")}},this.onMouseMove=e=>{const{target:t}=e;let s=t.cellIndex;if("TD"===t.tagName&&s>0&&!1===this.row.cells[s].hasChildNodes()){if(s===this.firstIndex)for(let e=1;e<this.row.cells.length;e++)!1===this.row.cells[e].hasChildNodes()&&e!=this.firstIndex&&this.row.cells[e].classList.remove("selected-td");if(s<this.firstIndex&&this.notEmptyLeftIndex<=s){if(s<this.lastIndex){for(let e=s;e<this.lastIndex;e++)!1===this.row.cells[e].hasChildNodes()&&this.row.cells[e].classList.add("selected-td");for(let e=this.firstIndex+1;e<this.row.cells.length;e++)!1===this.row.cells[e].hasChildNodes()&&this.row.cells[e].classList.remove("selected-td")}else if(s>this.lastIndex){for(let e=1;e<s;e++)!1===this.row.cells[e].hasChildNodes()&&this.row.cells[e].classList.remove("selected-td");for(let e=this.firstIndex+1;e<this.row.cells.length;e++)!1===this.row.cells[e].hasChildNodes()&&this.row.cells[e].classList.remove("selected-td")}this.lastIndex=s}else if(s>this.firstIndex&&this.notEmptyRightIndex>=s){if(s>this.lastIndex){for(let e=s;e>this.lastIndex;e--)!1===this.row.cells[e].hasChildNodes()&&this.row.cells[e].classList.add("selected-td");for(let e=1;e<this.firstIndex;e++)!1===this.row.cells[e].hasChildNodes()&&this.row.cells[e].classList.remove("selected-td")}else if(s<this.lastIndex){for(let e=s+1;e<this.row.cells.length;e++)!1===this.row.cells[e].hasChildNodes()&&this.row.cells[e].classList.remove("selected-td");for(let e=1;e<this.firstIndex;e++)!1===this.row.cells[e].hasChildNodes()&&this.row.cells[e].classList.remove("selected-td")}this.lastIndex=s}}},this.onMouseUp=()=>{document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp),document.body.classList.remove("user-select-none-all");let e=this.row.dataset.id;const t=this.table.querySelectorAll(`tr[data-id="${e}"] > td[class="selected-td"]`);let s=t[0].cellIndex.toString().padStart(2,"0"),i=t[t.length-1].cellIndex.toString().padStart(2,"0"),a=this.table.date.month.toString().padStart(2,"0"),n=this.table.date.year,r={dateRange:`${n}-${a}-${s} - ${n}-${a}-${i}`,rowID:e};for(let e of[...this.row.cells])e.classList.remove("selected-td");new O._(this.table.controllerUrl+`/add/${e}`,r,{})},this.tbody=e.querySelector("tbody"),this.table.addEventListener("mousedown",this.onMouseDown)}}customElements.define("element-calendar-vacations",Ss,{extends:"div"});class Cs extends HTMLDivElement{connectedCallback(){setTimeout((()=>this._init()))}_init(){this.year=Number(this.dataset.year),this.month=Number(this.dataset.month),this.date=new Me.j({year:this.year,month:this.month}),this.contentHelper=new w.t,this.urlHelper=new F.q,this.controllerUrl=this.dataset.controllerUrl,this._tableListeners()}_reload(){const e=this.date.year,t=this.date.month,s=Number(this.dataset.periodId),i=this.urlHelper.formatQueryString({year:e,month:t,periodId:s},!0);this.contentHelper.load(`${b.xw.zone}${this.controllerUrl}/load?${i}`,{target:this.parentElement,updateurl:!1})}_tableListeners(){let e=this.querySelector("a.vacation-btn-prev");e&&e.addEventListener("click",(()=>{this.date.month--,this._reload()}));let t=this.querySelector("a.vacation-btn-next");t&&t.addEventListener("click",(()=>{this.date.month++,this._reload()}))}}customElements.define("element-calendar-shifts-editor",Cs,{extends:"div"});class Ts extends HTMLDivElement{connectedCallback(){setTimeout((()=>this._init()))}_init(){this.year=Number(this.dataset.year),this.month=Number(this.dataset.month),this.period=Number(this.dataset.period),this.search=this.querySelector(".element-calendar-shifts-general-search"),this.date=new Me.j({year:this.year,month:this.month}),this.contentHelper=new w.t,this.urlHelper=new F.q,this.controllerUrl=this.dataset.controllerUrl,this._tableListeners(),this._searchListeners(),this.sortListeners()}_reload(e=null){null!=e||this.querySelector('input[name="UserSort"]').checked||(e=1);const t=this.date.year,s=this.date.month,i=this.period,a=this.search?this.search.value:null,n=this.urlHelper.formatQueryString({year:t,month:s,periodId:i,search:a,sort:e},!0);this.contentHelper.update(`${b.xw.zone}${this.controllerUrl}/load?${n}`,{targetId:"element-calendar-shifts-general-table-wrapper",updateurl:!1,callback:()=>{this._tableListeners()}})}sortListeners(){let e=this.querySelector("div.filter-bullet");if(null==e)return;let t=e.querySelectorAll("input");t.forEach((e=>{e.addEventListener("click",(e=>{this._reload(e.target.value),this.updateSortFilters(t)}))}))}updateSortFilters(e){e.forEach((e=>{e.checked?e.parentElement.classList.add("active"):e.parentElement.classList.remove("active")}))}_tableListeners(){let e=this.querySelector("a.element-calendar-shifts-general-btn-prev");e&&e.addEventListener("click",(()=>{this.date.month--,this._reload()}));let t=this.querySelector("a.element-calendar-shifts-general-btn-next");t&&t.addEventListener("click",(()=>{this.date.month++,this._reload()})),!1!==b.rH.developer&&this.querySelectorAll("td[data-cycle-id]").forEach((e=>{e.addEventListener("click",(()=>{let t=`${b.xw.zone}${this.controllerUrl}/cycle/`+this.period.toString()+"/"+e.dataset.cycleId;window.open(t,"_blank")}))}))}_searchListeners(){this.search&&this.search.addEventListener("search-changed",(()=>{this._reload()}))}}customElements.define("element-calendar-shifts-general",Ts,{extends:"div"});class As extends HTMLDivElement{connectedCallback(){setTimeout((()=>this._init()))}_init(){this.year=Number(this.dataset.year),this.month=Number(this.dataset.month),this.period=Number(this.dataset.period),this.search=this.querySelector(".element-calendar-shifts-general-search"),this.export=this.querySelector("div.summaryActions > div > div > a"),this.date=new Me.j({year:this.year,month:this.month}),this.contentHelper=new w.t,this.urlHelper=new F.q,this.controllerUrl=this.dataset.controllerUrl,this.exportUrl="/router/element_calendar_times_summary/export/",this._tableListeners(),this._searchListeners(),this.sortListeners(),this.reloadUrl(this.year,this.month,"0")}_reload(e=null){null!=e||this.querySelector('input[name="UserSort"]').checked||(e=1);const t=this.date.year,s=this.date.month,i=this.period,a=this.search?this.search.value:null,n=this.urlHelper.formatQueryString({year:t,month:s,periodId:i,search:a,sort:e},!0);this.reloadUrl(t,s,e),this.contentHelper.update(`${b.xw.zone}${this.controllerUrl}/load?${n}`,{targetId:"element-calendar-shifts-general-table-wrapper",updateurl:!1,callback:()=>{this._tableListeners()}})}reloadUrl(e,t,s){this.export=this.querySelector("div.summaryActions > div > div > a"),this.export.href=window.location.origin+this.exportUrl+`${e}/${t}/${s}`}sortListeners(){let e=this.querySelector("div.filter-bullet");if(null==e)return;let t=e.querySelectorAll("input");t.forEach((e=>{e.addEventListener("click",(e=>{this._reload(e.target.value),this.updateSortFilters(t)}))}))}updateSortFilters(e){e.forEach((e=>{e.checked?e.parentElement.classList.add("active"):e.parentElement.classList.remove("active")}))}_tableListeners(){let e=this.querySelector("a.element-calendar-shifts-general-btn-prev");e&&e.addEventListener("click",(()=>{this.date.month--,this._reload()}));let t=this.querySelector("a.element-calendar-shifts-general-btn-next");t&&t.addEventListener("click",(()=>{this.date.month++,this._reload()})),!1!==b.rH.developer&&this.querySelectorAll("td[data-cycle-id]").forEach((e=>{e.addEventListener("click",(()=>{let t=`${b.xw.zone}${this.controllerUrl}/cycle/`+this.period.toString()+"/"+e.dataset.cycleId;window.open(t,"_blank")}))}))}_searchListeners(){this.search&&this.search.addEventListener("search-changed",(()=>{this._reload()}))}}customElements.define("element-calendar-times-summary",As,{extends:"div"});class Is extends HTMLDivElement{connectedCallback(){setTimeout((()=>this._init()))}_init(){this._quering(),this._addListener(),this.addEvents()}_quering(){this.addBtn=this.querySelector(".element-calendar-schedule-cycle-add-btn"),this.list=this.querySelector("#cycle-list-items-div")}_addListener(){this.addBtn.addEventListener("click",(e=>{this._load()}))}_load(e=""){let t=`${b.xw.zone}/router/element_calendar_schedule_cycle/addItem?`;new O._(t,{},{},(e=>{const t=document.createElement("div");t.innerHTML=e,this.list.appendChild(t.firstElementChild),this.addEvents()}))}addEvents(){this.querySelectorAll(".element-calendar-schedule-cycle-delete").forEach((e=>{let t=e.parentElement.parentElement;e.addEventListener("click",(()=>{i.q.question.show({text:"Artikrai norite pašalinti?",title:"Šalinimas"},(e=>{!0===e&&t.remove()}))}))})),this.querySelectorAll("input.cycle-item-check").forEach((e=>{e.addEventListener("change",(()=>{let t=e.closest(".cycle-item-div").querySelector(".item");e.checked?(t.classList.add("data-null"),t.querySelectorAll("input").forEach((e=>{e.required=!1}))):(t.classList.remove("data-null"),t.querySelectorAll("input").forEach((e=>{e.required=!0})))}))}))}}customElements.define("element-calendar-schedule-cycle",Is,{extends:"div"});class Ds extends HTMLDivElement{connectedCallback(){setTimeout((()=>this._init()))}_init(){this._quering(),this._addListener(),this.addEvents()}_quering(){this.addBtn=this.querySelector(".element-calendar-schedule-clean-cycle-add-btn"),this.list=this.querySelector("#cycle-list-items-div")}_addListener(){this.addBtn.addEventListener("click",(e=>{this._load()}))}_load(e=""){let t=`${b.xw.zone}/router/element_calendar_schedule_clean_cycle/addItem?`;new O._(t,{},{},(e=>{const t=document.createElement("div");t.innerHTML=e,this.list.appendChild(t.firstElementChild),this.addEvents()}))}addEvents(){this.querySelectorAll(".element-calendar-schedule-cycle-delete").forEach((e=>{let t=e.parentElement.parentElement;e.addEventListener("click",(()=>{i.q.question.show({text:"Artikrai norite pašalinti?",title:"Šalinimas"},(e=>{!0===e&&t.remove()}))}))})),this.querySelectorAll("input.cycle-item-check").forEach((e=>{e.addEventListener("change",(()=>{let t=e.closest(".cycle-item-div").querySelector(".item");e.checked?(t.classList.add("data-null"),t.querySelectorAll("input").forEach((e=>{e.required=!1}))):(t.classList.remove("data-null"),t.querySelectorAll("input").forEach((e=>{e.required=!0})))}))}))}}customElements.define("element-calendar-schedule-clean-cycle",Ds,{extends:"div"});class $s extends HTMLDivElement{connectedCallback(){setTimeout((()=>this._init()))}_init(){this._quering(),this._addListener(),this.addEvents()}_quering(){this.addBtn=this.querySelector(".element-calendar-schedule-cycle-add-btn"),this.list=this.querySelector("#cycle-list-items-div")}_addListener(){this.addBtn.addEventListener("click",(e=>{this._load()}))}_load(e=""){let t=`${b.xw.zone}/router/element_calendar_schedule_bpc_cycle/addItem?`;new O._(t,{},{},(e=>{const t=document.createElement("div");t.innerHTML=e,this.list.appendChild(t.firstElementChild),this.addEvents()}))}addEvents(){this.querySelectorAll(".element-calendar-schedule-bpc-cycle-delete").forEach((e=>{let t=e.parentElement.parentElement;e.addEventListener("click",(()=>{i.q.question.show({text:"Artikrai norite pašalinti?",title:"Šalinimas"},(e=>{!0===e&&t.remove()}))}))})),this.querySelectorAll("input.cycle-item-check").forEach((e=>{e.addEventListener("change",(()=>{let t=e.closest(".cycle-item-div").querySelector(".item");e.checked?(t.classList.add("data-null"),t.querySelectorAll("input").forEach((e=>{e.required=!1}))):(t.classList.remove("data-null"),t.querySelectorAll("input").forEach((e=>{e.required=!0})))}))}))}}customElements.define("element-calendar-schedule-bpc-cycle",$s,{extends:"div"});class Ms extends HTMLDivElement{connectedCallback(){setTimeout((()=>this._init()))}_init(){this.urlHelper=new F.q,this._render(),this._listeners()}_render(){this._rendered={pages:this.querySelectorAll("a[data-page]"),perpage:this.querySelectorAll("div[data-value]")}}_listeners(){this._rendered.pages&&this._rendered.pages.forEach((e=>{e.addEventListener("click",(()=>{console.log(e.dataset),this.urlHelper.update("page",e.dataset.page,!0)}))})),this._rendered.perpage&&this._rendered.perpage.forEach((e=>{e.addEventListener("click",(()=>{console.log(e.dataset.value),"Visi"==e.dataset.value?this.urlHelper.update("perpage",999,!0):this.urlHelper.update("perpage",e.dataset.value,!0)}))}))}}customElements.define("element-table-paginator",Ms,{extends:"div"});class js extends HTMLDivElement{connectedCallback(){setTimeout((()=>this._init()))}_init(){this.urlHelper=new F.q,this.isUpdate=!!this.dataset.update,this.onlyNumbers=!!this.dataset.onlyNumbers,this.currentPage=+this.dataset.currentPage,this.pages=+this.dataset.pages,this._render(),this._listeners()}_render(){this._rendered={pages:this.querySelectorAll("a[data-page]"),perpage:this.querySelectorAll("div[data-value]"),firstpage:this.querySelector(".page-first"),lastpage:this.querySelector(".page-last"),previouspage:this.querySelector(".previous-button"),nextpage:this.querySelector(".next-button")}}_listeners(){this._rendered.pages&&!0===this.isUpdate&&this._rendered.pages.forEach((e=>{e.addEventListener("click",(()=>{this.urlHelper.update("page",e.dataset.page,!0)}))})),this.pages&&!1===this.onlyNumbers&&!0===this.isUpdate&&(this._rendered.firstpage.addEventListener("click",(e=>{e.preventDefault(),this.urlHelper.update("page",1,!0)})),this._rendered.lastpage.addEventListener("click",(e=>{e.preventDefault(),this.urlHelper.update("page",this.pages,!0)})),this._rendered.previouspage.addEventListener("click",(e=>{e.preventDefault(),this.urlHelper.update("page",--this.currentPage,!0)})),this._rendered.nextpage.addEventListener("click",(e=>{e.preventDefault(),this.urlHelper.update("page",++this.currentPage,!0)})))}}customElements.define("element-web-paginator",js,{extends:"div"});class Bs extends HTMLDivElement{connectedCallback(){setTimeout((()=>this._init()),200)}_init(){this.year=Number(this.dataset.year),this.month=Number(this.dataset.month),this.date=new Me.j({year:this.year,month:this.month}),this.contentHelper=new w.t,this.urlHelper=new F.q,this.controllerUrl=this.dataset.controllerUrl,this.search=this.querySelector("input.search-control"),this.table=this.querySelector("div#courses-table-container"),this._tableListeners(),this._search(),this._filters()}_load(e){let t=this.urlHelper.formatQueryString(e,!0);this.urlHelper.urlParams(e,!0),this.contentHelper.update(`${this.controllerUrl}/load?${t}`,{targetId:"courses-table-container",updateurl:!1,callback:()=>{this._tableListeners()}})}_filters(){this.filter=this.querySelector("div.courses-top-filter-card"),this.filterInputs=this.filter.querySelectorAll("input"),this.btnFilterCommit=this.filter.querySelector(".courses-filter-commit"),this.btnFilterClear=this.filter.querySelector(".courses-filter-clear"),this.btnFilterClear.addEventListener("click",(e=>{let t=[];this.filter.querySelectorAll(".xselect-display-text").forEach((e=>{e.innerText=""})),this.querySelector("div[is='select-multi']").querySelectorAll(".xselect-list-item").forEach((e=>{e.classList.remove("xselect-list-item--selected")})),this.querySelectorAll(".chip-primary").forEach((e=>{e.remove()})),this.filterInputs.forEach((e=>{e.name&&(e.value="",t[e.name]=e.value)})),this._load(t)})),this.btnFilterCommit.addEventListener("click",(e=>{let t=[];this.filterInputs.forEach((e=>{e.name&&(t[e.name]=e.value)})),this._load(t)}))}_search(){this.search.addEventListener("search-changed",(()=>{this._load({search:this.search.value})}))}_tableListeners(){this.querySelector("a.courses-btn-prev").addEventListener("click",(()=>{this.date.month--,this._load({year:this.date.year,month:this.date.month,search:this.search.value})})),this.querySelector("a.courses-btn-next").addEventListener("click",(()=>{this.date.month++,this._load({year:this.date.year,month:this.date.month,search:this.search.value})})),this._initEventCells()}_initEventCells(){this.querySelectorAll("a[data-event-id]").forEach((e=>{e.addEventListener("click",(()=>{const t=e.dataset.eventId,s=this.dataset.dataset;window.open(`${this.controllerUrl}/edit/${t}/${s}`,"_blank")}))}))}}class Hs extends HTMLDivElement{connectedCallback(){setTimeout((()=>this._init()),200)}_init(){this.contentHelper=new w.t,this._quering(),this._addListener(),this.addEvents()}_quering(){this.date=this.querySelector("input[name='Date']")}_addListener(){this.date.addEventListener("pantera:change",(e=>{let t=this.date.value.replace(" - ","|");this._load(`date=${t}`)}))}_load(e){let t=`${b.xw.zone}/router/element_calendar_courses/dateList?`;this.contentHelper.update(t+e,{targetId:"element-calendar-courses-add-list",callback:()=>{this.addEvents()}})}addEvents(){this.querySelectorAll(".element-calendar-courses-add-delete").forEach((e=>{let t=e.parentElement.parentElement,s=t.querySelector(".element-calendar-courses-add-from").querySelector("input"),a=t.querySelector(".element-calendar-courses-add-to").querySelector("input"),n=t.querySelector(".element-calendar-courses-add-time").querySelector("input");a.addEventListener("pantera:change",(()=>{this.calculateHours(s,a,n)})),s.addEventListener("pantera:change",(()=>{this.calculateHours(s,a,n)})),e.addEventListener("click",(()=>{i.q.question.show({text:"Artikrai norite pašalinti?",title:"Šalinimas"},(e=>{console.log(e),!0===e&&t.remove()}))}))}))}calculateHours(e,t,s){if(e.value&&t.value&&"0"!=t.value&&"0"!=e.value){let a=Number(t.value.split(":")[0])-Number(e.value.split(":")[0]);a<0?(i.q.notify.show({title:"Dėmesio",message:"Laikas iki turi būti velesnis nei laiko nuo",type:"info"}),s.value="0"):s.value=a.toString()}}}customElements.define("element-calendar-courses",Bs,{extends:"div"}),customElements.define("element-calendar-courses-add",Hs,{extends:"div"});class Ns extends HTMLDivElement{connectedCallback(){setTimeout((()=>this._init()))}_init(){this.year=Number(this.dataset.year),this.month=Number(this.dataset.month),this.date=new Me.j({year:this.year,month:this.month}),this.contentHelper=new w.t,this.urlHelper=new F.q,this.controllerUrl=this.dataset.controllerUrl,this._tableListeners(),this._search(),this._filters()}_load(e){let t=location.search.substring(1),s={};t&&(s=JSON.parse('{"'+t.replace(/&/g,'","').replace(/=/g,'":"')+'"}',(function(e,t){return""===e?t:decodeURIComponent(t)})));const i=Object.assign(s,e),a=this.urlHelper.formatQueryString(i,!1);this.urlHelper.urlParams(i,!1),this.contentHelper.update(`${this.controllerUrl}/load?${a}`,{targetId:"vacations-table-container",updateurl:!1,callback:()=>{this._tableListeners()}})}_search(){const e=this.querySelector("input.search-control");e&&e.addEventListener("search-changed",(()=>{this._load({search:e.value})}))}_filters(){this.filter=this.querySelector("div.module-top-filter-card"),this.filter&&(this.filterInputs=this.filter.querySelectorAll("input"),this.btnFilterCommit=this.filter.querySelector(".courses-filter-commit"),this.btnFilterClear=this.filter.querySelector(".courses-filter-clear"),this.btnFilterClear.addEventListener("click",(()=>{let e=[];this.filter.querySelectorAll(".xselect-display-text").forEach((e=>{e.innerText=""})),this.filterInputs.forEach((t=>{t.name&&t.value&&(t.value="",e[t.name]=t.value)})),this._load(e)})),this.btnFilterCommit.addEventListener("click",(()=>{let e=[];this.filterInputs.forEach((t=>{t.name&&t.value&&(e[t.name]=t.value)})),this._load(e)})))}_tableListeners(){this.querySelector("a.vacation-btn-prev").addEventListener("click",(()=>{this.date.month--,this._load({year:this.date.year,month:this.date.month})})),this.querySelector("a.vacation-btn-next").addEventListener("click",(()=>{this.date.month++,this._load({year:this.date.year,month:this.date.month})})),this._initEventCells()}_initEventCells(){this.querySelectorAll("td[data-event]").forEach((e=>{e.addEventListener("click",(()=>{const t=e.dataset.event;new O._(`${this.controllerUrl}/edit/${t}`)}))}))}}customElements.define("element-calendar-requests",Ns,{extends:"div"});class Os extends HTMLDivElement{connectedCallback(){setTimeout((()=>this._init()),200)}_init(){this._addTimeListener()}_addTimeListener(){this.times=this._getTimes(),this.times.forEach((e=>{let t=e.querySelector("input[is='picker-time-simple']");t.addEventListener("dblclick",(s=>{if(t.parentElement.querySelector(".box").classList.add("d-none"),e.dataset.id)new O._(`${this.dataset.controller}edit/${e.dataset.id}?dataset=${this.dataset.dataset}`);else{let t=e.dataset.clientId||-1;new O._(`${this.dataset.controller}add/${t}/${e.dataset.date}?dataset=${this.dataset.dataset}`)}})),t.addEventListener("change",(s=>{if(5==t.value.length&&("1"==t.value.charAt(0)||"0"==t.value.charAt(0))&&t.value.charAt(1)>="0"&&t.value.charAt(1)<="9"&&":"==t.value.charAt(2)&&t.value.charAt(3)>="0"&&t.value.charAt(3)<="5"&&t.value.charAt(4)>="0"&&t.value.charAt(4)<="9"){console.log(t.value);let s=e.dataset.clientId||-1,i=e.dataset.id||-1;new O._(`${this.dataset.controller}saveTime?dataset=${this.dataset.dataset}`,{id:i,clientId:s,date:e.dataset.date,time:t.value})}})),new Promise((s=>{Promise.all([new Promise((e=>t.addEventListener("pantera:change",(()=>e())))),new Promise((e=>t.addEventListener("pantera:closed",(()=>e()))))]).then((()=>{let s=e.dataset.clientId||-1,i=e.dataset.id||-1;new O._(`${this.dataset.controller}saveTime?dataset=${this.dataset.dataset}`,{id:i,clientId:s,date:e.dataset.date,time:t.value})}))}))}))}_getTimes(){return this.querySelectorAll(".calendar-times-week-input")}}customElements.define("element-calendar-times-week",Os,{extends:"div"});class Ps extends HTMLDivElement{connectedCallback(){setTimeout((()=>this._init()),200)}_init(){this._addTimeListener()}_addTimeListener(){this.times=this._getTimes(),this.times.forEach((e=>{let t=e.querySelector("input[is='picker-time-simple']");t.addEventListener("dblclick",(s=>{t.parentElement.querySelector(".box").classList.add("d-none"),e.dataset.id&&new O._(`${this.dataset.controller}edit/${e.dataset.id}?dataset=${this.dataset.dataset}`)})),t.addEventListener("change",(s=>{if(5==t.value.length&&("1"==t.value.charAt(0)||"0"==t.value.charAt(0))&&t.value.charAt(1)>="0"&&t.value.charAt(1)<="9"&&":"==t.value.charAt(2)&&t.value.charAt(3)>="0"&&t.value.charAt(3)<="5"&&t.value.charAt(4)>="0"&&t.value.charAt(4)<="9"){let s=e.dataset.clientId||-1,i=e.dataset.id||-1;new O._(`${this.dataset.controller}saveTime?dataset=${this.dataset.dataset}`,{id:i,clientId:s,date:e.dataset.date,time:t.value})}})),new Promise((s=>{Promise.all([new Promise((e=>t.addEventListener("pantera:change",(()=>e())))),new Promise((e=>t.addEventListener("pantera:closed",(()=>e()))))]).then((()=>{let s=e.dataset.clientId||-1,i=e.dataset.id||-1;new O._(`${this.dataset.controller}saveTime?dataset=${this.dataset.dataset}`,{id:i,clientId:s,date:e.dataset.date,time:t.value})}))}))}))}_getTimes(){return this.querySelectorAll(".calendar-times-week-input")}}customElements.define("element-calendar-times-day",Ps,{extends:"div"});class Rs extends HTMLDivElement{constructor(){super(...arguments),this.filters={}}connectedCallback(){setTimeout((()=>this._init()))}_init(){this.urlHelper=new F.q,this.date=new Me.j({year:Number(this.dataset.year),month:Number(this.dataset.month)}),this.display=this.dataset.display,this.filters.params=this.dataset.params,"calendar"===this.display?(this.calendarView=this.dataset.view,this.displayHeading=this.querySelector(".monthName"),this.cardsBody=this.querySelector(".calendar-cards-body"),this.monthBtn=this.querySelector(".calendar-month-btn"),this.dayBtn=this.querySelector(".calendar-day-btn"),this.nextMonth=this.querySelector(".nextMonth"),this.previousMonth=this.querySelector(".previousMonth"),this.listeners()):"list"===this.display&&(this.filtersForm=this.querySelector("#filters-form"),this.filtersForm.onsubmit=e=>{e.preventDefault();let t={},s=new FormData(this.filtersForm),i=Object.fromEntries(s.entries());t=Object.assign(i,{display:"list"}),this.urlHelper.urlParams(t,!0),location.reload()})}listeners(){this.nextMonth.addEventListener("click",(()=>{"month"==this.calendarView?this.changeMonth("next"):"day"==this.calendarView&&this.changeDay("next")})),this.previousMonth.addEventListener("click",(()=>{"month"==this.calendarView?this.changeMonth("previous"):"day"==this.calendarView&&this.changeDay("previous")})),this.monthBtn.addEventListener("click",(()=>{this.changeCalendarView("month")})),this.dayBtn.addEventListener("click",(()=>{this.changeCalendarView("day")})),this.cardsBody.addEventListener("click",(e=>{let t=e.target;if(t.classList.contains("calendar-more-btn")||t.parentElement.classList.contains("calendar-more-btn")){let e=+t.closest(".card").dataset.day;this.setDay(e),this.changeCalendarView("day")}}))}filter(){this.filters.calendarView=this.calendarView,this.filters.YearNo=this.date.year,this.filters.MonthNo=this.date.month,"day"==this.calendarView?this.filters.DayNo=this.dataset.day:this.filters.DayNo=null,this.load()}changeDay(e){let t=+this.dataset.day,s=this.date.month,i=this.date.year,a=this.date.day;if("next"==e){let e=++t;e>a?(t=1,s=this.date.next.month,i=this.date.next.year):t=e}else if("previous"==e){let e=--t;e<1?(t=this.date.prev.days,s=this.date.prev.month,i=this.date.prev.year):t=e}this.setDay(t),this.setDate(i,s),this.filter()}changeMonth(e){let t,s;"next"==e?(t=this.date.next.month,s=this.date.next.year):"previous"==e&&(t=this.date.prev.month,s=this.date.prev.year),this.setDate(s,t),this.filter()}changeCalendarView(e){this.calendarView=e,"day"==this.calendarView?(this.dayBtn.classList.add("active"),this.monthBtn.classList.remove("active")):(this.dayBtn.classList.remove("active"),this.monthBtn.classList.add("active")),this.filter()}setDate(e,t){this.date.year=e,this.date.month=t}setDay(e){this.dataset.day=e.toString()}load(){h.R.start(),new O._(`/${b.xw.lang}/router/element_calendar_cards/getCalendarCardsJson`,this.filters,{json:!0},(e=>{this.cardsBody.innerHTML=e.cards,this.displayHeading.innerText=`${e.heading}`,h.R.stop()}))}}customElements.define("calendar-cards",Rs,{extends:"div"});class Fs extends HTMLFormElement{connectedCallback(){setTimeout((()=>this._init()))}_init(){this.onsubmit=e=>{e.preventDefault(),this.formData=new FormData(this);let t=Object.fromEntries(this.formData.entries());t.params=this.dataset.post,new O._(this.dataset.submit,t,{json:!0},null)}}}customElements.define("comment-form",Fs,{extends:"form"});class Us{constructor(e){this.classes={active:"active",hidden:"d-none",icons:{openFolder:["fas","fa-folder-open"],closedFolder:["fas","fa-folder"],item:["far","fa-file"]}},this.el=e,this._listeners(),this.initItems(),this.initSearch()}getNodeLineage(e){let t=this.el.querySelector(`li[data-xsort-id="${e}"]`);return{id:e.toString(),path:t.dataset.lineage}}_listeners(){const e=this.el.querySelectorAll("li[data-xsort-id]"),t=this.el.querySelectorAll("a.tbl-attributes");e.forEach((e=>{e.addEventListener("click",(s=>{s.stopPropagation();let i=e.querySelector("a.tbl-attributes");t.forEach((e=>e.classList.remove(this.classes.active))),i&&i.classList.add(this.classes.active),this._onClick&&this._onClick(e.dataset.xsortId,{path:e.dataset.lineage,id:e.dataset.xsortId})}))})),this._initFolding()}_initFolding(){this.el.querySelectorAll("li[data-folder]:not(.xlistener)").forEach((e=>{const t=e.querySelector("i.fold"),s=e.querySelector("ul.xsortable");t.classList.add("xlistener"),t.addEventListener("click",(e=>{e.stopImmediatePropagation(),s.classList.toggle(this.classes.hidden);const i=s.classList.contains(this.classes.hidden)?"closedFolder":"openFolder";this.setIcon(i,t)}))}))}setIcon(e,t){Object.keys(this.classes.icons).filter((t=>t!==e)).forEach((e=>{this.classes.icons[e].forEach((e=>t.classList.remove(e)))})),this.classes.icons[e].forEach((e=>t.classList.add(e)))}initItems(){const e=Array.from(this.el.querySelectorAll("li[data-xsort-id]"));this.items=e.map((e=>this._collect(e)))}_collect(e){const t=e.children[0],s=e.children[1],i={id:Number(e.dataset.id),parent:Number(e.dataset.parent||0),text:t.textContent.toLocaleLowerCase(),real:t.textContent,childrens:[],li:e,div:t};let a=Array.from(s?s.querySelectorAll(":scope > li"):[]);return i.childrens=a.map((e=>this._collect(e))),i}initSearch(){const e=document.getElementById("tree-picker-search-input");e.addEventListener("search-changed",(()=>{this.items.forEach((t=>{this._search(t,e.value)}))}))}_search(e,t,s=!1){let i=s||-1!==W(e.text,t),a=!1;e.childrens.forEach((e=>{!0===this._search(e,t,i)&&(a=!0)})),!0===a&&(i=!0);const n=e.li,r=e.div.querySelector(":scope > div > a > span.xtree-node-title");return!1===i?(n.style.display="none",r.innerHTML=e.real):(r.innerHTML=V(e.real,t),n.style.display=""),i}}var zs=s(5204);class Vs extends HTMLDivElement{connectedCallback(){setTimeout((()=>this._init()),150)}_init(){this.contentHelper=new w.t,this.param=this.dataset.param,this.input=this.querySelector(".element-list-tree-input"),this.selectedContainer=this.querySelector(".element-list-tree-selected"),this.itemsContainer=this.querySelector(".element-list-tree-list-container"),this.buttons={moveTo:this.querySelector("a.element-list-tree-move-to"),moveFrom:this.querySelector("a.element-list-tree-move-from"),moveToAll:this.querySelector("a.element-list-tree-move-to-all"),moveFromAll:this.querySelector("a.element-list-tree-move-from-all")},this.checkAllInputs={to:this.itemsContainer.querySelector("input.list-check-all"),from:this.selectedContainer.querySelector("input.list-check-all")},this.router=this.dataset.router,this._initTree(),this._listeners(),this._search(),this.updateMoveButtonsState()}_initTree(){let e=this.querySelector('div[data-type="element-list-tree-picker"]');this.tree=new Us(e),this.tree._onClick=(e,t)=>{this.currentLineage=t,this.contentHelper.update(`${this.router}/load/${e}?param=${this.param}`,{targetId:"element-list-tree-list",updateurl:!1,callback:()=>{this._initItems(),this.updateMoveButtonsState()}})}}_listeners(){this._checkAllListener(),this.buttons.moveTo.addEventListener("click",this.selectChecked.bind(this)),this.buttons.moveFrom.addEventListener("click",this.deselectChecked.bind(this)),this.buttons.moveToAll.addEventListener("click",(()=>{this._toggleAllInputs(this.itemsContainer,!0),this.selectChecked(),this.updateMoveButtonsState()})),this.buttons.moveFromAll.addEventListener("click",(()=>{this._toggleAllInputs(this.selectedContainer,!0),this.deselectChecked(),this.updateMoveButtonsState()})),this.selectedContainer.addEventListener("click",(e=>{let t=e.target;if(t.closest(".remove-group-btn")){let e=t.closest("li[data-id]").querySelectorAll("input.list-item");return this.deselectItems(e),void this.updateMoveButtonsState()}t.matches('input[type="checkbox"]')&&this.updateMoveButtonsState()})),this.itemsContainer.addEventListener("click",(e=>{e.target.matches('input[type="checkbox"]')&&this.updateMoveButtonsState()})),this.editToggle()}_initItems(){const e=this.itemsContainer.querySelectorAll("input.list-item"),t=this.selectedContainer.querySelectorAll("input.list-item");e.forEach((e=>{const s=e.getAttribute("value");for(let i=0;i<t.length;i++){const a=t[i];if(a.getAttribute("value")===s){e.dataset.selected="true",e.checked=!0,this.bindDeselectClickListener(e,a.closest("li"));break}}})),this.checkAllInputs.to.checked=!1,this.itemsContainer.querySelectorAll("li[data-id] input.list-check-all").forEach((e=>{let t=e.closest("li[data-id]");e.addEventListener("click",(()=>{t.querySelectorAll('li.element-list-tree-item:not(.d-none) input.list-item:not([data-selected="true"]):not([disabled])').forEach((t=>t.checked=e.checked))}))}))}_checkAllListener(){this.checkAllInputs.to.addEventListener("click",(()=>{let e=this.checkAllInputs.to.checked;this.queryGroupCheckboxes().forEach((t=>t.checked=e)),this._toggleAllInputs(this.itemsContainer,e)})),this.checkAllInputs.from.addEventListener("click",(()=>{this._toggleAllInputs(this.selectedContainer,this.checkAllInputs.from.checked)}))}_toggleAllInputs(e,t){e.querySelectorAll('li.element-list-tree-item:not(.d-none) input.list-item:not([data-selected="true"]):not([disabled])').forEach((e=>e.checked=t))}_updateValue(){const e=this.selectedContainer.querySelectorAll("input.list-item");let t=[];e.forEach((e=>{t.push(e.getAttribute("value"))})),this.input.value=t.join(",")}selectChecked(){this.itemsContainer.querySelectorAll('input.list-item:checked:not([data-selected="true"])').forEach((e=>{e.checked=!1;let t=e.closest("li").cloneNode(!0),s=e.closest("li[data-id]").dataset.id,i=this.tree.getNodeLineage(Number(s));this.appendSelected(t,i),e.checked=!0,e.dataset.selected="true",this.bindDeselectClickListener(e,t)})),this._updateValue(),this.checkAllInputs.to.checked=!1,this.updateMoveButtonsState()}appendSelected(e,t){let s=this.selectedContainer.querySelector(`li[data-id="${t.id}"]`);if(s){s.querySelector("ul").append(e)}else{s=document.createElement("li"),s.dataset.id=t.id;let i=document.createElement("div");i.classList.add("element-list-tree-separator");let a=`\n                <div class="element-list-tree-separator-bcrumb">\n                    ${t.path.split("/").map((e=>e?`<span class="tree-bcrumb">${e}</span>`:[])).join("")}\n                </div>\n                <div class="tree-bcrumb-divider">\n                </div>\n                <a data-tooltip="Pašalinti skyrių" href="javascript:;" class="btn btn-sm btn-dark btn-outlined btn-circle remove-group-btn">\n                    <i class="fas fa-times"></i>\n                </a>\n            `;i.innerHTML=a,s.append(i);let n=document.createElement("ul");n.append(e),s.append(n),this.selectedContainer.append(s),(new zs.J).init(s.querySelector("a[data-tooltip]"))}}deselectChecked(){const e=this.selectedContainer.querySelectorAll("input.list-item:checked");this.deselectItems(e),this.updateMoveButtonsState()}deselectItems(e){this.itemsContainer.querySelectorAll('input.list-item[data-selected="true"]').forEach((t=>{const s=t.getAttribute("value");for(let i=0;i<e.length;i++){if(e[i].getAttribute("value")===s){delete t.dataset.selected,t.checked=!1;break}}})),e.forEach((e=>{e.closest("li").remove()})),this.removeEmptyGroups(),this._updateValue(),this.checkAllInputs.from.checked=!1}_search(){const e=(e,t,s)=>{e.addEventListener("search-changed",(()=>{const i=t(),a=e.value.toLowerCase();i.forEach((e=>{let t=e.querySelector("label[for]").textContent.toLowerCase().indexOf(a);a&&-1===t?e.classList.add("d-none"):e.classList.remove("d-none")})),s.querySelectorAll("li[data-id]").forEach((e=>{const t=e.querySelector("li:not(.d-none)");e.classList.toggle("d-none",null===t)}))}))},t=this.itemsContainer.closest(".element-list-tree-section").querySelector("input.search-control"),s=this.selectedContainer.closest(".element-list-tree-section").querySelector("input.search-control");e(t,(()=>this.itemsContainer.querySelectorAll("li.element-list-tree-item")),this.itemsContainer),e(s,(()=>this.selectedContainer.querySelectorAll("li.element-list-tree-item")),this.selectedContainer)}removeEmptyGroups(){this.selectedContainer.querySelectorAll("li[data-id]").forEach((e=>{e.querySelector("li")||e.remove()}))}bindDeselectClickListener(e,t){let s=()=>{t.remove(),e.checked=!1,delete e.dataset.selected,this._updateValue(),this.removeEmptyGroups(),e.removeEventListener("click",s)};e.addEventListener("click",s)}updateContent(e,t){this.contentHelper.update(e,{targetId:"element-list-tree-list",updateurl:!1,callback:()=>{this._initItems(),"function"==typeof t&&t()}})}globalItemSearch(){let e=document.getElementById("element-tree-picker-item-search"),t=e.closest('[is="select-simple"]');e.addEventListener("pantera:change",(()=>{let s=e.value;s&&this.updateContent(`${this.router}/find_item/${s}`,(()=>{let e=document.getElementById("element-list-tree-list"),i=Number(e.dataset.treeId);this.currentLineage=this.tree.getNodeLineage(i);let a=this.itemsContainer.querySelector(`input[value="${s}"].list-item`);a&&(a.checked=!0,this.buttons.moveTo.click(),t.value={id:null,text:null})}))}))}queryGroupCheckboxes(){return this.itemsContainer.querySelectorAll("li[data-id] input.list-check-all")}updateMoveButtonsState(){let e='.element-list-tree-item  input.list-item[type="checkbox"]:not([data-selected]):not([disabled])',t='input.list-item[type="checkbox"]:checked:not([data-selected])',s=this.itemsContainer.querySelectorAll(e).length>0;this.buttons.moveToAll.classList.toggle("d-none",!s);let i=this.itemsContainer.querySelectorAll(t).length>0;this.buttons.moveTo.classList.toggle("d-none",!i);let a=this.selectedContainer.querySelectorAll(e).length>0;this.buttons.moveFromAll.classList.toggle("d-none",!a);let n=this.selectedContainer.querySelectorAll(t).length>0;this.buttons.moveFrom.classList.toggle("d-none",!n)}editToggle(){let e=this.querySelector(".element-tree-picker-section-view"),t=this.querySelector(".element-tree-picker-section-edit"),s=this.querySelector(".element-tree-picker-btn-edit");t.classList.contains("d-none"),s.addEventListener("click",(()=>{e.classList.contains("d-none")?(e.classList.remove("d-none"),t.classList.add("d-none")):(e.classList.add("d-none"),t.classList.remove("d-none"))}))}}customElements.define("element-tree-picker",Vs,{extends:"div"});class Ws extends HTMLDivElement{connectedCallback(){setTimeout((()=>{this._init()}))}_init(){this.wrap=this.querySelector("div.tabs-ajax-link-wrap"),this.content=this.querySelector("div.tabs-ajax-content");const e=this.wrap.querySelectorAll("li > a");e.forEach((t=>{t.addEventListener("click",(s=>{s.preventDefault(),e.forEach((e=>e.classList.remove("active"))),this.open(t)})),t.classList.contains("active")&&t.click()}))}open(e){e.classList.add("active"),new a.C.get(e.getAttribute("href"),{},{xloadingbar:!0},(e=>{let t=document.createRange().createContextualFragment(e);this.content.innerHTML="",this.content.append(t),Qi()}))}}customElements.define("element-tab-ajax",Ws,{extends:"div"});class Zs extends HTMLDivElement{connectedCallback(){setTimeout((()=>this._init()))}_init(){const e=this.querySelector("div.inside-submenu").querySelectorAll("a[id^='tab-simple-control-"+this.dataset.randomId+"']"),t=this.querySelector(".tab-content"),s=this.dataset.getKeyName;let i=new F.q;e.forEach(((a,n)=>{a.addEventListener("click",(()=>{if(a.dataset.url){let e=a.dataset.url;new O._(e,{},{json:!0})}e.forEach(((e,a)=>{const r=t.children[a];if(n!==a)e.classList.remove("active"),r.classList.remove("active"),r.classList.add("d-none"),r.classList.remove("show");else if(e.classList.add("active"),r.classList.add("active"),r.classList.remove("d-none"),r.classList.add("show"),s){let e=new URLSearchParams(location.search),t={};e.set(s,a.toString());for(let s of e.entries())t[s[0]]=s[1];i.urlParams(t,!0)}}))}))}))}}customElements.define("element-tab-simple",Zs,{extends:"div"});class Ys extends HTMLDivElement{connectedCallback(){setTimeout((()=>this._init()))}_init(){this._input=this.querySelector("input.search-control"),this._clearBtn=this.querySelector("span.search-clear"),this._inputListener(),this._clearListener()}_inputListener(){let e=null;this._input.addEventListener("input",(()=>{clearTimeout(e),this.toggleSearchButton(),e=setTimeout((()=>{this._dispatchSearchEvent()}),200)})),this._input.addEventListener("keydown",(e=>{"Enter"===e.key&&(e.preventDefault(),this._dispatchSearchEvent())}))}toggleSearchButton(){this._input.value&&""!=this._input.value?this._clearBtn.classList.remove("d-none"):this._clearBtn.classList.add("d-none")}_clearListener(){this._clearBtn.addEventListener("click",(()=>{this._input.value=null,this._dispatchSearchEvent(),this._clearBtn.classList.add("d-none")}))}_dispatchSearchEvent(){this._input.dispatchEvent(new CustomEvent("search-changed"))}}customElements.define("element-toolbar-search-simple",Ys,{extends:"div"});class Ks extends HTMLDivElement{connectedCallback(){setTimeout((()=>this._init()))}_init(){this._querying(),this._searchListener(),this._clearBtnListener(),this._searchBtnListener(),this._changeListener()}_querying(){this._input=this.querySelector("input.search-control"),this._clearBtn=this.querySelector("span.search-clear"),this._searchBtn=this.querySelector("a.search-button")}_searchListener(){this._input.addEventListener("keydown",(e=>{"Enter"===e.key&&this._search()}))}_clearBtnListener(){this._clearBtn.addEventListener("click",(e=>{this._input.value="",this._clearBtn.classList.add("d-none")}))}_search(){""!=this._input.value&&(window.location.href=`${this.dataset.search}?${this.dataset.getParam}=${this._input.value}`)}_changeListener(){this._input.addEventListener("input",(e=>{""!=this._input.value?this._clearBtn.classList.remove("d-none"):this._clearBtn.classList.add("d-none")}))}_searchBtnListener(){this._searchBtn.addEventListener("click",(e=>{this._search()}))}}customElements.define("element-toolbar-search-web",Ks,{extends:"div"});class Xs extends HTMLDivElement{connectedCallback(){setTimeout((()=>this._init()))}_init(){this._addListener()}_addListener(){this.textarea=this.querySelector(".element-web-proposals-comment-textarea"),this.textarea&&(this.textdiv=this.querySelector(".element-web-proposals-comment-text-div"),this.editBtn=this.querySelector(".element-web-proposals-comment-edit-btn"),this.editBtn.addEventListener("click",(()=>{this.textarea.classList.contains("d-none")?(this.textarea.classList.remove("d-none"),this.textdiv.classList.add("d-none")):(this.textarea.classList.add("d-none"),this.textdiv.classList.remove("d-none"))})))}}customElements.define("element-web-proposals-comment",Xs,{extends:"div"});class Js extends HTMLDivElement{connectedCallback(){setTimeout((()=>this._init()))}_init(){this.config={click:{targetId:this.dataset.targetId,url:this.dataset.clickUrl},url:{get:this.dataset.urlGet}},this.initTree()}initTree(){this.tree=this.querySelector('div[is="element-tree-model"]');const e=document.getElementById(this.config.click.targetId);this.tree._onClick=t=>{const s=l.check(this,"content-loaded");d.X.content.load(`${this.config.click.url}${t}`,{target:e,callback:()=>{this.config.url.get&&d.X.url.urlParams({[this.config.url.get]:t},!1),s&&l.dispatch(this,"content-loaded",{id:t})}})}}}customElements.define("element-tree-model-viewer",Js,{extends:"div"});class Gs extends J.Z{constructor(){super(...arguments),this.comments=[]}_init(){let e=this.querySelectorAll("div.comment-wrap");this.comment=this.querySelector("div.form textarea"),this.submitData=this.dataset.submitdata,this.commentPlace=this.querySelector("div.allComments"),this.url=this.dataset.url,e.forEach((e=>{this.comments.push(new Qs(e,this.submitData,this.url))})),this.querySelector("#mainSubmit").addEventListener("click",(()=>this.mainSubmit()))}mainSubmit(){let e=this.comment.value;e&&new O._(`${this.url}submit`,{comment:e,submitData:this.submitData},{},(e=>{this.commentPlace.insertAdjacentHTML("afterbegin",e),this.comments.push(new Qs(this.commentPlace.firstElementChild,this.submitData,this.url)),this.comment.value=""}))}}class Qs{constructor(e,t,s){this.sameUser=!1,this.editable=!1,this.item=e,this.url=s,this.submitData=t,this.id=this.item.dataset.commentid,this.textarea=this.item.querySelector("textarea"),this.textarea&&(this.textareaStartValue=this.textarea.value),this.item.dataset.user&&(this.sameUser=!0),this.text=this.item.querySelector("div.comment-content-textwrap"),this.input=this.item.querySelector("div.comment-edit"),this.submit=this.item.querySelector("a#submit"),this.edit=this.item.querySelector("a#edit"),this.aDelete=this.item.querySelector("a#delete"),this.sameUser&&this.listeners()}listeners(){this.edit.addEventListener("click",(()=>this.changeEditable())),this.aDelete.addEventListener("click",(()=>this.deleteComment())),this.submit.addEventListener("click",(()=>this.editComment()))}changeEditable(){this.editable?(this.text.classList.remove("d-none"),this.input.classList.add("d-none")):(this.text.classList.add("d-none"),this.input.classList.remove("d-none")),this.editable=!this.editable}deleteComment(){(new S.A).show({title:"Ar tikrai norite ištrinti?"},(e=>{e&&new O._(`${this.url}actions/deleteComment`,{id:this.id,submitData:this.submitData},{},(e=>{e.remove&&this.item.remove()}))}))}editComment(){let e=this.textarea.value;e&&this.textareaStartValue!=e&&new O._(`${this.url}submit`,{id:this.id,comment:e,submitData:this.submitData},{},(e=>{this.text.querySelector("div.comment-content-text").innerHTML=e.value;let t=this.text.querySelector("div.comment-edit-text");t.classList.contains("d-none")&&t.classList.remove("d-none"),this.changeEditable()}))}}customElements.define("element-web-comments",Gs,{extends:"div"});class ei extends HTMLDivElement{constructor(){super(...arguments),this.active="events"}connectedCallback(){setTimeout((()=>this._init()))}_init(){this.tabs=this.querySelectorAll(".tab"),this.buttons=this.querySelectorAll(".calendar-more-btn"),this.container=this.querySelector(".tabs-events-content"),this.tabs.forEach((e=>{e.addEventListener("click",(()=>{this.active=e.dataset.type,this.setActive(),this.load()}))})),this.buttons.forEach((e=>{e.addEventListener("click",(()=>{}))}))}setActive(){this.tabs.forEach((e=>{e.dataset.type==this.active?e.classList.add("active"):e.classList.remove("active")}))}load(){h.R.start(),new O._(`${b.xw.lang}/router/element_web_tabs_events/getRecords`,{type:this.active},{json:!0},(e=>{this.container.innerHTML=e,h.R.stop()}))}moreBtn(){h.R.start(),new O._(`/${b.xw.lang}/router/element_calendar_cards/getCalendarCardsJson`,this.filters,{json:!0},(e=>{this.cardsBody.innerHTML=e.cards,this.displayHeading.innerText=`${e.heading}`,h.R.stop()}))}}customElements.define("web-tabs-events",ei,{extends:"div"});class ti extends HTMLDivElement{constructor(){super(...arguments),this.firstLoad=!0,this._selectors={editBtn:".widget-content-edit-btn",historyBtn:".widget-content-history-btn",previewBtn:".widget-content-preview-btn",curVersionBtn:".widget-content-cur-version-btn"}}connectedCallback(){setTimeout((()=>this._init()))}_init(){window.reloadDocumentTab=this.reloadDocumentTab.bind(this),this.contentHelper=new w.t,this._router=this.dataset.router,this.type=this.dataset.type,setTimeout((()=>{this._elements={editContainer:document.getElementById("widget-content-editor"),tree:this.querySelector('div[is="element-tree-model-viewer"]')},this._listeners(),this._onChange()}),200)}load(e,t){this.contentHelper.load(`${this._router}${e}/${t}`,{target:this._elements.editContainer})}_onChange(){const e=this.querySelector('div[is=select-simple] input[type="hidden"');e&&e.addEventListener("pantera:change",(e=>{d.X.content.load(`/tvs/${this.type}?${e.target.name}=${e.target.value}`)}))}_listeners(){this._elements.editContainer&&(this._elements.editContainer.addEventListener("click",(e=>{const t=e.target;t.matches(this._selectors.previewBtn)?this.load("content",Number(t.dataset.contentId)):t.matches(this._selectors.curVersionBtn)&&this.load("view",Number(t.dataset.tree))})),l.add(this._elements.tree,"content-loaded",(e=>{const t=Number(e.detail.id),s=this.querySelector('div[is="element-tab-ajax"]');l.add(s,"content-loaded",(()=>{const e=this._elements.editContainer.querySelector('button[is="button-submit"]');e&&l.add(e.form,"submitcomplete",(()=>{this.load("view",t)}))}))})))}reloadDocumentTab(){xdialog.modal.close();let e=document.querySelector("ul.nav-submenu");if(!e)return;let t=e.querySelector("a.active");t&&t.click()}}customElements.define("element-widget-content",ti,{extends:"div"});class si extends J.Z{_init(){let e=this.querySelectorAll("img");this.mainImg=this.querySelector("div.xstore-gallery-main-div img"),console.log(this.mainImg),e.forEach((e=>{e.addEventListener("error",(e=>{e.currentTarget.src="/static/img/logos/logo.png"}))})),e.forEach((e=>{e.addEventListener("click",(e=>{e.target!=this.mainImg&&(this.mainImg.src=e.target.src)}))}))}}customElements.define("media-gallery-product",si,{extends:"div"});class ii extends HTMLDivElement{connectedCallback(){setTimeout((()=>this._init()))}_init(){let e=this.querySelector(".edit-button");if(this.real_comment_wrap=this.querySelector(".comment-content-textwrap"),this.real_comment=this.querySelector(".comment-content-text"),this.textareaWrap=this.querySelector(".comment-edit"),this.comment_edit_text=this.querySelector(".comment-edit-text"),this.textareaWrap){this.textarea=this.textareaWrap.querySelector(".form-control"),this.textareaWrap.querySelector(".comment-edit-submit").addEventListener("click",this.handleSubmit.bind(this))}e&&e.addEventListener("click",this.toggleEdit.bind(this))}handleSubmit(){this.toggleEdit();let e=this.textarea.value;this.real_comment.innerText=e,this.comment_edit_text.classList.remove("d-none")}toggleEdit(){this.textareaWrap.classList.contains("d-none")?(this.textareaWrap.classList.remove("d-none"),this.real_comment_wrap.classList.add("d-none")):(this.textareaWrap.classList.add("d-none"),this.real_comment_wrap.classList.remove("d-none"))}}customElements.define("element-card-comment",ii,{extends:"div"});class ai extends HTMLDivElement{connectedCallback(){setTimeout((()=>this._init()))}_init(){this.div=document.querySelector(`div#${this.dataset.divId}`),document.querySelector(`[name=${this.dataset.inputName}]`).addEventListener(this.dataset.event,(e=>{new O._(`${this.dataset.url}`,{data:e.target.value},{},(e=>{this.div.innerHTML=e}))}))}}customElements.define("element-web-ajax",ai,{extends:"div"});var ni=s(7348),ri=function(e,t,s,i){return new(s||(s=Promise))((function(a,n){function r(e){try{o(i.next(e))}catch(e){n(e)}}function l(e){try{o(i.throw(e))}catch(e){n(e)}}function o(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,l)}o((i=i.apply(e,t||[])).next())}))};class li extends HTMLDivElement{constructor(){super(...arguments),this.users=[]}connectedCallback(){setTimeout((()=>this._init()))}_init(){return ri(this,void 0,void 0,(function*(){this.url=this.dataset.url;const{socket:e}=yield ni.plugins.socket();this.socket=e,this.socket.emit("getActiveUsers",(e=>{e.forEach((e=>{this.users.push(e.userId)})),this.loadUsers()})),this.socket.on("userConnected",(e=>{this.users.push(e),this.loadUsers()})),this.socket.on("userDisconnected",(e=>{this.users=this.users.filter((t=>t!==e)),this.loadUsers()}))}))}loadUsers(){new O._(this.url,{users:this.users},{xloadingbar:!1},(e=>{this.innerHTML=e}))}}customElements.define("element-media-active-avatars",li,{extends:"div"});class oi extends J.Z{constructor(){super(...arguments),this.selectDotBtn=()=>{const e=this.carousel.previousScrollSnap(),t=this.carousel.selectedScrollSnap();this.dots[e].classList.remove("active"),this.dots[t].classList.add("active")},this.onDotClick=e=>{let t=e.target.closest("a.btn-carousel");if(!t)return;let s=parseInt(t.dataset.slideTo);this.carousel.scrollTo(s)}}_init(){let e=this.querySelector("div.embla"),t=e.querySelector("div.embla__viewport"),s=this.querySelector(".carousel-indicators");e&&(this.dots=[].slice.call(s.querySelectorAll("a.btn-carousel")),this.carousel=(0,rs.Z)(t,{loop:!0}),this.carousel.on("select",this.selectDotBtn),s.addEventListener("click",this.onDotClick))}}customElements.define("widget-birthdays",oi,{extends:"div"});class di extends HTMLDivElement{connectedCallback(){setTimeout((()=>this._init()))}_init(){}}customElements.define("widget-survey",di,{extends:"div"});class ci extends J.Z{constructor(){super(...arguments),this.selectOnChange=e=>{this.date=e.currentTarget.value,this.getEvents(this.date)},this.actionsOnClick=e=>{let t=e.target.closest(".xcalendar-timeslot-btn");if(!t)return;let s={day:"addDays",month:"addMonths"};t.classList.contains("xbtn-next")?this.date=this[s[this.subtype]](this.date,1):t.classList.contains("xbtn-prev")&&(this.date=this[s[this.subtype]](this.date,-1)),console.log(this.date),this.getEvents(this.date)},this.clearEvents=()=>{this.eventsCols.forEach((e=>{e.innerHTML=""}))},this.eventTpl=({Name:e,Description:t,Time:s,Duration:i})=>`\n\t\t<div class="xcalendar-timeslot-event-content">\n\t\t\t<div class="fw-600">${e||""}</div>\n\t\t\t<div class="fw-300">${s||""}</div>\n\t\t\t<div class="fw-600">${i||""}</div>\n\t\t\t<div>${t||""}</div>\n\t\t</div>\n\t`,this.setEventsPadding=()=>{let e=this.timeslotGrid.querySelector("th");this.eventsWrap.style.paddingTop=`${e.offsetHeight}px`,this.eventsWrap.style.paddingLeft=`${e.offsetWidth}px`},this.renderEvents=e=>{let t=e.events,s=e.dom;console.log(t),console.log(s),Object.keys(t).map((e=>t[e])).forEach((e=>{let t=this.eventTpl(e),s=e[this.timeslotRefKey],i=parseInt(e.Duration),a=this.calcEventTop(e.Time),n=i*this.cellHeight/30,r=document.createElement("div");r.classList.add("xcalendar-timeslot-event"),r.setAttribute("data-event-id",e.MilestoneId),r.style.top=`${a}px`,r.style.height=`${n}px`,r.innerHTML=t,s?this.eventsColsObj[s].appendChild(r):console.error("nenurodytas timeslotRefKey (evento pk stulpelio pavadinimas)")}))}}_init(){this.wrap=this,this.actions=this.querySelector("div.xcalendar-resoure-actions"),this.actions.addEventListener("click",this.actionsOnClick),this.timeslotGrid=this.querySelector("table.xcalendar-timeslot-grid"),this.eventsWrap=this.querySelector("div.xcalendar-timeslot-events"),this.eventsCols=[].slice.call(this.eventsWrap.querySelectorAll("div.xcalendar-timeslot-event-col")),this.eventsColsObj=this.eventsCols.reduce(((e,t)=>{let s={};return s[t.dataset.timeslotId]=t,Object.assign(Object.assign({},s),e)}),{}),this.subtype=this.dataset.subtype||"day",this.eventsUrl=this.dataset.eventsUrl,this.timeslotRefKey=this.dataset.timeslotRefKey,this.cellHeight=24,this.hourFrom=parseInt(this.dataset.hourFrom),this.date=this.dataset.date,this.dateDomEl=this.querySelector(".xcalendar-timeslot-title"),this.dateSelect=this.querySelector(".xdate-box-left input"),this.dateSelect.addEventListener("change",this.selectOnChange),this.getEvents(this.date),this.setEventsPadding(),window.addEventListener("resize",this.setEventsPadding)}addDays(e,t){let s=Oe()(e);return s.add(t,"days"),s.format("YYYY-MM-DD").toString()}addMonths(e,t){let s=Oe()(e);return s.add(t,"months"),s.format("YYYY-MM").toString()}durationToTime(e,t){return Oe()(e).add(t,"minutes").format("HH:mm")}getEvents(e){if(this.clearEvents(),this.eventsUrl){const{subtype:t,cellHeight:s}=this;new O._(this.eventsUrl,{date:e,subtype:t,cellHeight:s},{json:!0},this.renderEvents)}this.dateSelect.value=e}calcEventTop(e){let t=e.split(":"),s=60*(+t[0]-this.hourFrom)+ +t[1];return 2*this.cellHeight*(s/60)}}customElements.define("element-calendar-timeslot",ci,{extends:"div"});var hi=function(e,t,s,i){return new(s||(s=Promise))((function(a,n){function r(e){try{o(i.next(e))}catch(e){n(e)}}function l(e){try{o(i.throw(e))}catch(e){n(e)}}function o(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,l)}o((i=i.apply(e,t||[])).next())}))};class ui extends HTMLDivElement{constructor(){super(...arguments),this.notifyDialog=new dt.y,this.clickOnEvent=!1,this.classes={active:"active",dropdown:"next-step"},this.inputChecked=!1,this.dropdownDisabled=!1}connectedCallback(){this.config={click:{targetId:this.dataset.targetId,url:this.dataset.clickUrl}},this.contentHelper=new w.t,setTimeout((()=>this._init()))}_init(){window.reloadDocument=this.reloadDocument.bind(this),window.manyNotifications=this.manyNotifications.bind(this),this._listeners(),this.documentType=this.dataset.documentType;let e="li[data-xsort-id]";this.dataset.web&&(e="li[data-xsort-id-web]"),(void 0===this.dataset.edit||this.dataset.edit)&&new os(this,{parent:"ul.xsortable",item:e,static:!0,onChange:this.changeHandler.bind(this)})}manyNotifications(e){return hi(this,void 0,void 0,(function*(){let t;for(const s of e.documents)t=yield this.notify(s).then((e=>e)),console.log(t);let s="Dokumentai nebuvo priskirti",i="error";e.deadlineAdded&&(s="Dokumentai sėkmingai priskirti",i="success"),this.notifyDialog.show({title:s,type:i},(()=>{xdialog.modal.close(),xdialog.modal.close(),window.location.href=window.location}))}))}notify(e){return new Promise(((t,s)=>{let i=e.title.substring(0,20);i.length!=e.title.length&&(i+="..."),this.notifyDialog.show({title:`Dokumentas: ${i}`,type:"warning",message:`Jau buvo priskirtas: ${e.names.join(", ")}`},(e=>{e?setTimeout((()=>{t(e)}),300):s("error")}))}))}_listeners(){this.initTree(),this.clickOnEvent||window.addEventListener("DOMContentLoaded",this.initTree.bind(this)),this._clickListener(),this._search(),this.dropDownListeners(),this.inputListeners()}inputListeners(){this.addEventListener("click",(e=>{let t=e.target.closest('input[is="checkbox-value"]');if(!t)return;let s=this,i=t.closest("div.xtree-type").nextElementSibling;i?i.querySelectorAll('input[is="checkbox-value"]').forEach((e=>{Object.is(e,t)||(e.checked=t.checked,s.dropdownClass())})):s.dropdownClass()}))}dropdownClass(){let e=this.querySelectorAll('input[is="checkbox-value"]:checked'),t=this.querySelector("div.dropdown.dropdown-primary");0!=e.length?t.classList.add(this.classes.dropdown):t.classList.remove(this.classes.dropdown)}dropDownListeners(){const e=this.querySelector("div.dropdown");if(!e)return;e.querySelectorAll("a.dropdown-item:not(.disabled)").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();const s=this.querySelectorAll("div.xtree-content input:checked");let i=new dt.y;if(s&&!s.length)return void i.show({message:"Pasirinkite nors vieną dokumentą",title:"Dėmesio",type:"info"});let a,n="",r=!1;for(let e=0;e<s.length;e++)-1!=s[e].value&&(s[e].closest("li").dataset.deadline&&(r=!0),a=s[e].value,n=n.concat(",",a));if(n=n.substring(1),n)if(r&&"/router/element_tree_document/addRule"==e.dataset.url){(new S.A).show({title:" ",text:"Esate pasirinkę failų, kurie jau turi nustatytą terminą. Ar norite jį pakeist?"},(t=>{t&&new O._(b.xw.zone+e.dataset.url,{Ids:n},{})}))}else new O._(b.xw.zone+e.dataset.url,{Ids:n},{});else i.show({message:"Aplankas tuščias. Pasirinkite aplanką, kuriame yra bent vienas dokumentas",title:"Dėmesio",type:"info"})}))}))}initTree(){const e=document.getElementById(this.config.click.targetId);e&&(this.clickOnEvent=!0,this._onClick=t=>{const s=l.check(this,"content-loaded");let i=`${this.config.click.url}${t}`;window.location.search.includes("invalid=1")&&(i=`${i}?invalid=1`),this.contentHelper.load(i,{target:e,callback:()=>{if(s&&l.dispatch(this,"content-loaded",{id:t}),"document"==this.documentType){let e={id:t,infoType:"deadlines"};window.location.search.includes("invalid=1")&&(e.invalid=1),xhelper.url.urlParams(e,!1)}if(1==window.matchMedia("(max-width:991px)").matches){let e=document.querySelector("#document-users").getBoundingClientRect().top,t=document.querySelector(".top").getBoundingClientRect().bottom+document.querySelector(".top-mega-menu-wrap").getBoundingClientRect().height,s=e+window.pageYOffset-t;window.scrollTo({top:s,behavior:"smooth"})}}})})}changeHandler({id:e,nextId:t,parentId:s}){new O._(b.xw.zone+"/router/element_tree_document/sort",{id:e,nextId:t,parentId:s,_param:this.dataset.param},{json:!0},(e=>{if(!e.success)return;(new ds.X).show({message:"Sėkmingai išsaugota",position:"top-right",type:"success"})}))}_clickListener(){const e=this.querySelectorAll("li[data-xsort-id][data-item]:not(.xlistener)");e.forEach((t=>{t.classList.add("xlistener"),t.addEventListener("click",(()=>{this._onClick&&!t.dataset.folder&&(e.forEach((e=>e.classList.remove(this.classes.active))),t.classList.add(this.classes.active),this._onClick(t.dataset.xsortId))}))}))}_search(){const e=this.querySelector("input.search-control");e&&(this.titles=this.querySelectorAll("span.xtree-node-title"),e.addEventListener("search-changed",(()=>{this.highlight(e)})),""!=e.value&&this.highlight(e))}highlight(e){const t=(e.value||"asd").toLowerCase();this.titles.forEach((e=>{let s=e.dataset.name,i=s.toLowerCase().indexOf(t);if(t&&i>=0){let a=s.substring(0,i),n=s.substring(i,i+t.length),r=s.substring(i+t.length);s=`${a}<span class='highlight'>${n}</span>${r}`,e.innerHTML=s}else e.innerHTML!==s&&(e.innerHTML=s)}))}reloadDocument(){xdialog.modal.close();let e=document.querySelector('div[is="element-tree-document"]').querySelector("li.active");e&&e.click()}}customElements.define("element-tree-document",ui,{extends:"div"});class mi extends J.Z{constructor(){super(...arguments),this.fontSizes=["sm","md","lg","xl","xxl","xxxl","xxxxl","xxxxxl"],this.handleClick=e=>{const t=e.target.closest(".xdisabled-btn");if(!t)return;const s=t.closest("div");let i,a=t.classList;switch(!0){case a.contains("font-size"):this.toggleHtmlClass("font-size",t.dataset.size);break;case a.contains("font-size-toggle"):const e=a.contains("add")?"add":"subtract";this.toggleFontSizes(e);break;case a.contains("images"):this.toggleHtmlClass("images",t.dataset.images);break;case a.contains("backgrounds"):this.toggleHtmlClass("backgrounds",t.dataset.backgrounds);break;case a.contains("link"):if(a.contains("active")&&a.contains("alone")){this.toggleHtmlClass("link","alone");break}this.toggleHtmlClass("link",t.dataset.link)}a.contains("alone")?a.contains("active")?a.remove("active"):a.add("active"):(i=s.querySelectorAll(".xdisabled-btn"),i.forEach((e=>{e.classList.remove("active")})),a.add("active"))}}_init(){this.el=this,this.el.addEventListener("click",this.handleClick),this.htmlTag=document.querySelector("html")}toggleFontSizes(e){const t=[...document.documentElement.classList].filter((e=>-1!=e.indexOf("font-size"))).toString().substr(10),s=this.fontSizes.indexOf(t);let i=s&&-1!==s?s:0;"add"===e?i++:i--,i<0&&(i=0),i>this.fontSizes.length-1&&(i=this.fontSizes.length-1),this.toggleHtmlClass("font-size",this.fontSizes[i])}toggleHtmlClass(e,t){const s=`${e}-${t}`;this.htmlTag.classList.forEach((t=>{-1!==t.indexOf(e)&&this.htmlTag.classList.remove(t)})),this.htmlTag.classList.add(s);let i=new Object;i={type:e,class:s},new O._(`${b.xw.zone}/index/disabledmode`,i,{xloadingbar:!1,json:!0},(()=>{}))}}customElements.define("element-nav-disabled",mi,{extends:"div"});class pi extends J.Z{constructor(){super(...arguments),this.statuses={online:"web-courses-user-online",away:"web-courses-user-away"}}_init(){this.statusEl=this.querySelector(".web-courses-user-status"),this.subTextEl=this.querySelector(".web-courses-user-duty")}setStatus(e){this.statusEl.classList.remove(...Object.values(this.statuses)),this.dataset.status=e,this.statuses[e]&&this.statusEl.classList.add(this.statuses[e])}getStatus(){return this.dataset.status}setSubText(e){this.subTextEl.innerText=e}}customElements.define("element-web-courses-user",pi,{extends:"div"});class vi extends HTMLDivElement{connectedCallback(){setTimeout((()=>this._init()))}_init(){this.table=this.dataset.table,this.table&&this.rowDelete()}rowDelete(){const e=this.querySelectorAll("a.xfast-links-card-link-delete");this.count=e.length;const t=this;e.forEach((e=>{e.addEventListener("click",(e=>{new O._("/router/element_widget_links_quick/delete",{table:t.table,id:e.target.dataset.id},{json:!0},(s=>{s.success&&(t.count>1?(e.target.parentElement.parentElement.remove(),t.count--):t.remove())}))}))}))}}customElements.define("widget-link-quick",vi,{extends:"div"});class gi extends cs{_init(){this.router=this.dataset.router,new os(this,{parent:"ul.xsortable",item:"li[data-xsort-id]",onChange:this.changeHandler.bind(this)})}changeHandler({id:e,nextId:t,parentId:s}){new O._(b.xw.zone+this.router+"sort",{id:e,nextId:t,parentId:s,_param:this.dataset.param},{json:!0},(e=>{if(!e.success)return;(new ds.X).show({message:"Sėkmingai išsaugota",position:"top-right",type:"success"})}))}}customElements.define("element-tree-menu-crm",gi,{extends:"div"});class fi extends HTMLDivElement{connectedCallback(){setTimeout((()=>this._init()))}_init(){this.url=this.dataset.deleteUrl,this.count=this.dataset.badgeCount,this.url&&this.rowDelete()}rowDelete(){const e=this.querySelectorAll("a.delete");this.count=e.length,e.forEach((e=>{e.addEventListener("click",(e=>{(new S.A).show({title:"Ar tikrai norite ištrinti?",text:`Šis dokumentas darbuotojui ${e.target.dataset.name} nebus rodomas priskirtų  dokumentų sąraše`},(t=>{t&&new O._(`${this.url}${e.target.dataset.id}`,{},{json:!0},(t=>{if(t.success){e.target.parentElement.parentElement.remove();let t=this.querySelector("div.card-collapse-users-title-badge");this.count=this.count-1,t.innerHTML=this.count}}))}))}))}))}}customElements.define("card-collapse-users",fi,{extends:"div"});class yi extends HTMLUListElement{connectedCallback(){setTimeout((()=>{this._init()}))}_init(){let e=this.querySelector("div.dropdown-menu a.active div");e&&(this.querySelector("a#dropdownMenuLink").textContent=e.textContent.replace(/\d+/,""))}}customElements.define("element-nav-submenu",yi,{extends:"ul"});class bi extends HTMLDivElement{constructor(){super()}connectedCallback(){setTimeout((()=>{this._init()}))}_init(){this.boards=document.querySelectorAll("div.kanban-cols"),this._listeners()}_listeners(){this._onDragOver(),this._onDragEnd(),this._onDrop()}updateModel(e,t,s){console.log(s),new a.C.post(b.xw.zone+"/router/element_kanban_sales_board/update",{id:e,stageId:t,position:s},{json:!0},(e=>{console.log(e)}))}findPositionInList(e,t){let s=e.getElementsByTagName("li");for(let e=0,i=s.length;e<i;e++)if(t.id===s[e].id)return e}_onDragOver(){for(let e=0,t=this.boards.length;e<t;e++)this.boards[e].addEventListener("dragover",(e=>{e.preventDefault()}))}_deleteAll(){this.deleteAll.addEventListener("click",(()=>{document.querySelectorAll(".kanban-card").forEach((e=>e.remove()))}))}_addButton(){this.addButton.addEventListener("click",(()=>{const e=document.forms["kanban-form"],t=new FormData(e);new a.C.post(b.xw.zone+"/router/element_kanban_sales_board/load",{title:t.get("title"),description:t.get("description")},{json:!0},(e=>{const t=ht(e.element);this.boards[0].querySelector("ul").appendChild(t)}))}))}_onDrop(){for(let e=0,t=this.boards.length;e<t;e++)this.boards[e].addEventListener("drop",(e=>{let t;try{t=JSON.parse(e.dataTransfer.getData("text"))}catch(t){const s=e.target.closest("li");return void(null!==s&&s.classList.remove("dragged-item"))}const s=t.id,i=document.getElementById(s);if(i.classList.contains("kanban-card"))if(e.target.classList.contains("kanban-cols")){const s=e.target.getElementsByTagName("ul")[0];if(s.querySelector(`li#${i.id}`)&&t.coordY-e.screenY>0)this.updateModel(parseInt(i.dataset.saleId),parseInt(s.dataset.stageId),this.findPositionInList(s,s.firstElementChild)),i.remove(),s.prepend(i),e.dataTransfer.clearData();else if(s.lastElementChild!==i){let t;i.remove(),console.log(s),console.log(s.lastElementChild),console.log(s.querySelector("li")),t=null===s.querySelector("li")?0:this.findPositionInList(s,s.lastElementChild)+1,this.updateModel(parseInt(i.dataset.saleId),parseInt(s.dataset.stageId),t),s.appendChild(i),e.dataTransfer.clearData()}}else if(e.target.closest(".kanban-card")){const s=e.target,a=s.closest("li"),n=s.closest("ul");if(i===a)return void i.classList.remove("dragged-item");null!==n&&(i.remove(),t.coordY-e.screenY>0?(this.updateModel(parseInt(i.dataset.saleId),parseInt(n.dataset.stageId),this.findPositionInList(n,a)),n.insertBefore(i,a),a.classList.remove("dragged-item"),e.dataTransfer.clearData()):(n.insertBefore(i,a),a.classList.remove("dragged-item"),this.updateModel(parseInt(i.dataset.saleId),parseInt(n.dataset.stageId),this.findPositionInList(n,a)),e.dataTransfer.clearData()))}}))}_onDragEnd(){window.addEventListener("dragend",(()=>{document.querySelectorAll("li.kanban-card div").forEach((e=>e.classList.remove("kanban-card-pointer-events")))}))}}customElements.define("element-kanban-sales-board",bi,{extends:"div"});class xi extends HTMLLIElement{constructor(){super()}connectedCallback(){setTimeout((()=>{this._init()}))}_init(){this._listeners()}_listeners(){this._dragStartlistener(),this._selfDelete(),this._onDragEnter(),this._onDragLeave()}_dragStartlistener(){this.addEventListener("dragstart",(e=>{let t={id:e.target.id,coordY:e.screenY};e.dataTransfer.setData("text/plain",JSON.stringify(t)),document.querySelectorAll("div.kanban-card-content").forEach((e=>e.classList.add("kanban-card-pointer-events")))}))}_selfDelete(){this.querySelector("button.kanban-card-delete").addEventListener("click",(e=>{e.preventDefault(),this.closest("li").remove(),new a.C.get("delete/"+this.closest("li").dataset.saleId,{},{json:!0})}))}_onDragEnter(){this.addEventListener("dragenter",(e=>{this.classList.add("dragged-item"),e.preventDefault()}))}_onDragLeave(){this.addEventListener("dragleave",(()=>{this.classList.remove("dragged-item")}))}}customElements.define("element-kanban-sales-item",xi,{extends:"li"});class ki extends HTMLDivElement{constructor(){super()}connectedCallback(){setTimeout((()=>{this._init()}))}_init(){this.addButton=document.querySelector("button#add"),this.deleteAll=document.querySelector("button#deleteAll"),this.boards=document.querySelectorAll("div.kanban-cols"),this._listeners()}_listeners(){this._onDragOver(),this._addButton(),this._deleteAll(),this._onDragEnd(),this._onDrop()}_onDragOver(){for(let e=0,t=this.boards.length;e<t;e++)this.boards[e].addEventListener("dragover",(e=>{e.preventDefault()}))}_deleteAll(){this.deleteAll.addEventListener("click",(()=>{document.querySelectorAll(".kanban-card").forEach((e=>e.remove()))}))}_addButton(){this.addButton.addEventListener("click",(()=>{const e=document.forms["kanban-form"],t=new FormData(e);new a.C.post(b.xw.zone+"/router/element_kanban_simple_board/load",{title:t.get("title"),description:t.get("description")},{json:!0},(e=>{const t=ht(e.element);this.boards[0].querySelector("ul").appendChild(t)}))}))}_onDrop(){for(let e=0,t=this.boards.length;e<t;e++)this.boards[e].addEventListener("drop",(e=>{let t;try{t=JSON.parse(e.dataTransfer.getData("text"))}catch(t){const s=e.target.closest("li");return void(null!==s&&(s.style.borderTop=null,s.style.opacity=null))}const s=t.id,i=document.getElementById(s);if(i.classList.contains("kanban-card"))if(e.target.classList.contains("kanban-cols")){const s=e.target.getElementsByTagName("ul")[0];s.querySelector(`li#${i.id}`)&&t.coordY-e.screenY>0?(i.remove(),s.prepend(i),e.dataTransfer.clearData()):(i.remove(),s.appendChild(i),e.dataTransfer.clearData())}else if(e.target.closest(".kanban-card")){const s=e.target,a=s.closest("li"),n=s.closest("ul");if(i===a)return i.style.borderTop=null,void(i.style.opacity=null);null!==n&&(i.remove(),t.coordY,e.screenY,n.insertBefore(i,a),a.style.borderTop=null,a.style.opacity=null,e.dataTransfer.clearData())}}))}_onDragEnd(){window.addEventListener("dragend",(()=>{document.querySelectorAll("li.kanban-card div").forEach((e=>e.classList.remove("pointer-events")))}))}}customElements.define("element-kanban-simple-board",ki,{extends:"div"});class _i extends HTMLLIElement{constructor(){super()}connectedCallback(){setTimeout((()=>{this._init()}))}_init(){this._listeners()}_listeners(){this._dragStartlistener(),this._selfDelete(),this._onDragEnter(),this._onDragLeave()}_dragStartlistener(){this.addEventListener("dragstart",(e=>{let t={id:e.target.id,coordY:e.screenY};e.dataTransfer.setData("text/plain",JSON.stringify(t))}))}_selfDelete(){this.querySelector("button#del-button").addEventListener("click",(()=>{this.closest("li").remove()}))}_onDragEnter(){this.addEventListener("dragenter",(e=>{this.style.borderTop="solid black 2px",this.style.opacity="0.5",this.querySelector("div").classList.add("pointer-events"),e.preventDefault()}))}_onDragLeave(){this.addEventListener("dragleave",(()=>{this.style.borderTop=null,this.style.opacity=null}))}}customElements.define("element-kanban-simple-item",_i,{extends:"li"});class Li extends HTMLDivElement{constructor(){super()}connectedCallback(){setTimeout((()=>{this._init()}))}_init(){this.boards=document.querySelectorAll("div.kanban-cols"),this._listeners()}_listeners(){this._onDragOver(),this._onDragEnd(),this._onDrop()}updateModel(e,t,s){console.log(s),new a.C.post(b.xw.zone+"/router/element_kanban_tasks_board/update",{id:e,stageId:t,position:s},{json:!0},(e=>{console.log(e)}))}findPositionInList(e,t){let s=e.getElementsByTagName("li");for(let e=0,i=s.length;e<i;e++)if(t.id===s[e].id)return e}_onDragOver(){for(let e=0,t=this.boards.length;e<t;e++)this.boards[e].addEventListener("dragover",(e=>{e.preventDefault()}))}_deleteAll(){this.deleteAll.addEventListener("click",(()=>{document.querySelectorAll(".kanban-card").forEach((e=>e.remove()))}))}_addButton(){this.addButton.addEventListener("click",(()=>{const e=document.forms["kanban-form"],t=new FormData(e);new a.C.post(b.xw.zone+"/router/element_kanban_tasks_board/load",{title:t.get("title"),description:t.get("description")},{json:!0},(e=>{const t=ht(e.element);this.boards[0].querySelector("ul").appendChild(t)}))}))}_onDrop(){for(let e=0,t=this.boards.length;e<t;e++)this.boards[e].addEventListener("drop",(e=>{let t;try{t=JSON.parse(e.dataTransfer.getData("text"))}catch(t){const s=e.target.closest("li");return void(null!==s&&s.classList.remove("dragged-item"))}const s=t.id,i=document.getElementById(s);if(i.classList.contains("kanban-card"))if(e.target.classList.contains("kanban-cols")){const s=e.target.getElementsByTagName("ul")[0];if(s.querySelector(`li#${i.id}`)&&t.coordY-e.screenY>0)this.updateModel(parseInt(i.dataset.saleId),parseInt(s.dataset.stageId),this.findPositionInList(s,s.firstElementChild)),i.remove(),s.prepend(i),e.dataTransfer.clearData();else if(s.lastElementChild!==i){let t;i.remove(),console.log(s),console.log(s.lastElementChild),console.log(s.querySelector("li")),t=null===s.querySelector("li")?0:this.findPositionInList(s,s.lastElementChild)+1,this.updateModel(parseInt(i.dataset.saleId),parseInt(s.dataset.stageId),t),s.appendChild(i),e.dataTransfer.clearData()}}else if(e.target.closest(".kanban-card")){const s=e.target,a=s.closest("li"),n=s.closest("ul");if(i===a)return void i.classList.remove("dragged-item");null!==n&&(i.remove(),t.coordY-e.screenY>0?(this.updateModel(parseInt(i.dataset.saleId),parseInt(n.dataset.stageId),this.findPositionInList(n,a)),n.insertBefore(i,a),a.classList.remove("dragged-item"),e.dataTransfer.clearData()):(n.insertBefore(i,a),a.classList.remove("dragged-item"),this.updateModel(parseInt(i.dataset.saleId),parseInt(n.dataset.stageId),this.findPositionInList(n,a)),e.dataTransfer.clearData()))}}))}_onDragEnd(){window.addEventListener("dragend",(()=>{document.querySelectorAll("li.kanban-card div").forEach((e=>e.classList.remove("kanban-card-pointer-events")))}))}}customElements.define("element-kanban-tasks-board",Li,{extends:"div"});class Ei extends HTMLLIElement{constructor(){super()}connectedCallback(){setTimeout((()=>{this._init()}))}_init(){this._listeners()}_listeners(){this._dragStartlistener(),this._selfDelete(),this._onDragEnter(),this._onDragLeave()}_dragStartlistener(){this.addEventListener("dragstart",(e=>{let t={id:e.target.id,coordY:e.screenY};e.dataTransfer.setData("text/plain",JSON.stringify(t)),document.querySelectorAll("div.kanban-card-content").forEach((e=>e.classList.add("kanban-card-pointer-events")))}))}_selfDelete(){this.querySelector("button.kanban-card-delete").addEventListener("click",(e=>{e.preventDefault(),this.closest("li").remove(),new a.C.get("delete/"+this.closest("li").dataset.saleId,{},{json:!0})}))}_onDragEnter(){this.addEventListener("dragenter",(e=>{this.classList.add("dragged-item"),e.preventDefault()}))}_onDragLeave(){this.addEventListener("dragleave",(()=>{this.classList.remove("dragged-item")}))}}customElements.define("element-kanban-tasks-item",Ei,{extends:"li"});class wi extends HTMLDivElement{constructor(){super(...arguments),this.isCrop=!1,this.closeModal=e=>{"Escape"===e.key&&(this.modal.modal("hide"),window.removeEventListener("keydown",this.closeModal))},this.onClickExpand=e=>{this.list.classList.toggle("gallery-modal-list--expanded")},this.onClickControl=e=>{let t=e.target.closest(".gallery-modal-arrow");if(!t||this.contentIsLoading)return;const s=t.classList;switch(!0){case s.contains("gallery-modal-next"):this.goToDoc(this.nextItemId);break;case s.contains("gallery-modal-prev"):this.goToDoc(this.prevItemId)}},this.onClickItem=e=>{let t=e.target.closest(".gallery-modal-item");if(!t)return;e.preventDefault();const s=parseInt(t.dataset.pk);this.goToDoc(s)},this.OnArrowPress=({key:e})=>{switch(e){case"ArrowRight":this.goToDoc(this.nextItemId);break;case"ArrowLeft":this.goToDoc(this.prevItemId)}this.modal.on("hide.bs.modal",(()=>document.removeEventListener("keydown",this.OnArrowPress)))}}connectedCallback(){setTimeout((()=>this._init()))}_init(){this.list=this.querySelector("div.gallery-modal-list"),this.controls=this.querySelector("div.gallery-modal-controls"),this.content=this.querySelector("div.gallery-modal-content"),this.controllerUrl=this.dataset.controllerUrl,this.refKey=this.dataset.refKey,this.refVal=this.dataset.refVal,this.actions=this.querySelector(".gallery-modal-actions"),new Si(this),this.list&&this.list.children.length>1&&(this.listContent=this.list.querySelector("div.gallery-modal-list-content"),this.expandListBtn=this.list.querySelector(".gallery-modal-list-anchor"),this.expandListBtn.addEventListener("click",this.onClickExpand),this.list.addEventListener("click",this.onClickItem),this.controls.addEventListener("click",this.onClickControl),new Ci(this));const e=this.closest(".modal");e&&(this.modal=$(e),window.addEventListener("keydown",this.closeModal));let t=new Event("pantera:gallery");document.dispatchEvent(t),document.addEventListener("keydown",this.OnArrowPress)}goToDoc(e){const{refKey:t,refVal:s}=this;this.contentIsLoading=!0;let i=this.isCrop?"crop":"getItem",n=`${this.controllerUrl}/${i}/${t}/${s}/${e}`;console.log(n),new a.C.get(n,{},{},(e=>{this.contentIsLoading=!1,this.content.innerHTML=e,!this.isCrop&&this.setActiveListItem()}))}setActiveListItem(){const e=this.shownItem.dataset.pk;this.listContent&&this.listContent.children&&[].slice.call(this.listContent.children).map((t=>{if(t.classList.remove("active"),t.dataset.pk===e){t.getBoundingClientRect();this.list.classList.contains("gallery-modal-list--expanded")&&this.list.classList.remove("gallery-modal-list--expanded");const e=t.getBoundingClientRect();(e.x<0||e.x>t.offsetParent.offsetWidth)&&(t.offsetParent.scrollLeft=e.left),t.classList.add("active")}}))}get shownItem(){return this.content.querySelector("[data-pk]")}get activeListItem(){return this.list.querySelector(".gallery-modal-item.active")}get allListItems(){return[].slice.call(this.list.querySelectorAll(".gallery-modal-item"))}get nextItemId(){const{allListItems:e}=this;let t=e[0];return e.map(((s,i)=>{let a=e[i+1];a&&s.classList.contains("active")&&(t=a)})),t.dataset.pk}get prevItemId(){const{allListItems:e}=this;let t=e[e.length-1];return e.map(((s,i)=>{if(0===i)return;let a=e[i-1];a&&s.classList.contains("active")&&(t=a)})),t.dataset.pk}get zoomer(){return function(e){return new qi(e)}(this.content.querySelector("img.gallery-modal-image"))}}class Si{constructor(e){this.zoom=1,this.gallery=e,this.zoomIn=this.gallery.actions.querySelector("a.gallery-modal-zoomin"),this.zoomOut=this.gallery.actions.querySelector("a.gallery-modal-zoomout"),this.zoomIn.addEventListener("click",this.onClickZoomIn.bind(this)),this.zoomOut.addEventListener("click",this.onClickZoomOut.bind(this)),this.crop=this.gallery.actions.querySelector("a.gallery-modal-crop-btn");const t=this.gallery.querySelectorAll("a.btn-crop");for(const e of t)e.addEventListener("click",this.onToggleCrop.bind(this))}onToggleCrop({target:e}){let t={};try{t=JSON.parse(e.dataset.cropData||"{}")}catch(e){console.warn(e)}this.gallery.isCrop=!this.gallery.isCrop;const s=parseInt(this.gallery.shownItem.dataset.pk);if(this.gallery.classList.toggle("gallery-modal-crop"),this.crop.classList.toggle("active"),this.gallery.closeModal({key:"Escape"}),this.gallery.dataset.input){let e=document.querySelector("input[name="+this.gallery.dataset.input+"]");new ft(s,e)}else new ft(s,null,t)}onClickZoomIn(){this.zoom++,this.gallery.zoomer.zoomIn(this.zoom)}onClickZoomOut(){this.zoom--,this.gallery.zoomer.zoomIn(this.zoom)}}class qi{constructor(e){return this.zoomStep=.1,this.params={scale:1,translateX:0,translateY:0},this.image=e,this}zoomIn(e){return this.params.scale+=this.zoomStep*(e||1),this.initParams(),this}translateX(e){return this.params.translateX=e,this.initParams(),this}translateY(e){return this.params.translateY=e,this.initParams(),this}initParams(){let e=Object.keys(this.params).reduce(((e,t)=>e+`${t}(${this.params[t]}${"scale"==t?"":"px"}) `),"");console.log(e),this.image.style.transform=e}}class Ci{constructor(e){this.triggerWidth=200,this.onMouseDown=e=>{e.target.closest("img.gallery-modal-image")&&(this.mousePosStart=e.clientX,document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp))},this.onMouseMove=e=>{let t=e.clientX-this.mousePosStart;this.deltaMouseMove=t,this.gallery.content.style.transform=`translateX(${t}px)`},this.onMouseUp=()=>{document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp),this.deltaMouseMove>this.triggerWidth?this.gallery.goToDoc(this.gallery.prevItemId):this.deltaMouseMove<-1*this.triggerWidth&&this.gallery.goToDoc(this.gallery.nextItemId),this.deltaMouseMove=this.mousePosStart=void 0,this.gallery.content.style.transform=""},this.gallery=e,this.gallery.content.addEventListener("mousedown",this.onMouseDown)}}customElements.define("element-media-gallery-modal",wi,{extends:"div"});var Ti=s(2431);class Ai extends HTMLFormElement{constructor(){super(...arguments),this.onSubmit=e=>{if(e.preventDefault(),!this.fileQueue.length)return;let t=e=>new Promise(((s,i)=>{0==this.fileQueue.length&&(new O._(this.explorerEl.controllerUrl+"/uploadFileDone",{path:this.folderPath},{json:!0},(e=>{const t=this.explorerEl.querySelector(`a[href="${this.folderPath}"]`).closest("li.media-explorer-list-item");let s=t.querySelector("ul.media-explorer-list");if(!s){let e=document.createElement("ul");t.append(e),s=e}s.outerHTML=e,this.modal.modal("hide")})),s());const a=this.filesWrap.querySelector("div.dropzone-item:not(.complete)");a.classList.add("loading");const n=a.querySelector(".loadingbar-progress");new Ti.b(this.explorerEl.controllerUrl+"/uploadFile",e,{path:this.folderPath,user:this.explorerEl.userId},(({type:e,progress:r,success:l,message:o})=>{switch(e){case"progress":n.style.width=`${r}%`;break;case"complete":l?(this.fileQueue.splice(0,1),a.classList.add("complete"),s(t(this.fileQueue[0]))):i(o)}}))}));t(this.fileQueue[0])},this.onChangeFiles=e=>{const t=e.currentTarget;this.fileQueue=[...this.fileQueue,...t.files];const s=Ii.renderItemList(this.fileQueue);this.filesWrap.innerHTML=s,this.fileInput.value="",this.updateCount()},this.onItemRemove=e=>{const t=e.target.closest("a.dropzone-item-remove");if(!t)return;const s=t.closest("div.dropzone-item").dataset.pk;this.fileQueue.splice(+s,1);const i=Ii.renderItemList(this.fileQueue);this.filesWrap.innerHTML=i,this.fileInput.value="",this.updateCount()}}connectedCallback(){setTimeout((()=>this._init()))}_init(){this.fileQueue=[],this.fileInput=this.querySelector('input[type="file"]'),this.filesWrap=this.querySelector("div.media-explorer-files"),this.submitButton=this.querySelector("button.media-explorer-upload-btn"),this.counter=this.submitButton.querySelector("span.media-explorer-upload-count"),this.explorerEl=document.getElementById(this.dataset.explorerId),this.folderPath=this.dataset.path,this.modal=$(this.closest("div.modal")),this.addEventListener("submit",this.onSubmit),this.fileInput.addEventListener("change",this.onChangeFiles),this.filesWrap.addEventListener("click",this.onItemRemove)}updateCount(){const e=this.fileQueue.length,t=`<span class="chip chip-secondary">${e}</span>`;this.counter.innerHTML=e>0?t:"",this.submitButton.disabled=!e}}class Ii{static renderItemList(e){return e.reduce(((e,t,s)=>{const{name:i,size:a}=t,n={label:i,size:a,subtype:Ii.subtype(i),pk:s};return e+Ii.itemTpl("item",n)}),"")}static itemTpl(e,t){let s="";const i={preview:"fas fa-search",download:"fas fa-download",edit:"fas fa-edit",crop:"fas fa-crop",remove:"far fa-trash-alt",image:"far fa-image",word:"far fa-file-word",excel:"far fa-file-excel",powerpoint:"far fa-file-powerpoint",zip:"far fa-file-archive",pdf:"far fa-file-pdf"};switch(e){case"progress":s='\n\t\t\t\t\t<label class="dropzone-add dropzone-progress-item d-none">\n\t\t\t\t\t\t<div class="dropzone-add-content">\n\t\t\t\t\t\t\t<div class="xprogress-backdrop">\n\t\t\t\t\t\t\t\t<div class="xprogress-container">\n\t\t\t\t\t\t\t\t\t<div class="lds-roller">\n\t\t\t\t\t\t\t\t\t\t<div></div>\n\t\t\t\t\t\t\t\t\t\t<div></div>\n\t\t\t\t\t\t\t\t\t\t<div></div>\n\t\t\t\t\t\t\t\t\t\t<div></div>\n\t\t\t\t\t\t\t\t\t\t<div></div>\n\t\t\t\t\t\t\t\t\t\t<div></div>\n\t\t\t\t\t\t\t\t\t\t<div></div>\n\t\t\t\t\t\t\t\t\t\t<div></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</label>\n\t\t\t\t';break;case"item":s=`\n\t\t\t\t<div class="dropzone-col">\n\t\t\t\t\t<div class="dropzone-item dropzone-item-${t.subtype}" data-pk="${t.pk}">\n\n\t\t\t\t\t\t<a href="javascript:;" class="dropzone-item-thumbnail">\n\t\t\t\t\t\t\t<span class="dropzone-item-thumbnail-icon">\n\t\t\t\t\t\t\t\t<i class="${i[t.subtype]}"></i>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<div class="dropzone-item-meta">\n\t\t\t\t\t\t\t<div class="loadingbar">\n\t\t\t\t\t\t\t\t<div class="loadingbar-progress"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="dropzone-item-data">\n\t\t\t\t\t\t\t\t<div class="dropzone-item-text">\n\t\t\t\t\t\t\t\t\t<div class="dropzone-item-icon">\n\t\t\t\t\t\t\t\t\t\t<i class="${i[t.subtype]}"></i>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span class="dropzone-item-label">\n\t\t\t\t\t\t\t\t\t\t${t.label}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class="dropzone-item-size">\n\t\t\t\t\t\t\t\t\t\t(${Ii.humanFileSize(t.size)})\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="dropzone-item-action-wrap">\n\t\t\t\t\t\t\t\t<a href="javascript:;" class="dropzone-item-action dropzone-item-remove"> \n\t\t\t\t\t\t\t\t\t<i class="far fa-trash-alt"></i>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t`}return s}static subtype(e){return"doc"===e||"docx"===e?"word":"xls"===e||"xlsx"===e?"excel":"pdf"===e?"pdf":"image"}static humanFileSize(e,t=!1,s=1){const i=t?1e3:1024;if(Math.abs(e)<i)return`${e} B`;const a=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];let n=-1;const r=Math.pow(10,s);do{e/=i,++n}while(Math.round(Math.abs(e)*r)/r>=i&&n<a.length-1);return`${e.toFixed(s)} ${a[n]}`}}customElements.define("element-media-explorer-upload",Ai,{extends:"form"});class Di extends J.Z{constructor(){super(...arguments),this.publicPath="/upload/media",this.btnSortStage=0,this.nextSort="asc",this.onSearch=()=>{[...this.querySelectorAll("a.media-explorer-link")].forEach((e=>{e.closest(".media-explorer-link-wrap").classList.remove("folder-open","link-highlight"),this.searchInput.value&&-1!==e.innerHTML.indexOf(this.searchInput.value)&&$i.traverseOpen(e)}))},this.onClickFolder=e=>{let t=e.target,s=t.closest('.media-explorer-link[data-file-type="folder"]'),i=t.closest(".media-explorer-chevron"),a=s||i;a&&(e.preventDefault(),a.closest(".media-explorer-link-wrap").classList.toggle("folder-open"))},this.onClickFile=e=>{const t=e.target.closest('a[data-file-type="file"]');if(!t)return;e.preventDefault();let s=t.dataset.id;new ot.z("UserId",parseInt(this.userId),s)},this.onClickAction=e=>{const t=e.target.closest("[data-action]");if(!t)return;e.preventDefault();const s=t.dataset.action,i=this.actions[s];i&&i(t)},this.onMouseDownLink=e=>{let t,s=e.target.closest('a.media-explorer-link[data-file-type="file"]');if(this.popper instanceof $t.default&&(this.popper.destroy(),this.popper=void 0),!s)return;e.preventDefault(),document.body.classList.add("media-explorer--dragging");const i=e=>{document.body.classList.remove("media-explorer--dragging"),document.removeEventListener("mousemove",t),this.dragItem.innerHTML="";const a=e.target,n=a.closest("div.tox.tox-tinymce"),r=a.closest("div.dropzone");if(document.removeEventListener("mouseup",i),r&&r.upload.one(s.dataset.id,!1),!n)return;if("folder"==s.dataset.type)return;const l=n.previousElementSibling,o=window.tinyMCE.editors[l.id],d=s.getAttribute("href"),c=$i.getFileType(d);"audio"==c?o.insertContent('<iframe height="50" width="300" src="'+d.replace("/upload","/upload/player")+'"></iframe>'):"video"==c?o.insertContent('<iframe height="315" width="560" src="'+d.replace("/upload","/upload/player")+'"></iframe>'):"image"==c?ps().fire({title:"Nuotraukos įterpimas",text:"Kokiu būdu norite įterpti nuotrauką į turinį?",icon:"question",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Nuotrauka",denyButtonText:"Nuoroda",cancelButtonText:"Atšaukti"}).then((({isConfirmed:e,isDenied:t})=>{(e||t)&&(e?o.insertContent(`<img src="${d}"/>`):t&&this.insertAnchor(s,o))})):this.insertAnchor(s,o)};document.addEventListener("mouseup",i),this.dragItem.innerHTML=s.innerHTML;const{clientX:a,clientY:n}=e;let r={pageX:a,pageY:n+20};const l={getBoundingClientRect:()=>({top:r.pageY,right:r.pageX,bottom:r.pageY,left:r.pageX,width:0,height:0}),clientWidth:0,clientHeight:0};setTimeout((()=>{document.body.classList.contains("media-explorer--dragging")?this.popper=new $t.default(l,this.dragItem,{onCreate:({instance:e})=>{t=({clientX:t,clientY:s})=>{r={pageX:t,pageY:+s+20},e.scheduleUpdate()},document.addEventListener("mousemove",t)},positionFixed:!0}):e.preventDefault()}),300)},this.onBtnSort=e=>{new a.C.post(this.controllerUrl+"/sort",{_dataset:this.btnSort.dataset.dataset,sort:this.nextSort},{},(e=>{if(e.success)switch(this.body.innerHTML=e.content,this.btnSortStage){case 0:this.nextSort="desc",this.btnSortStage=1,this.btnSort.innerHTML='<i class="fas fa-sort-alpha-down"></i>';break;case 1:this.nextSort="",this.btnSortStage=2,this.btnSort.innerHTML='<i class="fas fa-sort-alpha-down-alt"></i>';break;case 2:this.nextSort="asc",this.btnSortStage=0,this.btnSort.innerHTML='<i class="fas fa-sort"></i>'}}))}}_init(){"false"!==this.dataset.userSpecific?(this.publicPath+="/user/"+this.dataset.userSpecific,this.userId=this.dataset.userSpecific):(this.publicPath+="/user/1",this.userId="1"),this.dragItem=document.createElement("div"),this.dragItem.classList.add("media-explorer-drag-item"),document.body.appendChild(this.dragItem),this.controllerUrl=this.dataset.controllerUrl,this.actions=new $i(this),this.templates=Mi,this.searchInput=this.querySelector(".media-explorer-search input"),this.searchInput.addEventListener("search-changed",(0,f.Z)(this.onSearch,500)),this.addEventListener("click",this.onClickFolder),this.addEventListener("click",this.onClickFile),this.addEventListener("click",this.onClickAction),this.addEventListener("mousedown",this.onMouseDownLink),this.ddMenuHover(),this.folderInputMask(),this.preventSubmit(),this.body=this.querySelector(".media-explorer-body"),this.btnSort=this.querySelector(".media-explorer-btn-sort"),this.btnSort.addEventListener("click",this.onBtnSort)}toggle(){this.classList.toggle("d-none")}insertAnchor(e,t){let s={url:e.getAttribute("href"),text:e.innerHTML,target:"_blank"};ps().fire({title:"Nuoroda",text:"Įrašykite nuorodos tekstą",input:"text",showCancelButton:!0,confirmButtonText:"Įterpti",cancelButtonText:"Atšaukti"}).then((({isConfirmed:e,value:i})=>{i&&(s.text=i),e&&t.insertContent((({url:e,text:t,target:s})=>`\n\t\t\t\t\t<a href="${e}" target="${s}">${t}</a>\n\t\t\t\t`)(s))}))}preventSubmit(){const e=t=>{t.preventDefault(),t.currentTarget.removeEventListener("submit",e)};this.addEventListener("focus",(()=>{this.closest("form").addEventListener("submit",e)}))}ddMenuHover(){this.addEventListener("mouseenter",(({target:e})=>{let t=e.closest("li.media-explorer-list-item");if(!t)return;let s=t.querySelector("div.dropdown-menu");s&&t.addEventListener("mouseleave",(()=>{s.classList.remove("show")}),{once:!0})}),!0)}folderInputMask(){this.addEventListener("keydown",(e=>{const{target:t,key:s}=e;["media-explorer-link","media-explorer-new"].filter((e=>t.classList.contains(e)))&&["\\","/",":","*","?",'"',"<",">","|"].includes(s)&&e.preventDefault()}))}get root(){let e;return this.rootEl&&this.rootEl.parentElement?e=this.rootEl:(e=this.querySelector("ul.media-explorer-list"),this.rootEl=e),e}}class $i{constructor(e){return this.explorer=e,this.add_folder=e=>{this.addItemCache&&this.addItemCache.remove();let t,s,{listItem:i,linkWrap:a,link:n}=$i.getListItemFromChild(e);i?(t=i.querySelector("ul.media-explorer-list"),t||(t=Mi.newList(),i.appendChild(t)),a.classList.add("folder-open"),s=n.getAttribute("href")):(t=this.explorer.root,s=this.explorer.publicPath);let r=Mi.newItem();t.prepend(r),this.addItemCache=r;let l=r.querySelector("input"),o=r.querySelector("a.btn-add-folder");l&&(l.focus(),l.addEventListener("keydown",(e=>{13==e.which&&e.stopPropagation()})),l.addEventListener("keyup",(e=>{if(13!==e.which)return;e.preventDefault(),e.stopPropagation();let i=e.currentTarget.value;i&&e.currentTarget.value.replace(/\s/g,"").length&&this.create_folder(s,t,i)})),o.addEventListener("click",(e=>{e.preventDefault(),l.value.replace(/\s/g,"").length&&this.create_folder(s,t,l.value)})))},this.rename_folder=e=>{const{link:t}=$i.getListItemFromChild(e),s=this.explorer.controllerUrl+"/renameFolder",i=t.innerHTML,a=()=>{t.innerHTML=i,t.removeAttribute("contenteditable")};t.setAttribute("contenteditable","true"),t.focus(),$i.selectText(t),t.addEventListener("keydown",(e=>{if(13==e.which){e.preventDefault();let i=t.innerHTML,n=t.getAttribute("href");new Promise(((e,t)=>{new O._(s,{name:i,path:n},{json:!0},(s=>{s.success?e(!0):t({title:"Klaida",message:"Operacija nepavyko"})}))})).then((()=>{t.removeAttribute("contenteditable"),t.removeEventListener("blur",a)})).catch((e=>{a(),t.removeEventListener("blur",a),(new dt.y).show(e)}))}27==e.which&&a()})),t.addEventListener("blur",a)},this.remove_folder=(e,t="/removeFolder")=>{const s=new S.A,{link:i,parent:a}=$i.getListItemFromChild(e);s.show({title:"Ar tikrai norite ištrinti?",text:i.innerText},(e=>{if(e){let e=i.getAttribute("href");if(!e)return void console.error("Nerastas path");let s=$i.getPathObj(e);const{path:n,name:r}=s;new O._(this.explorer.controllerUrl+t,{path:n,name:r,userId:this.explorer.dataset.userSpecific},{json:!0},(e=>{if("object"==typeof e){if(void 0===e.success)console.error(e);else if(!1===e.success){const{message:t,title:s}=e;(new S.A).show({title:s,text:t,icon:"error"},(e=>{e&&new O._(this.explorer.controllerUrl+"/removeFolder",{path:n,name:r,recursive:!0},{json:!0},(e=>{a.outerHTML=e}))}))}}else a.outerHTML=e}))}}))},this.remove_file=e=>{this.remove_folder(e,"/removeFile")},this.upload=e=>{const{path:t}=$i.getListItemDataFromChild(e),{path:s,name:i}=$i.getPathObj(t),a=this.explorer.id;new O._(this.explorer.controllerUrl+"/uploadModal",{path:s,name:i,explorerId:a})},this.replace_file=e=>{const{path:t}=$i.getListItemDataFromChild(e),{path:s,name:i}=$i.getPathObj(t);new O._(this.explorer.controllerUrl+"/replaceFileForm",{path:s,name:i,userId:this.explorer.dataset.userSpecific},{json:!0},(e=>{}))},this}create_folder(e,t,s){new O._(this.explorer.controllerUrl+"/addFolder",{path:e,userId:this.explorer.dataset.userSpecific,name:s},{json:!0},(e=>{("object"!=typeof e||e.success)&&"string"==typeof e&&(t.outerHTML=e,this.addItemCache=void 0)}))}remove_item(e){let t=e.closest("li.media-explorer-list-item");t&&t.remove()}static traverseOpen(e){const t=e.closest(".media-explorer-link-wrap"),{parent:s}=$i.getListItemFromChild(e),i=s.previousElementSibling;if(t.classList.add("link-highlight"),!i)return;i.classList.add("folder-open","link-highlight");const a=i.querySelector("a.media-explorer-link");"folder"==a.dataset.fileType&&$i.traverseOpen(a)}static getPathObj(e){let t,s=e.split("/"),i=s.pop(),a=s.join("/"),n=i.split(".");return n&&(t=n.pop()),{name:i,path:a,ext:t}}static getFileType(e){let t;const{ext:s}=$i.getPathObj(e);switch(!0){case["mp3","wav","ogg"].includes(s):t="audio";break;case["ai","bmp","gif","ico","jpeg","jpg","png","ps","psd","svg","tif","tiff"].includes(s):t="image";break;case["flv","h264","mp4"].includes(s):t="video"}return t}static getListItemFromChild(e){let t={listItem:void 0,link:void 0,linkWrap:void 0,parent:void 0};return t.listItem=e.closest("li.media-explorer-list-item"),t.listItem?(t.link=t.listItem.querySelector("a.media-explorer-link"),t.linkWrap=t.listItem.querySelector("div.media-explorer-link-wrap"),t.parent=t.listItem.closest("ul.media-explorer-list"),t):t}static getListItemDataFromChild(e){const{link:t}=$i.getListItemFromChild(e);return{type:t.dataset.type,path:t.getAttribute("href")}}static selectText(e){if(document.body.createTextRange){const t=document.body.createTextRange();t.moveToElementText(e),t.select()}else if(window.getSelection){const t=window.getSelection(),s=document.createRange();s.selectNodeContents(e),t.removeAllRanges(),t.addRange(s)}else console.warn("Could not select text in node: Unsupported browser.")}}class Mi{static newItem(){return Mi.render('\n\t\t\t\t<div class="input-group input-group-sm">\n\t\t\t\t\t<input class="media-explorer-new form-control">\n\t\t\t\t\t<div class="input-group-append">\n\t\t\t\t\t\t<a href="javascript:;" class="btn btn-outlined btn-success btn-add-folder">\n\t\t\t\t\t\t\t<i class="fas fa-fw fa-check"></i>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<a href="javascript:;" class="btn btn-outlined btn-primary" data-action="remove_item">\n\t\t\t\t\t\t\t<i class="fas fa-fw fa-times"></i>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t')}static newList(){let e=document.createElement("ul");return e.classList.add("media-explorer-list","media-explorer-list-sub"),e}static render(e,t){if(!e)return void console.error("nepaduotas template stringas");let s=document.createElement("li");return s.classList.add("media-explorer-list-item"),s.innerHTML=e,t?s.firstElementChild:s}}customElements.define("element-media-explorer",Di,{extends:"div"});class ji extends J.Z{_init(){this.setCircle($(this),this.dataset.percent)}setCircle(e,t){let s=parseInt(t)||0,i=e.find(`#${this.id}-bar`),a=i.attr("r"),n=Math.PI*a*2;s<0&&(s=0),s>100&&(s=100);let r=(100-s)*n/100;e.attr("data-value")||(i.css({strokeDashoffset:-n}),e.attr("data-value",0)),i.animate({strokeDashoffset:-r},{duration:1e3,step:function(t,s){let i=Math.round(100*(1+t/n));e.attr("data-value",i)}}),e.attr("data-value",s)}}customElements.define("element-xpercent-circle",ji,{extends:"div"});class Bi extends J.Z{connectedCallback(){this.addEventListener("pantera:rendered",this._init.bind(this))}_init(){this.calendarTop=this.querySelector("div.vacations-top"),this.yearInput=this.calendarTop.querySelector('input[is="picker-date-year"]'),this.zoom=this.calendarTop.querySelector("input[type=range]"),this.content=this.querySelector("div.vacations-content"),this.yearInput.addEventListener("pantera:change",(0,f.Z)((()=>{this.year=parseInt(this.yearInput.value),d.X.url.update(this.yearInput.name,this.year,!0)}),300,!0)),this.onClickBtns(),this.onZoomChange(),new Hi(this),this.initScrollbar();const e=document.body.querySelector("div.layout-content div.top");new Oi({elWrap:this.content.querySelector(".vacations-headers-grid"),elSticky:this.content.querySelector(".vacations-headers-grid .col.overflow-hidden"),offset:{y:e},onStickyClassList:["pull-down"]})}initScrollbar(){const e=this.querySelector("div.vacations-users-grid div.col.overflow-hidden"),t=this.querySelector("div.vacations-summary-grid div.col.overflow-hidden"),s=this.querySelector("div.vacations-headers-grid div.col.overflow-hidden");new Ni(this,[e,t,s])}onClickBtns(){this.dateBtns=[...this.calendarTop.children].filter((e=>e.classList.contains("vacations-btn"))),this.calendarTop.addEventListener("click",(e=>{const t=e.target.closest("a.vacations-btn");if(t)switch(e.preventDefault(),!0){case t.classList.contains("vacations-next"):this.year++;break;case t.classList.contains("vacations-prev"):this.year--}}))}onZoomChange(){const e=e=>Math.floor(11+11*e/100);this.zoom.addEventListener("mousedown",(()=>{const t=()=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",t),this.content.style.fontSize=`${e(this.zoom.value)}px`;const i=new Event("zoom:done");this.dispatchEvent(i)},s=()=>{this.content.style.fontSize=`${e(this.zoom.value)}px`};document.addEventListener("mouseup",t),document.addEventListener("mousemove",s)}))}get year(){return+this.yearInput.value}set year(e){+this.yearInput.value!==e&&(this.yearInput.value=`${e}`)}}class Hi{constructor(e){this.filterWrap=e.querySelector("div.module-top-filter-card"),this.filterInputs=[...this.filterWrap.querySelectorAll("input")],this.btnFilterCommit=this.filterWrap.querySelector(".courses-filter-commit"),this.btnFilterClear=this.filterWrap.querySelector(".courses-filter-clear"),this.btnFilterClear.addEventListener("click",(()=>{this.filterWrap.querySelectorAll(".xselect-display-text").forEach((e=>{e.innerText=""})),this.filterInputs.forEach((e=>{e.clear&&e.clear()})),this.load({})})),this.btnFilterCommit.addEventListener("click",(()=>{let e={};this.filterInputs.forEach((t=>{t.name&&t.value&&(e[t.name]=t.value)})),this.load(e)}))}load(e){d.X.url.urlParams(e,!0),window.location.reload()}}class Ni{constructor(e,t){this.calendar=e,this.viewports=t,this.wrap=this.calendar.querySelector(".vacations-scroll-wrap"),this.track=this.wrap.querySelector(".vacations-scroll"),this.bar=this.track.querySelector(".vacations-scroll-bar"),this.bar.style.width=`${t[0].scrollWidth}px`,new Oi({elWrap:this.wrap,elSticky:this.track,stickTo:"bottom",offset:{y:8},onStickyClassList:["pull-up"],extraListeners:{"zoom:done":this.calendar}}),this.track.addEventListener("scroll",(()=>{this.viewports.map((e=>e.scrollLeft=this.track.scrollLeft))})),window.addEventListener("resize",(()=>{this.bar.style.width=`${t[0].scrollWidth}px`})),this.calendar.addEventListener("zoom:done",(()=>{this.bar.style.width=`${t[0].scrollWidth}px`}))}}class Oi{constructor(e){this.config=e;const{elWrap:t,elSticky:s,onStickyClassList:i}=this.config,{height:a}=t.getBoundingClientRect(),n=()=>{if(this.isElementInViewport(t))this.restoreDefaults();else{const{left:e,right:n,height:r,width:l}=s.getBoundingClientRect(),{offset:o}=this.config;let d=0;o.y.getBoundingClientRect?d=o.y.getBoundingClientRect().bottom:"number"==typeof o.y&&(d=o.y),t.style.paddingBottom=`${a}`,s.style.position="fixed",s.style.height=`${r}px`,s.style.width=`${l}px`,s.style[this.config.stickTo||"top"]=`${d}px`,s.style.left=`${e}px`,s.style.right=`${n}px`,i&&t.classList.add(...i)}};n(),document.addEventListener("scroll",n),window.addEventListener("resize",(()=>{this.restoreDefaults(),n()})),this.config.extraListeners&&Object.keys(this.config.extraListeners).map((e=>{this.config.extraListeners[e].addEventListener(e,(()=>{this.restoreDefaults(),n()}))}))}restoreDefaults(){this.config.elSticky.removeAttribute("style"),this.config.elWrap.removeAttribute("style"),this.config.onStickyClassList&&this.config.elWrap.classList.remove(...this.config.onStickyClassList)}isElementInViewport(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}}customElements.define("element-calendar-vacation-year",Bi,{extends:"div"});class Pi extends J.Z{_init(){this.maskInput=this.querySelector("input.toolbar-date-control"),this.valueInput=this.querySelector('input[type="hidden"]'),this.appendText=this.dataset.appendText,this.setValue(),this.inputMask(),this.onClickBtn()}onClickBtn(){this.addEventListener("click",(({target:e})=>{const t=e.closest(".toolbar-date-btn");if(!t)return;const s=parseInt(this.valueInput.value);if(s&&!(s<=0)){switch(!0){case t.classList.contains("toolbar-date-next"):this.valueInput.value=`${s+1}`;break;case t.classList.contains("toolbar-date-prev"):this.valueInput.value=""+(s-1)}this.maskInput.value=`${this.valueInput.value} ${this.appendText}`}}))}inputMask(){const e=()=>{document.activeElement.closest(".toolbar-date-control")||(this.maskInput.value?(this.setValue(),this.maskInput.value=this.valueInput.value+" "+this.appendText,document.removeEventListener("click",e)):this.valueInput.value="")};this.maskInput.addEventListener("focus",(()=>{const{maskInput:t,valueInput:s}=this;t.value=s.value,document.addEventListener("click",e)}));const t=/^([\D]|[\s])$/,s=/\d/;this.maskInput.addEventListener("keydown",(e=>{(t.test(e.key)||s.test(e.key)&&this.maskInput.value.length>=4)&&e.preventDefault()})),this.maskInput.addEventListener("keyup",(()=>this.valueInput.value=this.maskInput.value))}setValue(){this.valueInput.value=this.maskInput.value.replace(this.appendText,"").trim()}}customElements.define("element-toolbar-date-year",Pi,{extends:"div"});var Ri=s(7963);class Fi extends HTMLScriptElement{connectedCallback(){setTimeout((()=>this._init()))}_init(){this.wrap=this.closest("div.template-js-container"),this.content=this.wrap.querySelector("div.template-js-content"),this.template=(0,Ri.template)(`<div class="block-template">${this.innerHTML}</div>`),this.content.addEventListener("click",(({target:e})=>{const t=e.closest("[data-remove-template]");if(!t)return;const s=t.closest("div.block-template");setTimeout((()=>{s&&s.remove()}),1)})),this.dataset.renderFirst&&this.render()}render(e){this.content.appendChild(ct(this.template(e)))}}customElements.define("block-template-underscore",Fi,{extends:"script"});class Ui{constructor(e,t){this.textScroll=t,this.line=e}setX(e){this._x=e;let t=String(e);this.line.style.left=`${t}px`}getDivElement(){return this.line}get width(){return this.line.getBoundingClientRect().width}get x(){return this._x}get endX(){return this._x+this.line.getBoundingClientRect().width}get space(){return.5*this.width}scroll(){let e=String(this._x--);this.line.style.left=`${e}px`,this.isReadyReset()&&this.textScroll.allEnded()&&(this._x=this.textScroll.width)}isReadyReset(){return this.endX<0}}class zi extends J.Z{constructor(){super(...arguments),this.animation=[],this.widgets=[],this.max=3,this.positions=[],this.stopScroll=()=>{this.animation.forEach((e=>{clearInterval(e),e=void 0}))}}_init(){this.line=this.querySelector("div.textscroll-content");let e=this.line.getBoundingClientRect().width;this.containerW=this.getBoundingClientRect().width,this.runningW=this.parentElement.parentElement.getBoundingClientRect().width,this.max=Math.round(this.runningW/e*.7),this.endX=this.containerW;for(let e=0;e<this.max;e++){let t=new Ui(this.line.cloneNode(!0),this);this.appendChild(t.getDivElement()),t.setX(this.endX+this.line.getBoundingClientRect().width*e+t.space*e),this.widgets.push(t)}this.speed=100/+this.dataset.speed*5,this.widgets.forEach(((e,t)=>{this.initAnimation(e,t),this.onPause(e,t)}))}onPause(e,t){const s=()=>{this.removeEventListener("mouseleave",s),this.classList.contains("textscroll--moving")||this.initAnimation(e,t)};this.addEventListener("mouseenter",(()=>{this.stopScroll(),this.addEventListener("mouseleave",s)}))}initAnimation(e,t){this.animation.push(setInterval((()=>e.scroll()),this.speed))}get width(){return this.containerW}allEnded(){let e=!0;for(let t=0;t<this.max;t++)this.widgets[t].endX+this.widgets[t].space>this.width&&(e=!1);return e}}customElements.define("element-widget-textscroll",zi,{extends:"div"});class Vi extends HTMLDivElement{connectedCallback(){const e=this.dataset.refKey,t=this.dataset.refVal,s=this.dataset.id,i=this.dataset.one;this.addEventListener("click",(()=>{new ot.z(e,+t,+s,null,null,null,i)}))}}customElements.define("gallery-thumbnail",Vi,{extends:"div"});class Wi extends cs{constructor(){super(...arguments),this.classes={active:"active"}}_init(){this.static="true"===this.dataset.static,this.clickableFolders="true"===this.dataset.clickableFolders,this.url=this.dataset.url,this._listeners(),this.current=this.querySelector("div.xtree-trail-wrap a.xtree-trail-item"),this.current&&this.current.addEventListener("click",(()=>{this.updateContent(this.current.getAttribute("href"))})),this.dataset.edit&&new os(this,{parent:"ul.xsortable",item:"li[data-xsort-id]",static:this.static,maxDepth:this.dataset.maxDepth?+this.dataset.maxDepth:null,onChange:this.changeHandler.bind(this)})}_listeners(){this._clickListener()}_clickListener(){const e=this.clickableFolders?"li[data-xsort-id]:not(.xlistener)":"li[data-xsort-id][data-item]:not(.xlistener)",t=this.querySelectorAll(e);t.forEach((e=>{e.querySelector("div.xtree-type-model").classList.add("xlistener"),e.querySelector("div.xtree-type-model").addEventListener("click",(s=>{if(!s.target.closest("button")&&(this.clickableFolders||!e.dataset.folder))if(t.forEach((e=>e.querySelector("div.xtree-type-model").classList.remove(this.classes.active))),e.querySelector("div.xtree-type-model").classList.add(this.classes.active),this.url){let t=this.url.replace("@pk",e.dataset.xsortId);this.updateContent(t)}else this._onClick&&this._onClick(e.dataset.xsortId)}))}))}updateContent(e){d.X.content.update(e,{targetId:["permisions","data","tree"],collapseOnUpdate:!0,updateurl:!0})}changeHandler({id:e,nextId:t,parentId:s}){this._clickListener(),new O._(b.xw.zone+"/router/element_tree_model/sort",{id:e,nextId:t,parentId:s,_param:this.dataset.param},{json:!0},(e=>{if(!e.success)return;(new ds.X).show({message:"Sėkmingai išsaugota",position:"top-right",type:"success"})}))}}function Zi(e){let t=e.dataset.target,s=document.querySelector(t)||e;s?e.addEventListener("click",(t=>{let i=e.dataset.toggleClass.split(" ");s.classList.contains(i[0])?s.classList.remove(i[0]):s.classList.add(i[0]),i[1]&&(s.classList.contains(i[1])?s.classList.remove(i[1]):s.classList.add(i[1]))})):console.warn("nerastas targetas")}function Yi(e,t,s){document.querySelectorAll(`${t}:not(.${s})`).forEach((t=>{e(t),t.classList.add(s)}))}customElements.define("element-tree-divisions",Wi,{extends:"div"});const Ki={"element-widget-textscroll":zi,"gallery-thumbnail":Vi,"block-template-underscore":Fi,"element-toolbar-date-year":Pi,"element-calendar-vacation-year":Bi,"element-media-explorer":Di,"element-nav-sidebar":ss,"element-xpercent-circle":ji,"element-link-mega":is,"element-dropdown-remote":as,"element-web-dropdown-simple":ns,"element-news-dashboard":ls,"element-tree-model":hs,"element-tree-divisions":Wi,"element-tree-menu":us,"element-tree-tvs":vs,"element-tree-subpage":gs,"element-tree-registry":fs,"element-tree-internal":ys,"element-calendar-events":_s,"element-card-ajax":ws,"element-calendar-vacations":Ss,"element-table-paginator":Ms,"element-web-paginator":js,"element-calendar-courses":Bs,"element-calendar-shifts-editor":Cs,"element-calendar-shifts-general":Ts,"element-calendar-schedule-cycle":Is,"element-calendar-schedule-clean-cycle":Ds,"element-calendar-schedule-bpc-cycle":$s,"element-calendar-requests":Ns,"element-calendar-times-week":Os,"element-calendar-times-day":Ps,"element-calendar-cards":Rs,"element-comment-form":Fs,"element-tree-picker":Vs,"element-tab-ajax":Ws,"element-tab-simple":Zs,"element-toolbar-search-simple":Ys,"element-toolbar-search-web":Ks,"element-web-proposals-comment":Xs,"element-tree-model-viewer":Js,"element-widget-content":ti,"element-media-gallery-product":si,"element-card-comment":ii,"widget-birthdays":oi,"widget-survey":di,"element-calendar-timeslot":ci,"element-tree-document":ui,"element-nav-disabled":mi,"element-web-courses-user":pi,"element-kanban-sales-board":bi,"element-kanban-sales-item":xi,"element-kanban-simple-board":ki,"element-kanban-simple-item":_i,"element-kanban-tasks-board":Li,"element-kanban-tasks-item":Ei,"widget-link-quick":vi,"element-media-gallery-modal":wi,"element-tree-menu-crm":gi,"card-collapse-users":fi,"element-web-ajax":ai,"element-nav-submenu":yi,"element-web-comments":Gs,"element-web-tabs-events":ei,"element-calendar-resources-breaks":Es,"element-media-active-avatars":li,"element-calendar-times-summary":As};class Xi{constructor(e){this._foutsideClick=this._outsideClick.bind(this),e.addEventListener("contextmenu",(t=>{t.preventDefault(),Xi.menu||this._create(),new a.C.get(e.dataset.contextMenu,{},{json:!1},(e=>{this._show(e,t)}))}))}_create(){let e=document.createRange().createContextualFragment('<div class="xdropdown-menu">\n\t\t\t\t<ul class="dropdown-menu" id="context-menu"></ul>\n\t\t\t</div>');document.body.append(e),Xi.menu=e,Xi.list=document.querySelector("ul#context-menu")}_show(e,t){const s=Xi.list;s.innerHTML=e,s.classList.add("show"),s.style.left=t.pageX.toString()+"px",s.style.top=t.pageY.toString()+"px",setTimeout((()=>{document.addEventListener("click",this._foutsideClick),document.addEventListener("contextmenu",this._foutsideClick)}),100),Qi()}_close(){const e=Xi.list;e.classList.remove("show"),e.style.left=null,e.style.top=null,document.removeEventListener("click",this._foutsideClick),document.removeEventListener("contextmenu",this._foutsideClick)}_outsideClick(e){console.dir("saunu");let t=e.target;Xi.list.contains(t)||this._close()}}var Ji=s(4586);var Gi=s(3999);function Qi(){Object.keys(C).length,Object.keys(Nt).length,document.querySelectorAll("div.table-model:not(.xlistener)").forEach((e=>{e.classList.add("xlistener"),new Vt(e)})),document.querySelectorAll("div.table-list:not(.xlistener)").forEach((e=>{e.classList.add("xlistener"),new Jt(e)})),Yi((e=>{const t=e.querySelector("thead"),s=e.querySelector("tr");if(!s)return;if(!t){const t=document.createElement("thead");let i="";for(let e=0;e<s.childElementCount;e++)i+="<th>"+(e+1).toString()+"</th>";t.innerHTML=`<tr>${i}</tr>`,e.prepend(t)}const i=$(e).DataTable({language:{url:"https://cdn.datatables.net/plug-ins/1.12.0/i18n/lt.json"}});e.dataTable=i}),"table.plugin_data_table","xlistener"),Object.keys(Ki).length,function(){let e=document.querySelectorAll("[data-tooltip]:not(.tooltipstered)");e.length&&e.forEach((e=>{const{tooltipOptions:t}=e.dataset;let s;if(t)try{s=JSON.parse(t)}catch(e){console.warn("Neisparsinti data-tooltip-options")}(new zs.J).init(e,s)})),document.querySelectorAll("[data-context-menu]:not(.xlistener-context)").forEach((e=>{e.classList.add("xlistener-context"),new Xi(e)}));let t=document.querySelectorAll("[data-view-photos]:not(.xgallery--listener)");t&&t.forEach((e=>{e.addEventListener("click",(t=>{if(t.preventDefault(),window.event.ctrlKey)return;const s=e.dataset.viewPhotos;new ot.z("-1",-1,-1,-1,s)})),e.classList.add("xgallery--listener")})),document.querySelectorAll("[data-gallerycollection]:not(.xgallery--collected)").forEach((e=>{e.classList.add("xgallery--collected");let t=[],s=[],i=[],a=e.dataset.gallerycollection;e.querySelectorAll("img").forEach((e=>{e.closest("div[data-gallerycollection]").dataset.gallerycollection===a&&t.push(e)}));let n=e=>{e.stopPropagation();let t=e.target;if("IMG"!==t.tagName)return;let a=s.findIndex((e=>e.Path==t.dataset.blobId||e.Path==t.src));new ot.z("-1",-1,a,-1,s,(e=>{let s=e.currentTarget,a=s.querySelector(`img[src="${t.dataset.blobId}"]`);a&&a.setAttribute("src",t.src),i.forEach((e=>{s.querySelectorAll(".xgallery-list-item").forEach((t=>{let s=t.getAttribute("style");t.setAttribute("style",s.replace(e.dataset.blobId,e.src))}))}))}))};t.forEach(((e,t)=>{let a,r=e;0==r.src.indexOf("data:image")?(a=(0,Ji.Z)(),r.setAttribute("data-blob-id",a),i.push(r)):a=!1,s.push({DocumentId:t,Path:a||r.src,Name:r.title||r.alt,Description:r.dataset.description}),e.addEventListener("click",n)}))})),$(document).on("focusin","input",(function(e){$(e.target).closest(".tox-tinymce-aux, .moxman-window, .tam-assetmanager-root").length&&e.stopImmediatePropagation()}))}(),Yi(Zi,"[data-toggle-class]","xlistener-util"),"web"!==b.f.url&&function(){if("web"===b.f.url)return;let e="a:not("+[".fc-day-grid-event",".fc-time-grid-event",".fc-event",".xlistener",'[href^="mailto:"]','[href^="javascript:;"]','[href^="lexita:"]',"[href*=\\#]","[href^=http]",'[target$="_blank"]','[target$="_self"]','[role="tab"]',"[download]","[data-reload]"].join("):not(")+")";document.querySelectorAll(e).forEach((e=>{e.classList.add("xlistener"),e.addEventListener("click",(t=>{if(t.ctrlKey||t.shiftKey)return;let s=e.closest("ul");s&&s.querySelectorAll("a").forEach((e=>{e.classList.remove("active")})),e.classList.add("active"),i.q.modal.close(),t.preventDefault();let a=t=>{t&&(h.R.start(),d.X.content.load(e.href))},n=e.dataset.question;if(n)try{let e=JSON.parse(n);i.q.question.show(e,a)}catch(e){console.warn(e)}else a(!0)}),!0)}))}(),"function"==typeof window.init_xtable_sortable&&window.init_xtable_sortable(),"function"==typeof window.init_xdropzone_drag&&window.init_xdropzone_drag()}window.onload=()=>{console.info("puslapis pilnai persikrovė");let e=Gi.W.getobj("toast");if(Object.keys(e).length>0&&(i.q.toast.show({message:e.message,type:e.type,position:e.position,timer:e.timer}),Gi.W.clear("toast")),b.rH.developer&&-1!=window.location.search.indexOf("viewport=1")){document.querySelectorAll("div[data-path]").forEach((e=>{e.addEventListener("click",(()=>{window.open(e.dataset.path)}))}))}},window.addEventListener("popstate",(e=>{if(!e.state)return;let t=Object.assign({},e.state);t.updateurl=!1,e.state&&e.state.target&&(t.target=document.querySelector(e.state.target));let s=location.pathname+(location.search?location.search:"");i.q.modal.close(),d.X.content.load(s,t)})),!0===b.rH.developer&&window.addEventListener("keyup",(e=>{if(115===e.keyCode)return-1===window.location.search.indexOf("viewport=1")?void(window.location.search="?viewport=1"):void window.open(window.location.pathname,"_self")}))},3136:(e,t,s)=>{"use strict";s.d(t,{R:()=>a});class i{constructor(){let e=document.createElement("div"),t=document.createElement("div");e.classList.add("xprogress-backdrop"),t.classList.add("xprogress-container"),e.appendChild(t),this.backdrop=e;let s=i.constructSpinner();this.spinner=s}static constructSpinner(){let e=document.createElement("div");e.classList.add("lds-roller");for(let t=0;t<8;t++){let t=document.createElement("div");e.appendChild(t)}return e}start(e=document.body,t,s){if(this.stop(),this.container=e,s){const{backdropClass:e}=s;e&&this.backdrop.classList.add(e)}else this.backdrop.setAttribute("class","xprogress-backdrop");this.container.appendChild(this.backdrop),this.appendSpinner();let i=this.container.querySelector(".xprogress-text");t?(i||(i=document.createElement("span"),i.classList.add("xprogress-text"),this.container.querySelector("div.xprogress-container").prepend(i)),i.innerText=t):i&&(i.innerHTML="")}stop(){Array.prototype.slice.call(document.querySelectorAll("div.xprogress-backdrop")).forEach((e=>{e.remove()}))}appendSpinner(){this.container.querySelector(".xprogress-container").appendChild(this.spinner)}}const a=new i;window.xloadingbar=a},3999:(e,t,s)=>{"use strict";s.d(t,{W:()=>i});let i=new class{constructor(){let e="2019-08-12";localStorage.version!==e&&(localStorage.clear(),localStorage.version=e)}set(e,t){localStorage[e]=t}get(e){return localStorage[e]}clear(e,t=null){if(!t)return void delete localStorage[e];let s=this.getobj(e);delete s[t],this.setobj(e,s)}setobj(e,t){localStorage[e]=JSON.stringify(t)}getobj(e){return localStorage[e]?JSON.parse(localStorage[e]):{}}setobjkey(e,t,s){let i=this.getobj(e);i[t]=s,this.setobj(e,i)}getobjkey(e,t){return this.getobj(e)[t]||{}}}},3130:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var i=function(e,t){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(s[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(s[i[a]]=e[i[a]])}return s};function a(e,t,s){let a;return function(n){var r=i(n,[]);let l=this,o=s&&!a;clearTimeout(a),a=setTimeout((function(){a=null,s||e.apply(l,r)}),t),o&&e.apply(l,r)}}}}]);